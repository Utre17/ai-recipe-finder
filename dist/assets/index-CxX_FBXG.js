import{j as e,u as hs,O as gs,Q as ps,a as us}from"./api-C8vC9EAg.js";import{a as ys,r as m,R as ve}from"./react-DnQQq7lD.js";import{S as _e,X as W,F as fs,A as J,m as f,H as oe,C as Z,U as re,D as Ge,a as We,b as bs,c as me,d as U,M as Ye,P as Ne,e as Ke,L as X,G as js,f as K,g as vs,h as Ns,i as ce,B as qe,j as He,k as ws,l as ks,T as ue,n as Ss,o as Cs,p as Is,R as de,q as Ms,r as Ae,I as As,s as Ps}from"./ui-BrE_19v1.js";import{u as Rs,a as Ls,b as Ds,c as Pe,D as Es,r as Ts,d as $s,e as Fs,s as Os,K as Bs,P as zs}from"./dnd-DVjvMNbv.js";import{s as Ve,a as le,f as _,i as Us,b as Js,d as _s}from"./utils-DbeeY_R7.js";import{R as ye,P as Gs,a as Ws,C as Ys,T as fe,B as Ks,b as Re,X as Le,Y as De,c as Ee,L as qs,d as Te}from"./charts-CyjR7tow.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();var je={},$e=ys;je.createRoot=$e.createRoot,je.hydrateRoot=$e.hydrateRoot;const Hs=({onSearch:s,onToggleFilters:a,showFilters:i})=>{const[l,t]=m.useState(""),r=o=>{o.preventDefault(),s({query:l})},n=()=>{t(""),s({query:""})};return e.jsx("div",{className:"w-full",children:e.jsx("form",{onSubmit:r,className:"relative",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"absolute left-4 z-10",children:e.jsx(_e,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",value:l,onChange:o=>t(o.target.value),placeholder:"Search for recipes by ingredients or name...",className:"w-full pl-12 pr-24 py-4 rounded-2xl bg-white/80 backdrop-blur-md border border-white/20 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none text-lg transition-all shadow-lg"}),e.jsxs("div",{className:"absolute right-2 flex items-center gap-2",children:[l&&e.jsx("button",{type:"button",onClick:n,className:"p-2 rounded-xl hover:bg-gray-100 transition-colors",children:e.jsx(W,{className:"w-5 h-5 text-gray-400"})}),e.jsx("button",{type:"button",onClick:a,className:`p-2 rounded-xl transition-colors ${i?"bg-primary text-white":"hover:bg-gray-100 text-gray-400"}`,children:e.jsx(fs,{className:"w-5 h-5"})}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Search"})]})]})})})},Vs=({isOpen:s,filters:a,onFiltersChange:i})=>{const l=(t,r)=>{i({...a,[t]:r===""?void 0:r})};return e.jsx(J,{children:s&&e.jsx(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl border border-white/20 p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 gradient-text",children:"Advanced Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diet"}),e.jsxs("select",{value:a.diet||"",onChange:t=>l("diet",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Diet"}),e.jsx("option",{value:"vegetarian",children:"Vegetarian"}),e.jsx("option",{value:"vegan",children:"Vegan"}),e.jsx("option",{value:"gluten free",children:"Gluten Free"}),e.jsx("option",{value:"ketogenic",children:"Keto"}),e.jsx("option",{value:"paleo",children:"Paleo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cuisine"}),e.jsxs("select",{value:a.cuisine||"",onChange:t=>l("cuisine",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Cuisine"}),e.jsx("option",{value:"american",children:"American"}),e.jsx("option",{value:"italian",children:"Italian"}),e.jsx("option",{value:"mexican",children:"Mexican"}),e.jsx("option",{value:"chinese",children:"Chinese"}),e.jsx("option",{value:"indian",children:"Indian"}),e.jsx("option",{value:"mediterranean",children:"Mediterranean"}),e.jsx("option",{value:"thai",children:"Thai"}),e.jsx("option",{value:"french",children:"French"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meal Type"}),e.jsxs("select",{value:a.type||"",onChange:t=>l("type",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Type"}),e.jsx("option",{value:"breakfast",children:"Breakfast"}),e.jsx("option",{value:"lunch",children:"Lunch"}),e.jsx("option",{value:"dinner",children:"Dinner"}),e.jsx("option",{value:"dessert",children:"Dessert"}),e.jsx("option",{value:"snack",children:"Snack"}),e.jsx("option",{value:"appetizer",children:"Appetizer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Cooking Time (min)"}),e.jsx("input",{type:"number",value:a.maxReadyTime||"",onChange:t=>l("maxReadyTime",t.target.value?parseInt(t.target.value):void 0),placeholder:"e.g. 30",className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intolerances"}),e.jsxs("select",{value:a.intolerances||"",onChange:t=>l("intolerances",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"No Restrictions"}),e.jsx("option",{value:"dairy",children:"Dairy Free"}),e.jsx("option",{value:"egg",children:"Egg Free"}),e.jsx("option",{value:"gluten",children:"Gluten Free"}),e.jsx("option",{value:"peanut",children:"Peanut Free"}),e.jsx("option",{value:"sesame",children:"Sesame Free"}),e.jsx("option",{value:"seafood",children:"Seafood Free"}),e.jsx("option",{value:"shellfish",children:"Shellfish Free"}),e.jsx("option",{value:"soy",children:"Soy Free"}),e.jsx("option",{value:"tree nut",children:"Tree Nut Free"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:a.sort||"",onChange:t=>l("sort",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Relevance"}),e.jsx("option",{value:"popularity",children:"Popularity"}),e.jsx("option",{value:"healthiness",children:"Healthiness"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"time",children:"Cooking Time"}),e.jsx("option",{value:"random",children:"Random"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>i({query:a.query}),className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Clear Filters"})})]})})})},we="recipe-finder-favorites",xe="recipe-finder-meal-plans",he="recipe-finder-shopping-lists",te=()=>{try{const s=localStorage.getItem(we);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading favorites:",s),[]}},Qe=s=>{try{const a=te();if(!a.some(l=>l.id===s.id)){const l=[...a,s];localStorage.setItem(we,JSON.stringify(l))}}catch(a){console.error("Error adding to favorites:",a)}},Xe=s=>{try{const i=te().filter(l=>l.id!==s);localStorage.setItem(we,JSON.stringify(i))}catch(a){console.error("Error removing from favorites:",a)}},Ze=s=>{try{return te().some(i=>i.id===s)}catch(a){return console.error("Error checking favorite status:",a),!1}},ie=()=>{try{const s=localStorage.getItem(xe);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading meal plans:",s),[]}},Qs=s=>{try{const a=ie(),i={...s,id:Date.now().toString()+Math.random().toString(36).substr(2,9)},l=[...a,i];return localStorage.setItem(xe,JSON.stringify(l)),i.id}catch(a){return console.error("Error adding meal plan:",a),""}},Fe=(s,a)=>{try{const l=ie().map(t=>t.id===s?{...t,...a}:t);localStorage.setItem(xe,JSON.stringify(l))}catch(i){console.error("Error updating meal plan:",i)}},Xs=s=>{try{const i=ie().filter(l=>l.id!==s);localStorage.setItem(xe,JSON.stringify(i))}catch(a){console.error("Error removing meal plan:",a)}},Zs=(s,a)=>{try{return ie().filter(l=>l.date>=s&&l.date<=a)}catch(i){return console.error("Error filtering meal plans:",i),[]}},Q=()=>{try{const s=localStorage.getItem(he);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading shopping lists:",s),[]}},et=(s,a)=>{try{const i=new Map;a.forEach(o=>{o.recipe.extendedIngredients.forEach(x=>{const b=x.nameClean||x.name,h=i.get(b);h?(h.amount+=x.amount*o.servings,h.recipes.includes(o.recipe.title)||h.recipes.push(o.recipe.title)):i.set(b,{amount:x.amount*o.servings,unit:x.unit,recipes:[o.recipe.title],aisle:x.aisle})})});const l=Array.from(i.entries()).map(([o,x])=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),ingredient:o,amount:Math.round(x.amount*100)/100,unit:x.unit,checked:!1,recipes:x.recipes,aisle:x.aisle})),t={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:s,dateCreated:new Date().toISOString(),items:l,totalItems:l.length,checkedItems:0},n=[...Q(),t];return localStorage.setItem(he,JSON.stringify(n)),t.id}catch(i){return console.error("Error creating shopping list:",i),""}},st=(s,a)=>{try{const l=Q().map(t=>t.id===s?{...t,...a}:t);localStorage.setItem(he,JSON.stringify(l))}catch(i){console.error("Error updating shopping list:",i)}},tt=(s,a)=>{try{const l=Q().map(t=>{if(t.id===s){const r=t.items.map(o=>o.id===a?{...o,checked:!o.checked}:o),n=r.filter(o=>o.checked).length;return{...t,items:r,checkedItems:n}}return t});localStorage.setItem(he,JSON.stringify(l))}catch(i){console.error("Error toggling shopping list item:",i)}},es=({recipe:s,onSelect:a})=>{const[i,l]=m.useState(Ze(s.id)),t=n=>{n.stopPropagation(),i?Xe(s.id):Qe(s),l(!i)},r=n=>`$${(n/100).toFixed(2)}`;return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-8},transition:{duration:.3},className:"bg-white rounded-3xl overflow-hidden shadow-lg hover:shadow-xl transition-all cursor-pointer card-hover",onClick:()=>a(s),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-48 object-cover"}),e.jsx("button",{onClick:t,className:`absolute top-4 right-4 p-2 rounded-full backdrop-blur-md transition-all ${i?"bg-red-500 text-white shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,children:e.jsx(oe,{className:`w-5 h-5 ${i?"fill-current":""}`})}),s.diets.length>0&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:s.diets[0]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.readyInMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.servings," servings"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:r(s.pricePerServing)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:(s.spoonacularScore/20).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Health Score: ",s.healthScore]})]})]}),s.cuisines.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:s.cuisines.slice(0,2).map((n,o)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:n},o))}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3",dangerouslySetInnerHTML:{__html:s.summary.replace(/<[^>]*>/g,"")}})]})]})},at=({type:s="card",count:a=12})=>{const i=()=>e.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-lg",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-lg animate-pulse w-3/4"}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-16"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-20"})]}),e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-lg animate-pulse mt-4"})]})]}),l=()=>e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsx("div",{className:"space-y-4",children:Array.from({length:6}).map((o,x)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-2/3"})]}),e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-full animate-pulse"})]},x))})}),t=()=>e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"h-8 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse w-64"})}),e.jsx("div",{className:"grid grid-cols-8 gap-4",children:Array.from({length:32}).map((o,x)=>e.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-2xl animate-pulse"},x))})]}),r=()=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-48"})}),e.jsx("div",{className:"h-64 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"})]}),n=()=>{switch(s){case"card":return e.jsx(f.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:Array.from({length:a}).map((o,x)=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:x*.05},children:i()},x))});case"list":return e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l()});case"calendar":return e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:t()});case"chart":return e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:4}).map((o,x)=>e.jsx(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:x*.1},children:r()},x))});default:return null}};return e.jsx(e.Fragment,{children:n()})},ae="37432ff1ba2b4014bbff9473ac02e389",ss="https://api.spoonacular.com/recipes";console.log("ðŸ”‘ API Configuration:",{hasSpoonacularKey:!0,keyLength:ae?.length||0,keyPreview:"***masked***"});const rt="https://www.themealdb.com/api/json/v1/1",ts=async s=>{try{console.log("ðŸš€ Using Spoonacular API with key");const a=new URLSearchParams({apiKey:ae,query:s.query,number:"12",addRecipeInformation:"true",fillIngredients:"true"});s.diet&&a.append("diet",s.diet),s.intolerances&&a.append("intolerances",s.intolerances),s.cuisine&&a.append("cuisine",s.cuisine),s.type&&a.append("type",s.type),s.maxReadyTime&&a.append("maxReadyTime",s.maxReadyTime.toString()),s.sort&&a.append("sort",s.sort);const i=await fetch(`${ss}/complexSearch?${a}`);if(!i.ok){if(console.error("âŒ Spoonacular API error:",i.status,i.statusText),i.status===401)return console.error("ðŸ”‘ 401 Unauthorized - Check your Spoonacular API key"),console.log("ðŸ”„ Falling back to TheMealDB API"),await Oe(s);throw new Error(`API Error: ${i.status}`)}return await i.json()}catch(a){return console.error("Error searching recipes:",a),console.log("ðŸ”„ Attempting TheMealDB fallback"),await Oe(s)}},Oe=async s=>{try{let a=`${rt}/search.php?s=${s.query}`;const i=await fetch(a);if(!i.ok)throw new Error(`MealDB API Error: ${i.status}`);const l=await i.json();if(!l.meals)return{results:[],offset:0,number:0,totalResults:0};const t=l.meals.map(r=>({id:parseInt(r.idMeal),title:r.strMeal,image:r.strMealThumb,imageType:"jpg",readyInMinutes:30,servings:4,spoonacularScore:85,healthScore:75,pricePerServing:250,cuisines:r.strArea?[r.strArea]:[],dishTypes:r.strCategory?[r.strCategory]:[],diets:[],occasions:[],analyzedInstructions:[{name:"",steps:r.strInstructions?r.strInstructions.split(".").filter(n=>n.trim()).map((n,o)=>({number:o+1,step:n.trim(),ingredients:[],equipment:[]})):[]}],extendedIngredients:Array.from({length:20},(n,o)=>o+1).map(n=>({ingredient:r[`strIngredient${n}`],measure:r[`strMeasure${n}`]})).filter(n=>n.ingredient&&n.ingredient.trim()).map((n,o)=>({id:o+1,aisle:"",image:"",consistency:"",name:n.ingredient,nameClean:n.ingredient,original:`${n.measure} ${n.ingredient}`.trim(),originalName:n.ingredient,amount:1,unit:n.measure||"",meta:[],measures:{us:{amount:1,unitShort:"",unitLong:""},metric:{amount:1,unitShort:"",unitLong:""}}})),summary:r.strInstructions?r.strInstructions.substring(0,200)+"...":"",instructions:r.strInstructions||""}));return{results:t,offset:0,number:t.length,totalResults:t.length}}catch(a){throw console.error("Error with MealDB API:",a),a}},it=async(s=12)=>{try{const a=await fetch(`${ss}/random?apiKey=${ae}&number=${s}&addRecipeInformation=true`);if(!a.ok)throw new Error(`API Error: ${a.status}`);return(await a.json()).recipes||[]}catch(a){throw console.error("Error fetching random recipes:",a),a}},nt=({filters:s,onRecipeSelect:a,onRecipeResults:i})=>{const{data:l,isLoading:t,error:r}=hs({queryKey:["recipes",s],queryFn:async()=>{if(!s.query.trim()&&!s.diet&&!s.cuisine){const o=await it(12),x={results:o,offset:0,number:o.length,totalResults:o.length};return i?.(o),x}const n=await ts(s);return i?.(n.results),n},enabled:!0});return t?e.jsx(at,{type:"card",count:12}):r?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(bs,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-500",children:"Please try again later"})]}):!l||l.results.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(me,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No recipes found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or filters"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:!s.query.trim()&&!s.diet&&!s.cuisine?"Featured Recipes":"Search Results"}),e.jsxs("span",{className:"text-gray-500",children:[l.totalResults," recipe",l.totalResults!==1?"s":""," found"]})]}),e.jsx(f.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.results.map((n,o)=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:o*.1},children:e.jsx(es,{recipe:n,onSelect:a})},n.id))}),l.results.length<l.totalResults&&e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-2xl hover:shadow-lg transition-all font-medium",children:"Load More Recipes"})})]})},ee="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";console.log("ðŸ¤– AI Configuration:",{hasOpenRouterKey:!0,keyLength:ee?.length||0,keyPreview:"***masked***"});const ge=new gs({baseURL:"https://openrouter.ai/api/v1",apiKey:ee,dangerouslyAllowBrowser:!0,defaultHeaders:{"HTTP-Referer":"https://ai-recipe-finder.vercel.app","X-Title":"AI Recipe Finder & Meal Planner"}}),pe="meta-llama/llama-3.2-3b-instruct:free",lt=async(s,a=3)=>{try{const i=`You are a professional chef AI assistant. Based on the user's preferences, suggest ${a} personalized recipes.

User Preferences:
- Favorite ingredients: ${s.favoriteIngredients.join(", ")||"None specified"}
- Dietary restrictions: ${s.dietaryRestrictions.join(", ")||"None"}
- Disliked ingredients: ${s.dislikedIngredients.join(", ")||"None"}
- Preferred cuisines: ${s.preferredCuisines.join(", ")||"Any"}
- Cooking skill: ${s.cookingSkillLevel}
- Time available: ${s.timeAvailable} minutes
- Recent meals (avoid similar): ${s.recentMeals.join(", ")||"None"}

IMPORTANT: Respond with ONLY a valid JSON array of ${a} recipe objects. No additional text.

[
  {
    "title": "Recipe Name",
    "description": "Brief appealing description",
    "ingredients": ["ingredient 1", "ingredient 2"],
    "instructions": ["step 1", "step 2"],
    "cookingTime": 30,
    "difficulty": "easy",
    "cuisine": "cuisine_type",
    "dietaryTags": ["tag1", "tag2"]
  }
]

Start with [ and end with ]. Each recipe must have all fields.`,t=(await ge.chat.completions.create({model:pe,messages:[{role:"user",content:i}],temperature:.8,max_tokens:2e3})).choices[0]?.message?.content;if(!t)throw new Error("No response from AI");console.log("ðŸ” Raw AI recipe response:",t);try{const r=t.indexOf("["),n=t.lastIndexOf("]");if(r!==-1&&n!==-1&&n>r){const o=t.substring(r,n+1),x=JSON.parse(o);return Array.isArray(x)?x:[x]}else{const o=JSON.parse(t);return Array.isArray(o)?o:[o]}}catch{return console.warn("âš ï¸ AI recipe response was not valid JSON, using fallback..."),Be(s,a)}}catch(i){return console.error("Error getting AI recommendations:",i),Be(s,a)}},ot=async(s,a=7)=>{try{console.log("ðŸš€ Making OpenRouter API call for meal plan...");const i=`You are a nutrition and meal planning expert. Create a ${a}-day meal plan for someone with these preferences:

- Dietary restrictions: ${s.dietaryRestrictions.join(", ")||"None"}
- Preferred cuisines: ${s.preferredCuisines.join(", ")||"Varied"}
- Cooking skill: ${s.cookingSkillLevel}
- Time per meal: ${s.timeAvailable} minutes max
- Favorite ingredients to include: ${s.favoriteIngredients.join(", ")||"Flexible"}
- Ingredients to avoid: ${s.dislikedIngredients.join(", ")||"None"}

IMPORTANT: You must respond with ONLY valid JSON in this exact format. No extra text before or after:

{
  "mealPlan": "Day 1
Breakfast: [specific meal name]
Lunch: [specific meal name]
Dinner: [specific meal name]

Day 2
Breakfast: [specific meal name]
Lunch: [specific meal name]
Dinner: [specific meal name]

[continue for all ${a} days]",
  "explanation": "[Brief explanation of why this plan works for their needs and preferences]"
}

Example format for mealPlan content:
Day 1
Breakfast: Greek yogurt with honey and berries
Lunch: Quinoa salad with grilled vegetables
Dinner: Baked salmon with roasted sweet potatoes

Day 2
Breakfast: Oatmeal with banana and nuts
Lunch: Turkey and avocado wrap
Dinner: Stir-fried tofu with brown rice

Make sure each meal is specific and realistic for a ${s.cookingSkillLevel} cook with ${s.timeAvailable} minutes per meal.`,l=await ge.chat.completions.create({model:pe,messages:[{role:"user",content:i}],temperature:.7,max_tokens:1500});console.log("âœ… OpenRouter API call successful");const t=l.choices[0]?.message?.content;if(!t)throw new Error("No response from AI");console.log("ðŸ” Raw AI response:",t);try{const r=t.indexOf("{"),n=t.lastIndexOf("}");if(r!==-1&&n!==-1&&n>r){const o=t.substring(r,n+1);return JSON.parse(o)}else return JSON.parse(t)}catch{console.warn("âš ï¸ AI response was not valid JSON, attempting to extract JSON...");const n=t.match(/\{[\s\S]*?\}/);if(n)try{const o=JSON.parse(n[0]);return console.log("âœ… Successfully extracted JSON from response"),o}catch{console.error("âŒ Could not extract valid JSON")}return console.log("ðŸ”„ Creating fallback JSON structure from text response"),{mealPlan:`Day 1
Breakfast: Greek yogurt with honey and mixed berries
Lunch: Mediterranean quinoa salad with feta
Dinner: Grilled chicken with roasted vegetables

Day 2
Breakfast: Oatmeal with banana and almonds
Lunch: Turkey and avocado wrap with side salad
Dinner: Baked salmon with sweet potato fries

Day 3
Breakfast: Scrambled eggs with whole grain toast
Lunch: Lentil soup with crusty bread
Dinner: Vegetable stir-fry with brown rice

Day 4
Breakfast: Smoothie bowl with granola and fruit
Lunch: Caprese salad with baguette
Dinner: Lean beef with steamed broccoli

Day 5
Breakfast: Avocado toast with poached egg
Lunch: Chicken Caesar salad
Dinner: Pasta with marinara and side vegetables

Day 6
Breakfast: Chia pudding with coconut and berries
Lunch: Veggie burger with sweet potato wedges
Dinner: Grilled fish with quinoa pilaf

Day 7
Breakfast: Pancakes with fresh fruit
Lunch: Asian-style soup with dumplings
Dinner: Roasted vegetables with herb-crusted tofu`,explanation:"This balanced 7-day meal plan provides variety while considering your dietary preferences and cooking skill level. Each meal is designed to be prepared within your time constraints and includes a good balance of proteins, healthy carbohydrates, and vegetables."}}}catch(i){return console.error("âŒ Error getting AI meal plan:",i),i instanceof Error&&i.message.includes("401")&&console.error("ðŸ”‘ OpenRouter Authentication Error - Check your API key at https://openrouter.ai/keys"),{mealPlan:`Day 1
Breakfast: Greek yogurt with honey and mixed berries
Lunch: Mediterranean quinoa salad with feta
Dinner: Grilled chicken with roasted vegetables

Day 2
Breakfast: Oatmeal with banana and almonds
Lunch: Turkey and avocado wrap with side salad
Dinner: Baked salmon with sweet potato fries

Day 3
Breakfast: Scrambled eggs with whole grain toast
Lunch: Lentil soup with crusty bread
Dinner: Vegetable stir-fry with brown rice

Day 4
Breakfast: Smoothie bowl with granola and fruit
Lunch: Caprese salad with baguette
Dinner: Lean beef with steamed broccoli

Day 5
Breakfast: Avocado toast with poached egg
Lunch: Chicken Caesar salad
Dinner: Pasta with marinara and side vegetables

Day 6
Breakfast: Chia pudding with coconut and berries
Lunch: Veggie burger with sweet potato wedges
Dinner: Grilled fish with quinoa pilaf

Day 7
Breakfast: Pancakes with fresh fruit
Lunch: Asian-style soup with dumplings
Dinner: Roasted vegetables with herb-crusted tofu`,explanation:"This balanced 7-day meal plan provides variety while considering your dietary preferences and cooking skill level. Each meal is designed to be prepared within your time constraints and includes a good balance of proteins, healthy carbohydrates, and vegetables."}}},ct=async(s,a)=>{try{const i=`You are a chef AI assistant. Modify this recipe to be ${a.join(", ")}:

Original Recipe:
Title: ${s.title}
Ingredients: ${s.extendedIngredients.map(r=>r.original).join(", ")}
Instructions: ${s.instructions||"See analyzedInstructions"}
Servings: ${s.servings}
Cooking Time: ${s.readyInMinutes} minutes

Please provide the modified recipe and explain what changes were made.

Format as JSON:
{
  "modifiedRecipe": "Modified Title

Ingredients:
- ingredient 1
- ingredient 2

Instructions:
1. Step 1
2. Step 2

Servings: X
Time: Y minutes",
  "changes": "Explanation of what was changed and why"
}`,t=(await ge.chat.completions.create({model:pe,messages:[{role:"user",content:i}],temperature:.6,max_tokens:1200})).choices[0]?.message?.content;if(!t)throw new Error("No response from AI");try{const r=t.indexOf("{"),n=t.lastIndexOf("}");if(r!==-1&&n!==-1&&n>r){const o=t.substring(r,n+1);return JSON.parse(o)}else return JSON.parse(t)}catch{return console.warn("âš ï¸ Could not parse AI modification response as JSON"),{modifiedRecipe:`Modified ${s.title}

${t}`,changes:"AI provided modifications but in an unexpected format."}}}catch(i){return console.error("Error modifying recipe with AI:",i),{modifiedRecipe:`Modified ${s.title}

This is a placeholder for the modified recipe.`,changes:"AI modification service is currently unavailable."}}},dt=async(s,a)=>{try{const i=`You are a smart shopping assistant. Optimize this shopping list for efficiency and ${a.budget||"medium"} budget:

Ingredients needed: ${s.join(", ")}
Budget preference: ${a.budget||"medium"}
Store type: ${a.storeType||"regular grocery store"}

Please provide:
1. An organized shopping list grouped by store sections
2. Money-saving tips and substitutions
3. Quantity recommendations for best value

Format as JSON:
{
  "optimizedList": "PRODUCE:
- item 1
- item 2

DAIRY:
- item 3

MEAT:
- item 4",
  "tips": ["tip 1", "tip 2", "tip 3"]
}`,t=(await ge.chat.completions.create({model:pe,messages:[{role:"user",content:i}],temperature:.5,max_tokens:800})).choices[0]?.message?.content;if(!t)throw new Error("No response from AI");try{const r=t.indexOf("{"),n=t.lastIndexOf("}");if(r!==-1&&n!==-1&&n>r){const o=t.substring(r,n+1);return JSON.parse(o)}else return JSON.parse(t)}catch{return console.warn("âš ï¸ Could not parse AI shopping optimization response as JSON"),{optimizedList:`Shopping List:

${s.map(n=>`â€¢ ${n}`).join(`
`)}`,tips:["AI optimization is currently unavailable","Buy seasonal produce for better prices","Check for sales and coupons"]}}}catch(i){return console.error("Error optimizing shopping list:",i),{optimizedList:s.join(`
- `),tips:["Buy seasonal produce for better prices","Check for sales and coupons","Consider generic brands"]}}},Be=(s,a)=>[{title:"Quick Vegetable Stir Fry",description:"A healthy and colorful vegetable stir fry perfect for any skill level",ingredients:["mixed vegetables","soy sauce","garlic","ginger","oil"],instructions:["Heat oil in pan","Add garlic and ginger","Add vegetables","Stir fry for 5-7 minutes","Add soy sauce"],cookingTime:15,difficulty:"easy",cuisine:"Asian",dietaryTags:["vegetarian","vegan","quick"]},{title:"Classic Pasta with Marinara",description:"Simple and delicious pasta dish that never goes out of style",ingredients:["pasta","marinara sauce","garlic","basil","parmesan cheese"],instructions:["Boil pasta","Heat sauce with garlic","Combine pasta and sauce","Garnish with basil and cheese"],cookingTime:20,difficulty:"easy",cuisine:"Italian",dietaryTags:["vegetarian"]},{title:"Grilled Chicken Salad",description:"Light and nutritious salad with perfectly grilled chicken",ingredients:["chicken breast","mixed greens","tomatoes","cucumber","olive oil","lemon"],instructions:["Season and grill chicken","Prepare salad ingredients","Make dressing","Combine and serve"],cookingTime:25,difficulty:"medium",cuisine:"Mediterranean",dietaryTags:["high-protein","low-carb"]}].slice(0,a),ze="ai-recipe-finder-preferences",Ue={favoriteIngredients:[],dietaryRestrictions:[],dislikedIngredients:[],preferredCuisines:[],cookingSkillLevel:"beginner",timeAvailable:30,recentMeals:[]},ne=()=>{const[s,a]=m.useState(Ue),[i,l]=m.useState([]),[t,r]=m.useState(!1);m.useEffect(()=>{try{const d=localStorage.getItem(ze);d&&a({...Ue,...JSON.parse(d)})}catch(d){console.error("Error loading preferences:",d)}},[]);const n=m.useCallback(d=>{const u={...s,...d};a(u);try{localStorage.setItem(ze,JSON.stringify(u))}catch(k){console.error("Error saving preferences:",k)}},[s]),o=m.useCallback(async(d=3)=>{r(!0);try{const u=await lt(s,d);return l(u),u}catch(u){return console.error("Error getting AI recommendations:",u),[]}finally{r(!1)}},[s]),x=m.useCallback(async(d=7)=>{r(!0);try{return await ot(s,d)}catch(u){return console.error("Error getting AI meal plan:",u),{mealPlan:"Unable to generate meal plan at this time.",explanation:"Please try again later."}}finally{r(!1)}},[s]),b=m.useCallback(async(d,u)=>{r(!0);try{return await ct(d,u)}catch(k){return console.error("Error modifying recipe:",k),{modifiedRecipe:"Unable to modify recipe at this time.",changes:"Please try again later."}}finally{r(!1)}},[]),h=m.useCallback(async(d,u={})=>{r(!0);try{return await dt(d,u)}catch(k){return console.error("Error optimizing shopping list:",k),{optimizedList:d.join(`
- `),tips:["Unable to optimize at this time."]}}finally{r(!1)}},[]),c=m.useCallback(d=>{const u=[...s.recentMeals];u.unshift(d),u.length>10&&u.pop(),n({recentMeals:u})},[s.recentMeals,n]);return{preferences:s,updatePreferences:n,aiRecommendations:i,isLoading:t,getRecommendations:o,getMealPlan:x,modifyRecipe:b,optimizeShoppingList:h,addToRecentMeals:c}},mt=({recipe:s,onClose:a})=>{const[i,l]=m.useState(()=>Ze(s.id)),[t,r]=m.useState(!1),[n,o]=m.useState(null),[x,b]=m.useState([]),h=Math.max(1,s.servings??1),[c,d]=m.useState(h),[u,k]=m.useState(!1),{modifyRecipe:D,isLoading:L}=ne(),P=()=>{i?(Xe(s.id),l(!1)):(Qe(s),l(!0))},j=p=>`$${(p/100).toFixed(2)}`,F=async()=>{if(x.length===0)return;const p=await D(s,x);o(p)},M=p=>{d(S=>p==="increase"?Math.min(S+1,20):Math.max(S-1,1))},O=()=>{k(!u)},R=["vegetarian","vegan","gluten-free","low-carb","high-protein","dairy-free","keto-friendly","low-sodium","heart-healthy","quick (30 min or less)"];return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 bg-white/80 backdrop-blur-md rounded-full hover:bg-white transition-colors",children:e.jsx(W,{className:"w-6 h-6"})}),e.jsx(f.button,{onClick:P,whileHover:{scale:1.1},whileTap:{scale:.9},className:`absolute top-4 left-4 p-2 backdrop-blur-md rounded-full transition-all duration-200 ${i?"bg-red-500 text-white shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,title:i?"Remove from favorites":"Add to favorites",children:e.jsx(oe,{className:`w-6 h-6 transition-all duration-200 ${i?"fill-current scale-110":""}`})}),e.jsx(f.button,{onClick:p=>{p.stopPropagation(),console.log("ðŸ¤– AI Modify button clicked"),r(!0)},whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute top-4 left-16 p-2 bg-purple-500/90 text-white backdrop-blur-md rounded-full hover:bg-purple-600/90 transition-all duration-200 shadow-lg",title:"ðŸ¤– AI Modify Recipe - Make it vegetarian, gluten-free, keto, etc.",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsxs("span",{children:[s.readyInMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white/10 backdrop-blur-sm rounded-lg px-2 py-1",children:[e.jsx(re,{className:"w-5 h-5"}),u?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M("decrease"),disabled:c<=1,className:"w-6 h-6 bg-white/20 hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:e.jsx(Ye,{className:"w-3 h-3"})}),e.jsxs("span",{className:"min-w-[60px] text-center font-semibold",children:[c," serving",c!==1?"s":""]}),e.jsx("button",{onClick:()=>M("increase"),disabled:c>=20,className:"w-6 h-6 bg-white/20 hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:e.jsx(Ne,{className:"w-3 h-3"})}),e.jsx("button",{onClick:O,className:"ml-1 p-1 bg-green-500/80 hover:bg-green-600/80 rounded transition-colors",title:"Done editing",children:e.jsx(W,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[c," serving",c!==1?"s":""]}),e.jsx("button",{onClick:O,className:"p-1 bg-white/20 hover:bg-white/30 rounded transition-colors",title:"Edit serving size",children:e.jsx(Ke,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{children:(s.spoonacularScore/20).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsxs("span",{children:[j(s.pricePerServing),"/serving"]}),c>1&&e.jsxs("span",{className:"text-white/70 text-sm ml-1",children:["(Total: ",j(s.pricePerServing*c),")"]})]})]})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-16rem)]",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.diets.map((p,S)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:p},S)),s.cuisines.map((p,S)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:p},S))]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 gradient-text",children:"About This Recipe"}),e.jsx("div",{className:"text-gray-600 leading-relaxed",dangerouslySetInnerHTML:{__html:s.summary}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-primary"}),"Ingredients"]}),e.jsx("div",{className:"space-y-3",children:s.extendedIngredients.map((p,S)=>{const E=s.servings&&s.servings>0?s.servings:h,v=c/E;let y=p.original;if(p.amount){const N=Math.round(p.amount*v*100)/100,g=p.unit?` ${p.unit}`:"";y=`${N}${g} ${p.name}`}return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-gray-700",children:y}),c!==s.servings&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Scaled for ",c," serving",c!==1?"s":"",p.amount&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(original: ",p.amount," ",p.unit,")"]})]})]})]},S)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Instructions"}),e.jsx("div",{className:"space-y-4",children:s.analyzedInstructions[0]?.steps?.length?s.analyzedInstructions[0].steps.map((p,S)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:p.number}),e.jsx("p",{className:"text-gray-700 pt-1",children:p.step})]},S)):e.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:s.instructions}})})]})]}),s.nutrition&&e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 gradient-text",children:["Nutrition Information",c!==s.servings&&e.jsxs("span",{className:"text-sm font-normal text-blue-600 ml-2",children:["(for ",c," serving",c!==1?"s":"",")"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.nutrition.nutrients.slice(0,8).map((p,S)=>{const E=s.servings&&s.servings>0?s.servings:h,v=c/E,y=Math.round(p.amount*v);return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-lg text-gray-800",children:[y,e.jsx("span",{className:"text-sm text-gray-600",children:p.unit})]}),e.jsx("div",{className:"text-sm text-gray-600",children:p.name}),c!==s.servings&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(was ",Math.round(p.amount),p.unit,")"]})]},S)})})]})]})]})})}),e.jsx(J,{children:t&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:p=>{p.stopPropagation(),console.log("ðŸ”™ AI Modal backdrop clicked"),r(!1)},children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-lg w-full max-h-[80vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI Recipe Modifications"})]}),e.jsx("button",{onClick:p=>{p.stopPropagation(),console.log("âŒ AI Modal close button clicked"),r(!1)},className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(W,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6 space-y-6",children:n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"âœ¨ Your Modified Recipe:"}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 max-h-80 overflow-y-auto border border-purple-100",children:e.jsx("div",{className:"space-y-4",children:n.modifiedRecipe.split(`

`).filter(p=>p.trim()).map((p,S)=>{const E=p.split(`
`).filter(g=>g.trim()),v=E[0],y=E.slice(1);return v.endsWith(":")||v===v.toUpperCase()?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h5",{className:"font-bold text-purple-800 text-lg flex items-center gap-2",children:[v.includes("Ingredients")&&"ðŸ¥˜",v.includes("Instructions")&&"ðŸ‘¨â€ðŸ³",v.includes("Servings")&&"ðŸ½ï¸",v.includes("Time")&&"â±ï¸",v]}),e.jsx("div",{className:"ml-4 space-y-1",children:y.map((g,C)=>e.jsx("div",{className:"flex items-start gap-2 text-gray-700",children:g.match(/^\d+\./)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:g.match(/^\d+/)?.[0]}),e.jsx("span",{children:g.replace(/^\d+\.\s*/,"")})]}):g.startsWith("-")||g.startsWith("â€¢")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),e.jsx("span",{children:g.replace(/^[-â€¢]\s*/,"")})]}):e.jsx("span",{className:"ml-2",children:g})},C))})]},S):e.jsx("div",{className:"text-gray-700 leading-relaxed bg-white/50 rounded-lg p-3",children:E.map((g,C)=>e.jsx("p",{className:"mb-1",children:g},C))},S)})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"ðŸ“ What Changed:"}),e.jsx("div",{className:"bg-blue-50 rounded-xl p-4",children:e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:n.changes})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{o(null),b([])},className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-medium",children:"Try Different Modifications"}),e.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Done"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"How would you like to modify this recipe?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Select the dietary preferences or restrictions you'd like AI to adapt this recipe for:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:R.map(p=>e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-200 rounded-xl hover:border-purple-300 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:x.includes(p),onChange:S=>{S.target.checked?b([...x,p]):b(x.filter(E=>E!==p))},className:"text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:p})]},p))})]}),e.jsx("button",{onClick:F,disabled:x.length===0||L,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium disabled:opacity-50",children:L?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"AI is modifying your recipe..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"Modify Recipe with AI"})]})})]})})]})})})]})},xt=()=>e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"})]}),ht=()=>{const[s,a]=m.useState(!1),[i,l]=m.useState([]),t=()=>{l(te()),a(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-white/20 sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(me,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold gradient-text",children:"Recipe Finder"})]}),e.jsx("nav",{className:"flex items-center gap-6",children:e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 rounded-2xl bg-white/50 hover:bg-white/70 transition-colors border border-white/20",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Favorites"}),e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:te().length})]})})]})})}),e.jsx(J,{children:s&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>a(!1),children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Your Favorite Recipes"}),e.jsx("button",{onClick:()=>a(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(W,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No favorite recipes yet"}),e.jsx("p",{className:"text-gray-400",children:"Start exploring and add some recipes to your favorites!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(r=>e.jsx(es,{recipe:r,onSelect:()=>{a(!1)}},r.id))})})]})})})]})},as=()=>{const[s,a]=m.useState([]),[i,l]=m.useState(!0),t=m.useCallback(()=>{l(!0);try{const c=ie();a(c)}catch(c){console.error("Error loading meal plans:",c)}finally{l(!1)}},[]);m.useEffect(()=>{t()},[t]);const r=m.useCallback((c,d,u,k=4,D)=>{const P=Qs({date:d,mealType:u,recipe:c,servings:k,notes:D});return P?(t(),P):null},[t]),n=m.useCallback((c,d)=>{Fe(c,d),t()},[t]),o=m.useCallback(c=>{Xs(c),t()},[t]),x=m.useCallback(c=>s.filter(d=>d.date===c),[s]),b=m.useCallback(c=>{const d=new Date(c);d.setDate(c.getDate()+6);const u=c.toISOString().split("T")[0],k=d.toISOString().split("T")[0];return Zs(u,k)},[]),h=m.useCallback((c,d,u)=>{Fe(c,{date:d,mealType:u}),t()},[t]);return{mealPlans:s,isLoading:i,addRecipeToMealPlan:r,updateMealPlanById:n,removeMealPlanById:o,getMealPlansForDate:x,getMealPlansForWeek:b,moveMealPlan:h,refreshMealPlans:t}},gt=({id:s,mealPlans:a,date:i,mealType:l,onRemoveMeal:t,onRecipeSelect:r,onEditServingSize:n})=>{const{isOver:o,setNodeRef:x,active:b}=Rs({id:s,data:{type:"meal-slot",date:i,mealType:l}});return ve.useEffect(()=>{console.log("ðŸŽ¯ MealSlot mounted:",s,"for",l),o&&b&&console.log("ðŸŸ¢ Recipe is hovering over meal slot:",s,"Active ID:",b.id)},[o,b,s,l]),e.jsxs("div",{ref:x,className:`min-h-[120px] p-3 rounded-2xl border-2 border-dashed transition-all duration-200 ${o?"border-primary bg-primary/10 scale-[1.02] shadow-lg":"border-gray-200 hover:border-gray-300"} ${a.length===0?"bg-gray-50/50":"bg-white"}`,children:[o&&e.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-2xl flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"text-primary font-medium text-sm",children:"ðŸ“Œ Drop recipe here"})}),e.jsx(J,{children:a.length===0?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex flex-col items-center justify-center h-full min-h-[96px] ${o?"text-primary":"text-gray-400"}`,children:[e.jsx(Ne,{className:`w-6 h-6 mb-2 ${o?"animate-bounce":""}`}),e.jsx("span",{className:"text-sm text-center",children:o?"Drop here!":"Drop recipe here"})]}):e.jsx("div",{className:"space-y-2",children:a.map((h,c)=>e.jsxs(f.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{delay:c*.1},className:"group relative bg-white border border-gray-200 rounded-xl p-3 shadow-sm hover:shadow-lg hover:border-blue-200 transition-all cursor-pointer",onClick:()=>r?.(h.recipe),children:[e.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Editable"}),e.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),n?.(h)},className:"w-7 h-7 bg-blue-500 text-white rounded-full flex items-center justify-center hover:bg-blue-600 z-10 shadow-md hover:shadow-lg transition-all",title:"Edit serving size",children:e.jsx(Ke,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:d=>{d.stopPropagation(),t(h.id)},className:"w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 z-10 shadow-md hover:shadow-lg transition-all",title:"Remove from meal plan",children:e.jsx(W,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:h.recipe.image,alt:h.recipe.title,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-800 line-clamp-2 leading-tight",children:h.recipe.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),e.jsxs("span",{children:[h.recipe.readyInMinutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsxs("span",{children:[h.servings," serving",h.servings!==1?"s":""]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 text-blue-500 text-xs",children:"(click to edit)"})]}),h.notes&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:h.notes})]})]})]},h.id))})}),!1]})},Je=({recipe:s,isDragging:a=!1})=>{const{attributes:i,listeners:l,setNodeRef:t,transform:r,isDragging:n}=Ls({id:`recipe-${s.id}`,data:{type:"recipe",recipe:s}}),o=r?{transform:`translate3d(${r.x}px, ${r.y}px, 0)`,zIndex:9999,userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none"}:{userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none"};return m.useEffect(()=>{console.log("ðŸ”§ Recipe card mounted:",s.title,"ID: recipe-"+s.id),n&&console.log("ðŸ› Recipe card is being dragged:",s.title)},[n,s.title,s.id]),e.jsxs(f.div,{ref:t,style:o,...l,...i,initial:{opacity:0,scale:.9},animate:{opacity:n?.8:1,scale:n?1.05:1},whileHover:{scale:1.02},className:`group relative bg-white rounded-2xl overflow-hidden shadow-md border-2 cursor-grab active:cursor-grabbing transition-all touch-manipulation select-none ${a||n?"border-primary shadow-lg rotate-3 z-50":"border-transparent hover:border-primary/20 hover:shadow-lg"}`,children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-1",children:e.jsx(js,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"relative h-24 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover pointer-events-none",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 pointer-events-none",children:e.jsxs("div",{className:"flex items-center justify-between text-white text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-sm rounded px-2 py-1",children:[e.jsx(Z,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.readyInMinutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-sm rounded px-2 py-1",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsx("span",{children:s.servings})]})]})})]}),e.jsxs("div",{className:"p-3 pointer-events-none",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 line-clamp-2 leading-tight",children:s.title}),s.diets.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.diets.slice(0,2).map((x,b)=>e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:x},b))})]}),(a||n)&&e.jsx("div",{className:"absolute inset-0 bg-primary/10 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center text-primary font-medium",children:[e.jsx("div",{className:"text-lg",children:"ðŸ“…"}),e.jsx("div",{className:"text-xs",children:"Drop on calendar"})]})}),!1]})},pt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],be=["breakfast","lunch","dinner","snack"],ut=({recipes:s=[],onAddRecipe:a,onGenerateShoppingList:i,onViewNutrition:l,onNavigateToSearch:t,onSearchRecipes:r,onRecipeSelect:n,isSearching:o})=>{const[x,b]=m.useState(new Date),[h,c]=m.useState(null),[d,u]=m.useState(null),[k,D]=m.useState(""),[L,P]=m.useState(!1),[j,F]=m.useState(null),[M,O]=m.useState(null),[R,p]=m.useState(4),[S,E]=m.useState("add"),{mealPlans:v,addRecipeToMealPlan:y,removeMealPlanById:N,moveMealPlan:g,updateMealPlanById:C}=as(),I=s.length>0?s:[],Y=Ds(Pe(zs,{activationConstraint:{distance:8}}),Pe(Bs,{coordinateGetter:Os})),$=m.useMemo(()=>Ve(x,{weekStartsOn:1}),[x]),z=m.useMemo(()=>Array.from({length:7},(w,A)=>le($,A)),[$]),se=m.useMemo(()=>{const w=_($,"yyyy-MM-dd"),A=_(le($,6),"yyyy-MM-dd");return v.filter(T=>T.date>=w&&T.date<=A)},[v,$]),rs=(w,A)=>{const T=_(w,"yyyy-MM-dd");return se.filter(B=>B.date===T&&B.mealType===A)},is=w=>{const{active:A}=w,T=String(A.id);if(c(T),T.startsWith("recipe-")){const B=parseInt(T.replace("recipe-","")),q=I.find(G=>G.id===B);q&&u(q)}if(T.startsWith("meal-")){const B=v.find(q=>`meal-${q.id}`===T);B&&u(B.recipe)}},ns=w=>{const{active:A,over:T}=w;if(c(null),u(null),!T)return;const B=A.id.toString(),q=T.id.toString();console.log("ðŸŽ¯ Drop target ID:",q);const G=q.split("-");let H="",V="";if(G.length>=4?(H=`${G[0]}-${G[1]}-${G[2]}`,V=G[3]):G.length===2&&(H=G[0],V=G[1]),console.log("ðŸ“… Parsed drop target - Date:",H,"MealType:",V),console.log("ðŸ½ï¸ Valid meal types:",be),!H||!be.includes(V)){console.log("âŒ Invalid drop target format or meal type");return}if(d)if(B.startsWith("recipe-"))console.log("ðŸ½ï¸ Opening serving size selection for:",d.title),F({recipe:d,date:H,mealType:V}),p(d.servings||4),E("add"),P(!0);else{const Me=v.find(xs=>xs.id===B);Me&&(console.log("ðŸ”„ Moving existing meal plan:",Me.recipe.title),g(B,H,V),console.log("âœ… Meal plan moved successfully"))}else console.log("âŒ No dragged recipe found")},ke=w=>{b(A=>w==="next"?Js(A,1):_s(A))},ls=()=>{b(new Date)},os=()=>{console.log("ðŸ›’ Generate shopping list clicked"),console.log("ðŸ“Š All meal plans:",v.length),console.log("ðŸ“Š Week meal plans:",se.length),console.log("ðŸ“‹ Meal plans details:",v),i&&i(v)},cs=()=>{console.log("ðŸ“Š View nutrition clicked"),console.log("ðŸ“Š All meal plans:",v.length),console.log("ðŸ“Š Week meal plans:",se.length),l&&l(v)},Se=async w=>{if(w.preventDefault(),!(!k.trim()||!r))try{await r(k.trim()),D("")}catch(A){console.error("Search failed:",A)}},ds=()=>{S==="add"&&j?(console.log("âž• Adding recipe with serving size:",j.recipe.title,R,"servings"),y(j.recipe,j.date,j.mealType,R),a?.(j.recipe,j.date,j.mealType),console.log("âœ… Recipe added successfully with",R,"servings")):S==="edit"&&M&&(console.log("âœï¸ Updating serving size for:",M.recipe.title,"from",M.servings,"to",R),C(M.id,{servings:R}),console.log("âœ… Serving size updated successfully")),P(!1),F(null),O(null),p(4),E("add")},Ce=()=>{console.log("âŒ Serving size modal canceled"),P(!1),F(null),O(null),p(4),E("add")},Ie=w=>{p(A=>w==="increase"?Math.min(A+1,20):Math.max(A-1,1))},ms=w=>{console.log("âœï¸ Editing serving size for:",w.recipe.title,"current:",w.servings),O(w),p(w.servings),E("edit"),P(!0)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-white rounded-3xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-8 h-8 text-primary"}),e.jsx("h2",{className:"text-3xl font-bold gradient-text",children:"Meal Planning"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-2xl p-1",children:[e.jsx("button",{onClick:()=>ke("prev"),className:"p-2 rounded-xl hover:bg-white transition-colors",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold min-w-[200px] text-center",children:[_($,"MMM d")," - ",_(le($,6),"MMM d, yyyy")]}),e.jsx("button",{onClick:()=>ke("next"),className:"p-2 rounded-xl hover:bg-white transition-colors",children:e.jsx(Ns,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:ls,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors font-medium",children:"Today"}),e.jsxs("button",{onClick:os,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-colors font-medium",children:[e.jsx(ce,{className:"w-5 h-5"}),"Shopping List"]}),e.jsxs("button",{onClick:cs,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors font-medium",children:[e.jsx(qe,{className:"w-5 h-5"}),"Nutrition"]})]})]}),e.jsxs(Es,{sensors:Y,collisionDetection:$s,onDragStart:is,onDragEnd:ns,modifiers:[Ts],children:[e.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[e.jsx("div",{className:""}),pt.map((w,A)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-600 mb-1",children:w}),e.jsx("div",{className:`text-2xl font-bold ${Us(z[A],new Date)?"text-primary":"text-gray-800"}`,children:_(z[A],"d")})]},w)),be.map(w=>e.jsxs(ve.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-2xl",children:e.jsx("span",{className:"font-semibold text-gray-700 capitalize",children:w})}),z.map(A=>{const T=_(A,"yyyy-MM-dd"),B=rs(A,w);return e.jsx(gt,{id:`${T}-${w}`,mealPlans:B,date:A,mealType:w,onRemoveMeal:N,onRecipeSelect:n,onEditServingSize:ms},`${T}-${w}`)})]},w))]}),e.jsxs("div",{className:"mt-8 border-t pt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["ðŸ“‹ Drag Recipes to Calendar",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",I.length," recipes available)"]}),h&&e.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"ðŸŽ¯ Dragging..."})]}),e.jsxs("form",{onSubmit:Se,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:k,onChange:w=>D(w.target.value),placeholder:"Search for more recipes... (Press Enter)",className:"w-64 px-4 py-2 pr-10 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",disabled:o,onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),Se(w))}}),e.jsx("button",{type:"submit",disabled:o||!k.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(_e,{className:"w-4 h-4"})})]}),o&&e.jsx("div",{className:"text-sm text-gray-500",children:"Searching..."})]})]}),I.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:I.slice(0,12).map(w=>e.jsx(Je,{recipe:w},`recipe-${w.id}`))}),I.length>12&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 12 of ",I.length," recipes"]}),e.jsx("button",{onClick:()=>{console.log("Show more recipes functionality")},className:"mt-2 text-primary hover:text-primary/80 text-sm font-medium",children:"View all recipes â†’"})]})]}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Recipes Available"}),e.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"You need to search for recipes first before you can add them to your meal plan."}),e.jsx("button",{onClick:()=>{t?t():console.log("Navigate to search view")},className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors font-medium",children:"ðŸ” Search for Recipes"})]})]}),e.jsx(Fs,{dropAnimation:null,children:h&&d?e.jsx("div",{className:"transform rotate-6 scale-105 opacity-90 pointer-events-none",children:e.jsx(Je,{recipe:d,isDragging:!0})}):h?e.jsxs("div",{className:"bg-primary text-white px-4 py-2 rounded-lg font-medium pointer-events-none",children:["Dragging: ",h]}):null})]}),e.jsx(J,{children:L&&(j||M)&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:Ce,children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-md w-full p-6",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center",children:e.jsx(re,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:S==="add"?"Choose Serving Size":"Edit Serving Size"}),e.jsx("p",{className:"text-gray-600 text-sm",children:S==="add"?e.jsxs(e.Fragment,{children:["How many servings of ",e.jsx("span",{className:"font-semibold text-primary",children:j?.recipe.title})," would you like to add?"]}):e.jsxs(e.Fragment,{children:["How many servings of ",e.jsx("span",{className:"font-semibold text-primary",children:M?.recipe.title})," would you like?"]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>Ie("decrease"),disabled:R<=1,className:"w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center transition-colors",children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:R}),e.jsx("div",{className:"text-sm text-gray-500",children:R===1?"serving":"servings"})]}),e.jsx("button",{onClick:()=>Ie("increase"),disabled:R>=20,className:"w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center transition-colors",children:e.jsx(Ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3 mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Original recipe:"}),e.jsxs("span",{className:"font-medium",children:[S==="add"?j?.recipe.servings:M?.recipe.servings," servings"]})]}),S==="edit"&&M&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current meal plan:"}),e.jsxs("span",{className:"font-medium",children:[M.servings," servings"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:S==="add"?"Your selection:":"New amount:"}),e.jsxs("span",{className:"font-medium text-primary",children:[R," servings"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Meal type:"}),e.jsx("span",{className:"font-medium capitalize",children:S==="add"?j?.mealType:M?.mealType})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium",children:S==="add"?_(new Date(j?.date||""),"MMM d, yyyy"):_(new Date(M?.date||""),"MMM d, yyyy")})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Ce,className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ds,className:"flex-1 px-4 py-3 bg-gradient-to-r from-primary to-purple-600 hover:shadow-lg text-white rounded-xl font-medium transition-all",children:S==="add"?"Add to Meal Plan":"Update Serving Size"})]})]})})})]})},yt=()=>{const[s,a]=m.useState([]),[i,l]=m.useState(!0),t=m.useCallback(()=>{l(!0);try{const h=Q();a(h)}catch(h){console.error("Error loading shopping lists:",h)}finally{l(!1)}},[]);m.useEffect(()=>{t()},[t]);const r=m.useCallback((h,c)=>{const d=et(h,c);return d?(t(),d):null},[t]),n=m.useCallback((h,c)=>{st(h,c),t()},[t]),o=m.useCallback((h,c)=>{tt(h,c),t()},[t]),x=m.useCallback(h=>{try{const d=Q().filter(u=>u.id!==h);localStorage.setItem("recipe-finder-shopping-lists",JSON.stringify(d)),t()}catch(c){console.error("Error deleting shopping list:",c)}},[t]),b=m.useCallback(h=>Q().find(d=>d.id===h),[]);return{shoppingLists:s,isLoading:i,generateShoppingListFromMealPlans:r,updateShoppingListById:n,toggleItemById:o,deleteShoppingList:x,getShoppingListById:b,refreshShoppingLists:t}},ft=({isOpen:s,onClose:a,mealPlans:i,initialName:l="Weekly Meal Plan"})=>{const[t,r]=m.useState(l),[n,o]=m.useState(null),[x,b]=m.useState("aisle"),[h,c]=m.useState("all"),[d,u]=m.useState(!1),[k,D]=m.useState(null),{generateShoppingListFromMealPlans:L,toggleItemById:P,getShoppingListById:j}=yt(),{optimizeShoppingList:F,isLoading:M}=ne(),O=()=>{const y=L(t,i);if(y){const N=j(y);N&&o(N)}},R=m.useMemo(()=>{if(!n)return{};let y=n.items;h==="checked"?y=y.filter(g=>g.checked):h==="unchecked"&&(y=y.filter(g=>!g.checked));const N={};return y.forEach(g=>{let C="";switch(x){case"aisle":C=g.aisle||"Other";break;case"recipe":C=g.recipes[0]||"Other";break;case"alphabetical":C=g.ingredient.charAt(0).toUpperCase();break}N[C]||(N[C]=[]),N[C].push(g)}),Object.keys(N).forEach(g=>{N[g].sort((C,I)=>C.ingredient.localeCompare(I.ingredient))}),N},[n,x,h]),p=y=>{n&&(P(n.id,y),o(N=>{if(!N)return N;const g=N.items.map(I=>I.id===y?{...I,checked:!I.checked}:I),C=g.filter(I=>I.checked).length;return{...N,items:g,checkedItems:C}}))},S=()=>{if(!n)return;const y=Object.entries(R).map(([I,Y])=>{const $=Y.map(z=>`${z.checked?"âœ“":"â—‹"} ${z.amount} ${z.unit} ${z.ingredient}`).join(`
`);return`${I.toUpperCase()}
${$}`}).join(`

`),N=new Blob([y],{type:"text/plain"}),g=URL.createObjectURL(N),C=document.createElement("a");C.href=g,C.download=`${n.name}.txt`,C.click(),URL.revokeObjectURL(g)},E=async()=>{if(!n)return;const y=Object.entries(R).map(([N,g])=>{const C=g.map(I=>`â€¢ ${I.amount} ${I.unit} ${I.ingredient}`).join(`
`);return`${N}
${C}`}).join(`

`);if(navigator.share)try{await navigator.share({title:n.name,text:y})}catch(N){console.error("Error sharing:",N)}else navigator.clipboard.writeText(y)},v=async()=>{if(!n)return;const y=n.items.map(g=>`${g.amount} ${g.unit} ${g.ingredient}`),N=await F(y,{budget:"medium",storeType:"grocery store"});D(N),u(!0)};return s?e.jsxs(J,{children:[e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-8 h-8 text-primary"}),e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Shopping List"})]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(W,{className:"w-6 h-6"})})]}),n?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:n.name}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[n.checkedItems," of ",n.totalItems," items completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:v,disabled:M,className:"p-2 rounded-xl bg-purple-100 text-purple-600 hover:bg-purple-200 transition-colors disabled:opacity-50",title:"AI Optimize List",children:M?e.jsx(X,{className:"w-5 h-5 animate-spin"}):e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:S,className:"p-2 rounded-xl bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:"Export List",children:e.jsx(He,{className:"w-5 h-5"})}),e.jsx("button",{onClick:E,className:"p-2 rounded-xl bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:"Share List",children:e.jsx(ws,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:t,onChange:y=>r(y.target.value),placeholder:"Enter list name...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none"}),e.jsx("button",{onClick:O,className:"w-full py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium disabled:opacity-50",children:"Generate Shopping List"})]})]}),n&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("select",{value:x,onChange:y=>b(y.target.value),className:"px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"aisle",children:"Aisle"}),e.jsx("option",{value:"recipe",children:"Recipe"}),e.jsx("option",{value:"alphabetical",children:"A-Z"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:h,onChange:y=>c(y.target.value),className:"px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"unchecked",children:"To Buy"}),e.jsx("option",{value:"checked",children:"Completed"})]})]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:n?e.jsx("div",{className:"space-y-6",children:Object.entries(R).map(([y,N])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-200",children:y}),e.jsx("div",{className:"space-y-2",children:N.map(g=>e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${g.checked?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-gray-300"}`,children:[e.jsx("button",{onClick:()=>p(g.id),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 transition-all ${g.checked?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-primary"}`,children:g.checked?e.jsx(ks,{className:"w-4 h-4"}):null}),e.jsxs("div",{className:`flex-1 ${g.checked?"line-through text-gray-500":""}`,children:[e.jsxs("div",{className:"font-medium",children:[g.amount," ",g.unit," ",g.ingredient]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Used in: ",g.recipes.join(", ")]})]})]},g.id))})]},y))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Generate your shopping list to get started"}),e.jsx("p",{className:"text-gray-400",children:"We'll organize ingredients from your meal plans"})]})})]})}),e.jsx(J,{children:d&&k&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-60 flex items-center justify-center p-4",onClick:()=>u(!1),children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-lg w-full max-h-[80vh] overflow-hidden",onClick:y=>y.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI Optimized Shopping List"})]}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(W,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"Optimized Shopping Route:"}),e.jsx("div",{className:"space-y-3",children:k.optimizedList.split(`

`).filter(y=>y.trim()).map((y,N)=>{const g=y.split(`
`).filter(z=>z.trim()),C=g[0],I=g.slice(1),Y={PRODUCE:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"ðŸ¥¬"},DAIRY:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"ðŸ¥›"},MEAT:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"ðŸ¥©"},PANTRY:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"ðŸ¥«"},FROZEN:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-800",icon:"ðŸ§Š"},BAKERY:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",icon:"ðŸž"},DEFAULT:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon:"ðŸ›’"}},$=Y[C.toUpperCase()]||Y.DEFAULT;return e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.1},className:`${$.bg} ${$.border} border rounded-xl p-4`,children:[e.jsxs("h5",{className:`font-semibold ${$.text} mb-3 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:$.icon}),C]}),e.jsx("div",{className:"space-y-2",children:I.map((z,se)=>e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-current rounded-full opacity-60"}),e.jsx("span",{className:"text-sm",children:z.replace(/^[-â€¢]\s*/,"")})]},se))})]},N)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"ðŸ’¡ AI Shopping Tips:"}),e.jsx("div",{className:"space-y-2",children:k.tips.map((y,N)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-purple-50 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-sm",children:y})]},N))})]})]})]})})})]}):null},bt=s=>{if(s.length===0)return{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,dailyAverages:{calories:0,protein:0,carbs:0,fat:0},weeklyCalories:[],macroData:[{name:"Protein",value:33,color:"#8B5CF6"},{name:"Carbs",value:34,color:"#06B6D4"},{name:"Fat",value:33,color:"#F59E0B"}]};let a=0,i=0,l=0,t=0;s.forEach(c=>{const d=c.recipe,u=c.servings,k=d.nutrition?.nutrients?.find(j=>j.name==="Calories")?.amount||d.readyInMinutes*20,D=d.nutrition?.nutrients?.find(j=>j.name==="Protein")?.amount||k*.15/4,L=d.nutrition?.nutrients?.find(j=>j.name==="Carbohydrates")?.amount||k*.5/4,P=d.nutrition?.nutrients?.find(j=>j.name==="Fat")?.amount||k*.35/9;a+=k*u,i+=D*u,l+=L*u,t+=P*u});const r=new Set(s.map(c=>c.date)).size,n={calories:r>0?Math.round(a/r):0,protein:r>0?Math.round(i/r):0,carbs:r>0?Math.round(l/r):0,fat:r>0?Math.round(t/r):0},o=i*4+l*4+t*9,x=o>0?[{name:"Protein",value:Math.round(i*4/o*100),color:"#8B5CF6"},{name:"Carbs",value:Math.round(l*4/o*100),color:"#06B6D4"},{name:"Fat",value:Math.round(t*9/o*100),color:"#F59E0B"}]:[{name:"Protein",value:33,color:"#8B5CF6"},{name:"Carbs",value:34,color:"#06B6D4"},{name:"Fat",value:33,color:"#F59E0B"}],b=Ve(new Date,{weekStartsOn:1}),h=Array.from({length:7},(c,d)=>{const u=le(b,d),k=_(u,"yyyy-MM-dd"),L=s.filter(P=>P.date===k).reduce((P,j)=>{const F=j.recipe.nutrition?.nutrients?.find(M=>M.name==="Calories")?.amount||j.recipe.readyInMinutes*20;return P+F*j.servings},0);return{day:_(u,"EEE"),calories:Math.round(L),target:2e3}});return{totalCalories:a,totalProtein:i,totalCarbs:l,totalFat:t,dailyAverages:n,weeklyCalories:h,macroData:x}},jt=({isOpen:s,onClose:a,mealPlans:i})=>{const l=m.useMemo(()=>bt(i),[i]),t=[{name:"Vitamin C",current:85,target:100,unit:"mg"},{name:"Iron",current:12,target:15,unit:"mg"},{name:"Calcium",current:950,target:1e3,unit:"mg"},{name:"Fiber",current:28,target:35,unit:"g"}];return s?e.jsx(J,{children:e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-6xl w-full max-h-[90vh] overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Nutrition Dashboard"}),e.jsx("p",{className:"text-white/80",children:"Track your nutritional goals and progress"})]})]}),e.jsx("button",{onClick:a,className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(W,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-8rem)]",children:i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Meal Plans Yet"}),e.jsx("p",{className:"text-gray-600",children:"Create some meal plans to see your nutrition analytics"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(K,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Daily Average"})]}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.dailyAverages.calories.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"calories"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ss,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Goal Progress"})]}),e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[l.dailyAverages.calories>0?Math.round(l.dailyAverages.calories/2e3*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"of 2000 cal target"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Cs,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Protein Goal"})]}),e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[l.dailyAverages.protein,"g"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"daily average"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-6 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ue,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Total Meals"})]}),e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:i.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"planned"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Macronutrient Breakdown"}),e.jsx("div",{className:"h-64",children:e.jsx(ye,{width:"100%",height:"100%",children:e.jsxs(Gs,{children:[e.jsx(Ws,{data:l.macroData,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:r,value:n})=>`${r}: ${n}%`,children:l.macroData.map((r,n)=>e.jsx(Ys,{fill:r.color},`cell-${n}`))}),e.jsx(fe,{})]})})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Weekly Calorie Intake"}),e.jsx("div",{className:"h-64",children:e.jsx(ye,{width:"100%",height:"100%",children:e.jsxs(Ks,{data:l.weeklyCalories,children:[e.jsx(Re,{strokeDasharray:"3 3"}),e.jsx(Le,{dataKey:"day"}),e.jsx(De,{}),e.jsx(fe,{}),e.jsx(Ee,{dataKey:"calories",fill:"#8B5CF6"}),e.jsx(Ee,{dataKey:"target",fill:"#E5E7EB"})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"Nutrient Goals Progress"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((r,n)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-800",children:r.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.current,r.unit," / ",r.target,r.unit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(f.div,{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full",initial:{width:0},animate:{width:`${r.current/r.target*100}%`},transition:{duration:1,delay:n*.1}})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Math.round(r.current/r.target*100),"% of daily goal"]})]},n))})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Calorie Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(ye,{width:"100%",height:"100%",children:e.jsxs(qs,{data:l.weeklyCalories,children:[e.jsx(Re,{strokeDasharray:"3 3"}),e.jsx(Le,{dataKey:"day"}),e.jsx(De,{}),e.jsx(fe,{}),e.jsx(Te,{type:"monotone",dataKey:"calories",stroke:"#8B5CF6",strokeWidth:3,dot:{fill:"#8B5CF6",strokeWidth:2,r:4}}),e.jsx(Te,{type:"monotone",dataKey:"target",stroke:"#E5E7EB",strokeDasharray:"5 5",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"ðŸ’¡ Nutrition Tips"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Try to include a variety of colorful vegetables in your meals for diverse nutrients."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Aim for 25-30g of fiber daily to support digestive health."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Include lean protein sources in each meal to maintain muscle mass."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Stay hydrated with 8-10 glasses of water daily."})]})]})]})]})})]})})}):null},vt=({onRecipeSelect:s})=>{const{aiRecommendations:a,isLoading:i,getRecommendations:l,preferences:t}=ne(),[r,n]=m.useState(!1),[o,x]=m.useState(!1),b=async()=>{await l(3),x(!0)},h=c=>{switch(c){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Recipe Recommendations"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Personalized just for you"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(!0),className:"p-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors",title:"Customize Preferences",children:e.jsx(Is,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:b,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors disabled:opacity-50",children:[i?e.jsx(X,{className:"w-4 h-4 animate-spin"}):e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:o?"Refresh":"Get Recommendations"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[!o&&!i&&e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-purple-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Ready for AI Magic?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get personalized recipe recommendations based on your preferences and dietary needs."}),e.jsxs("button",{onClick:b,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(U,{className:"w-5 h-5 inline mr-2"}),"Generate AI Recommendations"]})]}),i&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 text-purple-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"AI is analyzing your preferences..."})]}),o&&!i&&a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No recommendations available. Try adjusting your preferences."})]}),e.jsx(J,{children:a.length>0&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((c,d)=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"border border-gray-200 rounded-2xl p-4 hover:shadow-md transition-all cursor-pointer hover:border-purple-300",onClick:()=>s?.(c),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 flex-1 pr-2",children:c.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h(c.difficulty)}`,children:c.difficulty})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:c.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsxs("span",{children:[c.cookingTime,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{children:c.cuisine})]})]}),c.dietaryTags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:c.dietaryTags.slice(0,3).map((u,k)=>e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:u},k))}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ingredients needed:"}),e.jsxs("p",{className:"text-sm text-gray-700 line-clamp-2",children:[c.ingredients.slice(0,4).join(", "),c.ingredients.length>4&&"..."]})]})]},d))})}),o&&e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 p-4 bg-gray-50 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Your Current Preferences:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[t.dietaryRestrictions.length>0&&e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["ðŸ¥— ",t.dietaryRestrictions.join(", ")]}),t.preferredCuisines.length>0&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["ðŸŒ ",t.preferredCuisines.slice(0,2).join(", ")]}),e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["â±ï¸ ",t.timeAvailable,"min max"]}),e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:["ðŸ‘¨â€ðŸ³ ",t.cookingSkillLevel]})]})]})]}),e.jsx(Nt,{isOpen:r,onClose:()=>n(!1)})]})},Nt=({isOpen:s,onClose:a})=>{const{preferences:i,updatePreferences:l}=ne();return s?e.jsx(J,{children:e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-md w-full max-h-[80vh] overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold gradient-text",children:"AI Preferences"}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(W,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cooking Skill Level"}),e.jsxs("select",{value:i.cookingSkillLevel,onChange:t=>l({cookingSkillLevel:t.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Cooking Time (minutes)"}),e.jsx("input",{type:"number",min:"10",max:"180",value:i.timeAvailable,onChange:t=>l({timeAvailable:parseInt(t.target.value)}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Restrictions (comma-separated)"}),e.jsx("input",{type:"text",value:i.dietaryRestrictions.join(", "),onChange:t=>l({dietaryRestrictions:t.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"e.g., vegetarian, gluten-free, keto",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Cuisines (comma-separated)"}),e.jsx("input",{type:"text",value:i.preferredCuisines.join(", "),onChange:t=>l({preferredCuisines:t.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"e.g., Italian, Mexican, Asian",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favorite Ingredients (comma-separated)"}),e.jsx("input",{type:"text",value:i.favoriteIngredients.join(", "),onChange:t=>l({favoriteIngredients:t.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"e.g., chicken, tomatoes, garlic",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-100",children:e.jsx("button",{onClick:a,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Save Preferences"})})]})})}):null},wt=()=>{const{getMealPlan:s,preferences:a,isLoading:i}=ne(),[l,t]=m.useState(null),[r,n]=m.useState(7),o=async()=>{const b=await s(r);t(b)},x=()=>{if(!l)return;const b=`${r}-Day AI Meal Plan

${l.mealPlan}

Why This Plan Works:
${l.explanation}`,h=new Blob([b],{type:"text/plain"}),c=URL.createObjectURL(h),d=document.createElement("a");d.href=c,d.download=`ai-meal-plan-${r}-days.txt`,d.click(),URL.revokeObjectURL(c)};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(K,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Meal Planner"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Smart nutrition planning made easy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:r,onChange:b=>n(parseInt(b.target.value)),className:"px-3 py-2 bg-white/20 text-white rounded-xl border border-white/30 focus:outline-none",children:[e.jsx("option",{value:3,className:"text-gray-800",children:"3 Days"}),e.jsx("option",{value:7,className:"text-gray-800",children:"7 Days"}),e.jsx("option",{value:14,className:"text-gray-800",children:"14 Days"})]}),e.jsxs("button",{onClick:o,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors disabled:opacity-50",children:[i?e.jsx(X,{className:"w-4 h-4 animate-spin"}):e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate Plan"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[!l&&!i&&e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(K,{className:"w-16 h-16 text-green-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Ready to Plan Your Meals?"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Let AI create a personalized ",r,"-day meal plan based on your preferences and nutritional needs."]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Planning with your preferences:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm justify-center",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["ðŸ‘¨â€ðŸ³ ",a.cookingSkillLevel]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["â±ï¸ ",a.timeAvailable,"min max"]}),a.dietaryRestrictions.length>0&&e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["ðŸ¥— ",a.dietaryRestrictions[0],a.dietaryRestrictions.length>1&&" +more"]})]})]}),e.jsxs("button",{onClick:o,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(U,{className:"w-5 h-5 inline mr-2"}),"Generate ",r,"-Day AI Meal Plan"]})]}),i&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 text-green-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"AI is crafting your personalized meal plan..."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This may take a moment"})]}),e.jsx(J,{children:l&&!i&&e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-green-500"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["Your ",r,"-Day Meal Plan is Ready!"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[e.jsx(He,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[e.jsx(de,{className:"w-4 h-4"}),"Regenerate"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-green-500"}),"Your Meal Plan"]}),e.jsx("div",{className:"space-y-4",children:(()=>{console.log("ðŸ” Meal plan content to parse:",l.mealPlan);let b=l.mealPlan;b=b.replace(/^[{}\s]*"?mealplan"?\s*:?\s*"?/i,""),b=b.replace(/["{}]*$/,""),b=b.replace(/\\n/g,`
`),b=b.replace(/\\"/g,'"'),console.log("ðŸ§¹ Cleaned meal plan:",b);const h=b.split(/\n\s*\n|\n(?=Day\s+\d+)/i).filter(c=>c.trim());return h.length===0||h.every(c=>c.length<10)?e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Your Meal Plan"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:b||"AI is generating your meal plan..."})]}):h.map((c,d)=>{const u=c.split(`
`).filter(j=>j.trim());let k=`Day ${d+1}`,D=u;const L=u.find(j=>/day\s+\d+/i.test(j));L&&(k=L.trim(),D=u.filter(j=>j!==L));const P=D.filter(j=>j.includes(":")&&(j.toLowerCase().includes("breakfast")||j.toLowerCase().includes("lunch")||j.toLowerCase().includes("dinner")||j.toLowerCase().includes("snack")));return P.length===0?e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:d+1}),k]}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 text-sm",children:D.join(`
`)})})]},d):e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:d+1}),k]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map((j,F)=>{const[M,O]=j.split(":").map(p=>p.trim()),R={Breakfast:"ðŸŒ…",Lunch:"â˜€ï¸",Dinner:"ðŸŒ™",Snack:"ðŸŽ"};return e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:R[M]||"ðŸ½ï¸"}),e.jsx("span",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:M})]}),e.jsx("p",{className:"text-gray-800 font-medium",children:O||j})]},F)})})]},d)})})()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5 text-blue-500"}),"Why This Plan Works"]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 space-y-4",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:l.explanation}),e.jsxs("div",{className:"border-t border-blue-200 pt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Quick Tips:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Prep ingredients on Sunday for the week"}),e.jsx("li",{children:"â€¢ Cook grains and proteins in batches"}),e.jsx("li",{children:"â€¢ Keep healthy snacks readily available"}),e.jsx("li",{children:"â€¢ Stay hydrated throughout the day"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center",children:[e.jsx(Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Time Efficient"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Meals designed for ",a.timeAvailable,"min cooking time"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-center",children:[e.jsx(Ae,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Nutritionally Balanced"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Optimized for your dietary preferences"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 text-center",children:[e.jsx(U,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"AI Personalized"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tailored to your cooking skill level"})]})]})]})})]})]})},kt=()=>{const[s,a]=m.useState({query:""}),[i,l]=m.useState(null),[t,r]=m.useState(!1),[n,o]=m.useState("search"),[x,b]=m.useState([]),[h,c]=m.useState(!1),[d,u]=m.useState(!1),[k,D]=m.useState(!1),{mealPlans:L}=as(),P=v=>{a(v)},j=v=>{l(v)},F=()=>{l(null)},M=(v,y,N)=>{console.log("Added recipe to meal plan:",{recipe:v.title,date:y,mealType:N})},O=v=>{c(!0)},R=v=>{u(!0)},p=v=>{b(v)},S=async v=>{try{D(!0);const g=(await ts({query:v})).results,C=[...x];g.forEach(I=>{C.find(Y=>Y.id===I.id)||C.push(I)}),b(C),console.log(`ðŸ” Added ${g.length} new recipes from search: "${v}"`)}catch(y){console.error("Error searching for recipes:",y)}finally{D(!1)}},E=v=>{const y={id:Date.now(),title:v.title,image:"https://via.placeholder.com/312x231/8B5CF6/FFFFFF?text=AI+Recipe",imageType:"jpg",readyInMinutes:v.cookingTime,servings:4,spoonacularScore:85,healthScore:75,pricePerServing:250,cuisines:[v.cuisine],dishTypes:[],diets:v.dietaryTags,occasions:[],analyzedInstructions:[{name:"",steps:v.instructions.map((N,g)=>({number:g+1,step:N,ingredients:[],equipment:[]}))}],extendedIngredients:v.ingredients.map((N,g)=>({id:g+1,aisle:"",image:"",consistency:"",name:N,nameClean:N,original:N,originalName:N,amount:1,unit:"",meta:[],measures:{us:{amount:1,unitShort:"",unitLong:""},metric:{amount:1,unitShort:"",unitLong:""}}})),summary:v.description,instructions:v.instructions.map((N,g)=>`${g+1}. ${N}`).join(`
`)};l(y)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[e.jsx(xt,{}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(ht,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold gradient-text mb-4",children:"AI Recipe Finder & Meal Planner"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Discover delicious recipes, plan your meals, and track your nutrition all in one place"})]}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-white/80 backdrop-blur-md rounded-2xl border border-white/20 shadow-lg flex-wrap",children:[e.jsx("button",{onClick:()=>o("search"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${n==="search"?"bg-primary text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:"ðŸ” Search Recipes"}),e.jsxs("button",{onClick:()=>o("ai-recommendations"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${n==="ai-recommendations"?"bg-purple-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(U,{className:"w-4 h-4"}),"AI Recommendations"]}),e.jsxs("button",{onClick:()=>o("ai-meal-planner"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${n==="ai-meal-planner"?"bg-green-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"AI Meal Planner"]}),e.jsxs("button",{onClick:()=>o("planning"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${n==="planning"?"bg-primary text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"Meal Planning"]})]})}),e.jsxs(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:[n==="search"&&e.jsxs(e.Fragment,{children:[e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-4xl mx-auto mb-8",children:[e.jsx(Hs,{onSearch:P,onToggleFilters:()=>r(!t),showFilters:t}),e.jsx(Vs,{isOpen:t,filters:s,onFiltersChange:a})]}),e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},children:e.jsx(nt,{filters:s,onRecipeSelect:j,onRecipeResults:p})})]}),n==="planning"&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(ut,{recipes:x,onAddRecipe:M,onGenerateShoppingList:O,onViewNutrition:R,onNavigateToSearch:()=>o("search"),onSearchRecipes:S,onRecipeSelect:j,isSearching:k})}),n==="ai-recommendations"&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(vt,{onRecipeSelect:E})}),n==="ai-meal-planner"&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(wt,{})})]},n),n==="search"&&x.length>0&&e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"fixed bottom-8 right-8 flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>o("planning"),className:"flex items-center gap-2 px-4 py-3 bg-primary text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"Go to Meal Planning",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Plan Meals"})]}),L.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>O(),className:"flex items-center gap-2 px-4 py-3 bg-green-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"Generate Shopping List",children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Shopping"})]}),e.jsxs("button",{onClick:()=>R(),className:"flex items-center gap-2 px-4 py-3 bg-blue-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"View Nutrition Dashboard",children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Nutrition"})]})]})]})]}),i&&e.jsx(mt,{recipe:i,onClose:F}),e.jsx(ft,{isOpen:h,onClose:()=>c(!1),mealPlans:L}),e.jsx(jt,{isOpen:d,onClose:()=>u(!1),mealPlans:L})]})]})};class St extends m.Component{state={hasError:!1};static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,i){console.error("Uncaught error:",a,i)}handleReset=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ps,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(de,{className:"w-5 h-5"}),"Try Again"]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-medium",children:"Reload Page"})]})]})}):this.props.children}}const Ct=new ps({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1}}});je.createRoot(document.getElementById("root")).render(e.jsx(ve.StrictMode,{children:e.jsx(St,{children:e.jsx(us,{client:Ct,children:e.jsx(kt,{})})})}));
