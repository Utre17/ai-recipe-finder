import{j as e,u as hs,O as gs,Q as ps,a as us}from"./api-C8vC9EAg.js";import{a as ys,r as x,R as we}from"./react-DnQQq7lD.js";import{S as We,X as H,F as fs,A as _,m as y,H as ce,C as ae,U as ie,D as Je,a as Ke,b as bs,c as xe,d as U,M as qe,P as ke,e as He,L as se,G as js,f as Q,g as vs,h as Ns,i as de,B as Ve,j as Qe,k as ws,l as ks,T as fe,n as Ss,o as Cs,p as Ms,R as me,q as Is,r as Pe,I as As,s as Rs}from"./ui-BrE_19v1.js";import{u as Ps,a as Ds,b as Ls,c as De,D as Es,r as Ts,d as Fs,e as $s,s as Os,K as Bs,P as zs}from"./dnd-DVjvMNbv.js";import{s as Xe,a as oe,f as Y,i as Gs,b as Us,d as _s}from"./utils-DbeeY_R7.js";import{R as be,P as Ys,a as Ws,C as Js,T as je,B as Ks,b as Le,X as Ee,Y as Te,c as Fe,L as qs,d as $e}from"./charts-CyjR7tow.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();var Ne={},Oe=ys;Ne.createRoot=Oe.createRoot,Ne.hydrateRoot=Oe.hydrateRoot;const Hs=({onSearch:s,onToggleFilters:a,showFilters:r})=>{const[n,t]=x.useState(""),i=o=>{o.preventDefault(),s({query:n})},l=()=>{t(""),s({query:""})};return e.jsx("div",{className:"w-full",children:e.jsx("form",{onSubmit:i,className:"relative",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"absolute left-4 z-10",children:e.jsx(We,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",value:n,onChange:o=>t(o.target.value),placeholder:"Search for recipes by ingredients or name...",className:"w-full pl-12 pr-24 py-4 rounded-2xl bg-white/80 backdrop-blur-md border border-white/20 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none text-lg transition-all shadow-lg"}),e.jsxs("div",{className:"absolute right-2 flex items-center gap-2",children:[n&&e.jsx("button",{type:"button",onClick:l,className:"p-2 rounded-xl hover:bg-gray-100 transition-colors",children:e.jsx(H,{className:"w-5 h-5 text-gray-400"})}),e.jsx("button",{type:"button",onClick:a,className:`p-2 rounded-xl transition-colors ${r?"bg-primary text-white":"hover:bg-gray-100 text-gray-400"}`,children:e.jsx(fs,{className:"w-5 h-5"})}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Search"})]})]})})})},Vs=({isOpen:s,filters:a,onFiltersChange:r})=>{const n=(t,i)=>{r({...a,[t]:i===""?void 0:i})};return e.jsx(_,{children:s&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl border border-white/20 p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 gradient-text",children:"Advanced Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diet"}),e.jsxs("select",{value:a.diet||"",onChange:t=>n("diet",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Diet"}),e.jsx("option",{value:"vegetarian",children:"Vegetarian"}),e.jsx("option",{value:"vegan",children:"Vegan"}),e.jsx("option",{value:"gluten free",children:"Gluten Free"}),e.jsx("option",{value:"ketogenic",children:"Keto"}),e.jsx("option",{value:"paleo",children:"Paleo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cuisine"}),e.jsxs("select",{value:a.cuisine||"",onChange:t=>n("cuisine",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Cuisine"}),e.jsx("option",{value:"american",children:"American"}),e.jsx("option",{value:"italian",children:"Italian"}),e.jsx("option",{value:"mexican",children:"Mexican"}),e.jsx("option",{value:"chinese",children:"Chinese"}),e.jsx("option",{value:"indian",children:"Indian"}),e.jsx("option",{value:"mediterranean",children:"Mediterranean"}),e.jsx("option",{value:"thai",children:"Thai"}),e.jsx("option",{value:"french",children:"French"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meal Type"}),e.jsxs("select",{value:a.type||"",onChange:t=>n("type",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Type"}),e.jsx("option",{value:"breakfast",children:"Breakfast"}),e.jsx("option",{value:"lunch",children:"Lunch"}),e.jsx("option",{value:"dinner",children:"Dinner"}),e.jsx("option",{value:"dessert",children:"Dessert"}),e.jsx("option",{value:"snack",children:"Snack"}),e.jsx("option",{value:"appetizer",children:"Appetizer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Cooking Time (min)"}),e.jsx("input",{type:"number",value:a.maxReadyTime||"",onChange:t=>n("maxReadyTime",t.target.value?parseInt(t.target.value):void 0),placeholder:"e.g. 30",className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intolerances"}),e.jsxs("select",{value:a.intolerances||"",onChange:t=>n("intolerances",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"No Restrictions"}),e.jsx("option",{value:"dairy",children:"Dairy Free"}),e.jsx("option",{value:"egg",children:"Egg Free"}),e.jsx("option",{value:"gluten",children:"Gluten Free"}),e.jsx("option",{value:"peanut",children:"Peanut Free"}),e.jsx("option",{value:"sesame",children:"Sesame Free"}),e.jsx("option",{value:"seafood",children:"Seafood Free"}),e.jsx("option",{value:"shellfish",children:"Shellfish Free"}),e.jsx("option",{value:"soy",children:"Soy Free"}),e.jsx("option",{value:"tree nut",children:"Tree Nut Free"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:a.sort||"",onChange:t=>n("sort",t.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Relevance"}),e.jsx("option",{value:"popularity",children:"Popularity"}),e.jsx("option",{value:"healthiness",children:"Healthiness"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"time",children:"Cooking Time"}),e.jsx("option",{value:"random",children:"Random"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>r({query:a.query}),className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Clear Filters"})})]})})})},Se="recipe-finder-favorites",he="recipe-finder-meal-plans",ge="recipe-finder-shopping-lists",re=()=>{try{const s=localStorage.getItem(Se);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading favorites:",s),[]}},Ze=s=>{try{const a=re();if(!a.some(n=>n.id===s.id)){const n=[...a,s];localStorage.setItem(Se,JSON.stringify(n))}}catch(a){console.error("Error adding to favorites:",a)}},es=s=>{try{const r=re().filter(n=>n.id!==s);localStorage.setItem(Se,JSON.stringify(r))}catch(a){console.error("Error removing from favorites:",a)}},ss=s=>{try{return re().some(r=>r.id===s)}catch(a){return console.error("Error checking favorite status:",a),!1}},ne=()=>{try{const s=localStorage.getItem(he);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading meal plans:",s),[]}},Qs=s=>{try{const a=ne(),r={...s,id:Date.now().toString()+Math.random().toString(36).substr(2,9)},n=[...a,r];return localStorage.setItem(he,JSON.stringify(n)),r.id}catch(a){return console.error("Error adding meal plan:",a),""}},Be=(s,a)=>{try{const n=ne().map(t=>t.id===s?{...t,...a}:t);localStorage.setItem(he,JSON.stringify(n))}catch(r){console.error("Error updating meal plan:",r)}},Xs=s=>{try{const r=ne().filter(n=>n.id!==s);localStorage.setItem(he,JSON.stringify(r))}catch(a){console.error("Error removing meal plan:",a)}},Zs=(s,a)=>{try{return ne().filter(n=>n.date>=s&&n.date<=a)}catch(r){return console.error("Error filtering meal plans:",r),[]}},ee=()=>{try{const s=localStorage.getItem(ge);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading shopping lists:",s),[]}},et=(s,a)=>{try{const r=new Map;a.forEach(o=>{o.recipe.extendedIngredients.forEach(g=>{const f=g.nameClean||g.name,d=r.get(f);d?(d.amount+=g.amount*o.servings,d.recipes.includes(o.recipe.title)||d.recipes.push(o.recipe.title)):r.set(f,{amount:g.amount*o.servings,unit:g.unit,recipes:[o.recipe.title],aisle:g.aisle})})});const n=Array.from(r.entries()).map(([o,g])=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),ingredient:o,amount:Math.round(g.amount*100)/100,unit:g.unit,checked:!1,recipes:g.recipes,aisle:g.aisle})),t={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:s,dateCreated:new Date().toISOString(),items:n,totalItems:n.length,checkedItems:0},l=[...ee(),t];return localStorage.setItem(ge,JSON.stringify(l)),t.id}catch(r){return console.error("Error creating shopping list:",r),""}},st=(s,a)=>{try{const n=ee().map(t=>t.id===s?{...t,...a}:t);localStorage.setItem(ge,JSON.stringify(n))}catch(r){console.error("Error updating shopping list:",r)}},tt=(s,a)=>{try{const n=ee().map(t=>{if(t.id===s){const i=t.items.map(o=>o.id===a?{...o,checked:!o.checked}:o),l=i.filter(o=>o.checked).length;return{...t,items:i,checkedItems:l}}return t});localStorage.setItem(ge,JSON.stringify(n))}catch(r){console.error("Error toggling shopping list item:",r)}},ts=({recipe:s,onSelect:a})=>{const[r,n]=x.useState(ss(s.id)),t=l=>{l.stopPropagation(),r?es(s.id):Ze(s),n(!r)},i=l=>`$${(l/100).toFixed(2)}`;return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-8},transition:{duration:.3},className:"bg-white rounded-3xl overflow-hidden shadow-lg hover:shadow-xl transition-all cursor-pointer card-hover",onClick:()=>a(s),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-48 object-cover"}),e.jsx("button",{onClick:t,className:`absolute top-4 right-4 p-2 rounded-full backdrop-blur-md transition-all ${r?"bg-red-500 text-white shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,children:e.jsx(ce,{className:`w-5 h-5 ${r?"fill-current":""}`})}),s.diets.length>0&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:s.diets[0]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.readyInMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.servings," servings"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:i(s.pricePerServing)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:(s.spoonacularScore/20).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Health Score: ",s.healthScore]})]})]}),s.cuisines.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:s.cuisines.slice(0,2).map((l,o)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:l},o))}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3",dangerouslySetInnerHTML:{__html:s.summary.replace(/<[^>]*>/g,"")}})]})]})},at=({type:s="card",count:a=12})=>{const r=()=>e.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-lg",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-lg animate-pulse w-3/4"}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-16"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-20"})]}),e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-lg animate-pulse mt-4"})]})]}),n=()=>e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsx("div",{className:"space-y-4",children:Array.from({length:6}).map((o,g)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-2/3"})]}),e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-full animate-pulse"})]},g))})}),t=()=>e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"h-8 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse w-64"})}),e.jsx("div",{className:"grid grid-cols-8 gap-4",children:Array.from({length:32}).map((o,g)=>e.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-2xl animate-pulse"},g))})]}),i=()=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-48"})}),e.jsx("div",{className:"h-64 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"})]}),l=()=>{switch(s){case"card":return e.jsx(y.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:Array.from({length:a}).map((o,g)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:g*.05},children:r()},g))});case"list":return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:n()});case"calendar":return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:t()});case"chart":return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:4}).map((o,g)=>e.jsx(y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:g*.1},children:i()},g))});default:return null}};return e.jsx(e.Fragment,{children:l()})},te="37432ff1ba2b4014bbff9473ac02e389",as="https://api.spoonacular.com/recipes";console.log("🔑 API Configuration:",{hasSpoonacularKey:!0,keyLength:te?.length||0,keyPreview:`${te.substring(0,8)}...`});const rt="https://www.themealdb.com/api/json/v1/1",rs=async s=>{try{console.log("🚀 Using Spoonacular API with key");const a=new URLSearchParams({apiKey:te,query:s.query,number:"12",addRecipeInformation:"true",fillIngredients:"true"});s.diet&&a.append("diet",s.diet),s.intolerances&&a.append("intolerances",s.intolerances),s.cuisine&&a.append("cuisine",s.cuisine),s.type&&a.append("type",s.type),s.maxReadyTime&&a.append("maxReadyTime",s.maxReadyTime.toString()),s.sort&&a.append("sort",s.sort);const r=await fetch(`${as}/complexSearch?${a}`);if(!r.ok){if(console.error("❌ Spoonacular API error:",r.status,r.statusText),r.status===401)return console.error("🔑 401 Unauthorized - Check your Spoonacular API key"),console.log("🔄 Falling back to TheMealDB API"),await ze(s);throw new Error(`API Error: ${r.status}`)}return await r.json()}catch(a){return console.error("Error searching recipes:",a),console.log("🔄 Attempting TheMealDB fallback"),await ze(s)}},ze=async s=>{try{let a=`${rt}/search.php?s=${s.query}`;const r=await fetch(a);if(!r.ok)throw new Error(`MealDB API Error: ${r.status}`);const n=await r.json();if(!n.meals)return{results:[],offset:0,number:0,totalResults:0};const t=n.meals.map(i=>({id:parseInt(i.idMeal),title:i.strMeal,image:i.strMealThumb,imageType:"jpg",readyInMinutes:30,servings:4,spoonacularScore:85,healthScore:75,pricePerServing:250,cuisines:i.strArea?[i.strArea]:[],dishTypes:i.strCategory?[i.strCategory]:[],diets:[],occasions:[],analyzedInstructions:[{name:"",steps:i.strInstructions?i.strInstructions.split(".").filter(l=>l.trim()).map((l,o)=>({number:o+1,step:l.trim(),ingredients:[],equipment:[]})):[]}],extendedIngredients:Array.from({length:20},(l,o)=>o+1).map(l=>({ingredient:i[`strIngredient${l}`],measure:i[`strMeasure${l}`]})).filter(l=>l.ingredient&&l.ingredient.trim()).map((l,o)=>({id:o+1,aisle:"",image:"",consistency:"",name:l.ingredient,nameClean:l.ingredient,original:`${l.measure} ${l.ingredient}`.trim(),originalName:l.ingredient,amount:1,unit:l.measure||"",meta:[],measures:{us:{amount:1,unitShort:"",unitLong:""},metric:{amount:1,unitShort:"",unitLong:""}}})),summary:i.strInstructions?i.strInstructions.substring(0,200)+"...":"",instructions:i.strInstructions||""}));return{results:t,offset:0,number:t.length,totalResults:t.length}}catch(a){throw console.error("Error with MealDB API:",a),a}},it=async(s=12)=>{try{const a=await fetch(`${as}/random?apiKey=${te}&number=${s}&addRecipeInformation=true`);if(!a.ok)throw new Error(`API Error: ${a.status}`);return(await a.json()).recipes||[]}catch(a){throw console.error("Error fetching random recipes:",a),a}},nt=({filters:s,onRecipeSelect:a,onRecipeResults:r})=>{const{data:n,isLoading:t,error:i}=hs({queryKey:["recipes",s],queryFn:async()=>{if(!s.query.trim()&&!s.diet&&!s.cuisine){const o=await it(12),g={results:o,offset:0,number:o.length,totalResults:o.length};return r?.(o),g}const l=await rs(s);return r?.(l.results),l},enabled:!0});return t?e.jsx(at,{type:"card",count:12}):i?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(bs,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-500",children:"Please try again later"})]}):!n||n.results.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(xe,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No recipes found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or filters"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:!s.query.trim()&&!s.diet&&!s.cuisine?"Featured Recipes":"Search Results"}),e.jsxs("span",{className:"text-gray-500",children:[n.totalResults," recipe",n.totalResults!==1?"s":""," found"]})]}),e.jsx(y.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:n.results.map((l,o)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:o*.1},children:e.jsx(ts,{recipe:l,onSelect:a})},l.id))}),n.results.length<n.totalResults&&e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-2xl hover:shadow-lg transition-all font-medium",children:"Load More Recipes"})})]})},X="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";console.log("🤖 AI Configuration:",{hasOpenRouterKey:!0,keyLength:X?.length||0,keyPreview:`${X.substring(0,8)}...`});const pe=new gs({baseURL:"https://openrouter.ai/api/v1",apiKey:X,dangerouslyAllowBrowser:!0,defaultHeaders:{"HTTP-Referer":"https://ai-recipe-finder.vercel.app","X-Title":"AI Recipe Finder & Meal Planner"}}),ue="meta-llama/llama-3.2-3b-instruct:free",lt=async(s,a=3)=>{try{const r=`You are a professional chef AI assistant. Based on the user's preferences, suggest ${a} personalized recipes.

User Preferences:
- Favorite ingredients: ${s.favoriteIngredients.join(", ")||"None specified"}
- Dietary restrictions: ${s.dietaryRestrictions.join(", ")||"None"}
- Disliked ingredients: ${s.dislikedIngredients.join(", ")||"None"}
- Preferred cuisines: ${s.preferredCuisines.join(", ")||"Any"}
- Cooking skill: ${s.cookingSkillLevel}
- Time available: ${s.timeAvailable} minutes
- Recent meals (avoid similar): ${s.recentMeals.join(", ")||"None"}

IMPORTANT: Respond with ONLY a valid JSON array of ${a} recipe objects. No additional text.

[
  {
    "title": "Recipe Name",
    "description": "Brief appealing description",
    "ingredients": ["ingredient 1", "ingredient 2"],
    "instructions": ["step 1", "step 2"],
    "cookingTime": 30,
    "difficulty": "easy",
    "cuisine": "cuisine_type",
    "dietaryTags": ["tag1", "tag2"]
  }
]

Start with [ and end with ]. Each recipe must have all fields.`,t=(await pe.chat.completions.create({model:ue,messages:[{role:"user",content:r}],temperature:.8,max_tokens:2e3})).choices[0]?.message?.content;if(!t)throw new Error("No response from AI");console.log("🔍 Raw AI recipe response:",t);try{const i=JSON.parse(t);return Array.isArray(i)?i:[i]}catch{return console.warn("⚠️ AI recipe response was not valid JSON, using fallback..."),Ge(s,a)}}catch(r){return console.error("Error getting AI recommendations:",r),Ge(s,a)}},ot=async(s,a=7)=>{try{console.log("🚀 Making OpenRouter API call for meal plan...");const r=`You are a nutrition and meal planning expert. Create a ${a}-day meal plan for someone with these preferences:

- Dietary restrictions: ${s.dietaryRestrictions.join(", ")||"None"}
- Preferred cuisines: ${s.preferredCuisines.join(", ")||"Varied"}
- Cooking skill: ${s.cookingSkillLevel}
- Time per meal: ${s.timeAvailable} minutes max
- Favorite ingredients to include: ${s.favoriteIngredients.join(", ")||"Flexible"}
- Ingredients to avoid: ${s.dislikedIngredients.join(", ")||"None"}

IMPORTANT: You must respond with ONLY valid JSON in this exact format. No extra text before or after:

{
  "mealPlan": "Day 1
Breakfast: [specific meal name]
Lunch: [specific meal name]
Dinner: [specific meal name]

Day 2
Breakfast: [specific meal name]
Lunch: [specific meal name]
Dinner: [specific meal name]

[continue for all ${a} days]",
  "explanation": "[Brief explanation of why this plan works for their needs and preferences]"
}

Example format for mealPlan content:
Day 1
Breakfast: Greek yogurt with honey and berries
Lunch: Quinoa salad with grilled vegetables
Dinner: Baked salmon with roasted sweet potatoes

Day 2
Breakfast: Oatmeal with banana and nuts
Lunch: Turkey and avocado wrap
Dinner: Stir-fried tofu with brown rice

Make sure each meal is specific and realistic for a ${s.cookingSkillLevel} cook with ${s.timeAvailable} minutes per meal.`,n=await pe.chat.completions.create({model:ue,messages:[{role:"user",content:r}],temperature:.7,max_tokens:1500});console.log("✅ OpenRouter API call successful");const t=n.choices[0]?.message?.content;if(!t)throw new Error("No response from AI");console.log("🔍 Raw AI response:",t);try{return JSON.parse(t)}catch{console.warn("⚠️ AI response was not valid JSON, attempting to extract JSON...");const l=t.match(/\{[\s\S]*\}/);if(l)try{const o=JSON.parse(l[0]);return console.log("✅ Successfully extracted JSON from response"),o}catch{console.error("❌ Could not extract valid JSON")}return console.log("🔄 Creating fallback JSON structure from text response"),{mealPlan:`Day 1
Breakfast: Greek yogurt with honey and mixed berries
Lunch: Mediterranean quinoa salad with feta
Dinner: Grilled chicken with roasted vegetables

Day 2
Breakfast: Oatmeal with banana and almonds
Lunch: Turkey and avocado wrap with side salad
Dinner: Baked salmon with sweet potato fries

Day 3
Breakfast: Scrambled eggs with whole grain toast
Lunch: Lentil soup with crusty bread
Dinner: Vegetable stir-fry with brown rice

Day 4
Breakfast: Smoothie bowl with granola and fruit
Lunch: Caprese salad with baguette
Dinner: Lean beef with steamed broccoli

Day 5
Breakfast: Avocado toast with poached egg
Lunch: Chicken Caesar salad
Dinner: Pasta with marinara and side vegetables

Day 6
Breakfast: Chia pudding with coconut and berries
Lunch: Veggie burger with sweet potato wedges
Dinner: Grilled fish with quinoa pilaf

Day 7
Breakfast: Pancakes with fresh fruit
Lunch: Asian-style soup with dumplings
Dinner: Roasted vegetables with herb-crusted tofu`,explanation:"This balanced 7-day meal plan provides variety while considering your dietary preferences and cooking skill level. Each meal is designed to be prepared within your time constraints and includes a good balance of proteins, healthy carbohydrates, and vegetables."}}}catch(r){return console.error("❌ Error getting AI meal plan:",r),r instanceof Error&&r.message.includes("401")&&console.error("🔑 OpenRouter Authentication Error - Check your API key at https://openrouter.ai/keys"),{mealPlan:`Day 1
Breakfast: Greek yogurt with honey and mixed berries
Lunch: Mediterranean quinoa salad with feta
Dinner: Grilled chicken with roasted vegetables

Day 2
Breakfast: Oatmeal with banana and almonds
Lunch: Turkey and avocado wrap with side salad
Dinner: Baked salmon with sweet potato fries

Day 3
Breakfast: Scrambled eggs with whole grain toast
Lunch: Lentil soup with crusty bread
Dinner: Vegetable stir-fry with brown rice

Day 4
Breakfast: Smoothie bowl with granola and fruit
Lunch: Caprese salad with baguette
Dinner: Lean beef with steamed broccoli

Day 5
Breakfast: Avocado toast with poached egg
Lunch: Chicken Caesar salad
Dinner: Pasta with marinara and side vegetables

Day 6
Breakfast: Chia pudding with coconut and berries
Lunch: Veggie burger with sweet potato wedges
Dinner: Grilled fish with quinoa pilaf

Day 7
Breakfast: Pancakes with fresh fruit
Lunch: Asian-style soup with dumplings
Dinner: Roasted vegetables with herb-crusted tofu`,explanation:"This balanced 7-day meal plan provides variety while considering your dietary preferences and cooking skill level. Each meal is designed to be prepared within your time constraints and includes a good balance of proteins, healthy carbohydrates, and vegetables."}}},ct=async(s,a)=>{try{const r=`You are a chef AI assistant. Modify this recipe to be ${a.join(", ")}:

Original Recipe:
Title: ${s.title}
Ingredients: ${s.extendedIngredients.map(i=>i.original).join(", ")}
Instructions: ${s.instructions||"See analyzedInstructions"}
Servings: ${s.servings}
Cooking Time: ${s.readyInMinutes} minutes

Please provide the modified recipe and explain what changes were made.

Format as JSON:
{
  "modifiedRecipe": "Modified Title

Ingredients:
- ingredient 1
- ingredient 2

Instructions:
1. Step 1
2. Step 2

Servings: X
Time: Y minutes",
  "changes": "Explanation of what was changed and why"
}`,t=(await pe.chat.completions.create({model:ue,messages:[{role:"user",content:r}],temperature:.6,max_tokens:1200})).choices[0]?.message?.content;if(!t)throw new Error("No response from AI");return JSON.parse(t)}catch(r){return console.error("Error modifying recipe with AI:",r),{modifiedRecipe:`Modified ${s.title}

This is a placeholder for the modified recipe.`,changes:"AI modification service is currently unavailable."}}},dt=async(s,a)=>{try{const r=`You are a smart shopping assistant. Optimize this shopping list for efficiency and ${a.budget||"medium"} budget:

Ingredients needed: ${s.join(", ")}
Budget preference: ${a.budget||"medium"}
Store type: ${a.storeType||"regular grocery store"}

Please provide:
1. An organized shopping list grouped by store sections
2. Money-saving tips and substitutions
3. Quantity recommendations for best value

Format as JSON:
{
  "optimizedList": "PRODUCE:
- item 1
- item 2

DAIRY:
- item 3

MEAT:
- item 4",
  "tips": ["tip 1", "tip 2", "tip 3"]
}`,t=(await pe.chat.completions.create({model:ue,messages:[{role:"user",content:r}],temperature:.5,max_tokens:800})).choices[0]?.message?.content;if(!t)throw new Error("No response from AI");return JSON.parse(t)}catch(r){return console.error("Error optimizing shopping list:",r),{optimizedList:s.join(`
- `),tips:["Buy seasonal produce for better prices","Check for sales and coupons","Consider generic brands"]}}},Ge=(s,a)=>[{title:"Quick Vegetable Stir Fry",description:"A healthy and colorful vegetable stir fry perfect for any skill level",ingredients:["mixed vegetables","soy sauce","garlic","ginger","oil"],instructions:["Heat oil in pan","Add garlic and ginger","Add vegetables","Stir fry for 5-7 minutes","Add soy sauce"],cookingTime:15,difficulty:"easy",cuisine:"Asian",dietaryTags:["vegetarian","vegan","quick"]},{title:"Classic Pasta with Marinara",description:"Simple and delicious pasta dish that never goes out of style",ingredients:["pasta","marinara sauce","garlic","basil","parmesan cheese"],instructions:["Boil pasta","Heat sauce with garlic","Combine pasta and sauce","Garnish with basil and cheese"],cookingTime:20,difficulty:"easy",cuisine:"Italian",dietaryTags:["vegetarian"]},{title:"Grilled Chicken Salad",description:"Light and nutritious salad with perfectly grilled chicken",ingredients:["chicken breast","mixed greens","tomatoes","cucumber","olive oil","lemon"],instructions:["Season and grill chicken","Prepare salad ingredients","Make dressing","Combine and serve"],cookingTime:25,difficulty:"medium",cuisine:"Mediterranean",dietaryTags:["high-protein","low-carb"]}].slice(0,a),Ue="ai-recipe-finder-preferences",_e={favoriteIngredients:[],dietaryRestrictions:[],dislikedIngredients:[],preferredCuisines:[],cookingSkillLevel:"beginner",timeAvailable:30,recentMeals:[]},le=()=>{const[s,a]=x.useState(_e),[r,n]=x.useState([]),[t,i]=x.useState(!1);x.useEffect(()=>{try{const c=localStorage.getItem(Ue);c&&a({..._e,...JSON.parse(c)})}catch(c){console.error("Error loading preferences:",c)}},[]);const l=x.useCallback(c=>{const u={...s,...c};a(u);try{localStorage.setItem(Ue,JSON.stringify(u))}catch(k){console.error("Error saving preferences:",k)}},[s]),o=x.useCallback(async(c=3)=>{i(!0);try{const u=await lt(s,c);return n(u),u}catch(u){return console.error("Error getting AI recommendations:",u),[]}finally{i(!1)}},[s]),g=x.useCallback(async(c=7)=>{i(!0);try{return await ot(s,c)}catch(u){return console.error("Error getting AI meal plan:",u),{mealPlan:"Unable to generate meal plan at this time.",explanation:"Please try again later."}}finally{i(!1)}},[s]),f=x.useCallback(async(c,u)=>{i(!0);try{return await ct(c,u)}catch(k){return console.error("Error modifying recipe:",k),{modifiedRecipe:"Unable to modify recipe at this time.",changes:"Please try again later."}}finally{i(!1)}},[]),d=x.useCallback(async(c,u={})=>{i(!0);try{return await dt(c,u)}catch(k){return console.error("Error optimizing shopping list:",k),{optimizedList:c.join(`
- `),tips:["Unable to optimize at this time."]}}finally{i(!1)}},[]),m=x.useCallback(c=>{const u=[...s.recentMeals];u.unshift(c),u.length>10&&u.pop(),l({recentMeals:u})},[s.recentMeals,l]);return{preferences:s,updatePreferences:l,aiRecommendations:r,isLoading:t,getRecommendations:o,getMealPlan:g,modifyRecipe:f,optimizeShoppingList:d,addToRecentMeals:m}},mt=({recipe:s,onClose:a})=>{const[r,n]=x.useState(()=>ss(s.id)),[t,i]=x.useState(!1),[l,o]=x.useState(null),[g,f]=x.useState([]),[d,m]=x.useState(s.servings),[c,u]=x.useState(!1),{modifyRecipe:k,isLoading:E}=le(),F=()=>{r?(es(s.id),n(!1)):(Ze(s),n(!0))},A=h=>`$${(h/100).toFixed(2)}`,j=async()=>{if(g.length===0)return;const h=await k(s,g);o(h)},$=h=>{m(S=>h==="increase"?Math.min(S+1,20):Math.max(S-1,1))},P=()=>{u(!c)},B=["vegetarian","vegan","gluten-free","low-carb","high-protein","dairy-free","keto-friendly","low-sodium","heart-healthy","quick (30 min or less)"];return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 bg-white/80 backdrop-blur-md rounded-full hover:bg-white transition-colors",children:e.jsx(H,{className:"w-6 h-6"})}),e.jsx(y.button,{onClick:F,whileHover:{scale:1.1},whileTap:{scale:.9},className:`absolute top-4 left-4 p-2 backdrop-blur-md rounded-full transition-all duration-200 ${r?"bg-red-500 text-white shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,title:r?"Remove from favorites":"Add to favorites",children:e.jsx(ce,{className:`w-6 h-6 transition-all duration-200 ${r?"fill-current scale-110":""}`})}),e.jsx(y.button,{onClick:h=>{h.stopPropagation(),console.log("🤖 AI Modify button clicked"),i(!0)},whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute top-4 left-16 p-2 bg-purple-500/90 text-white backdrop-blur-md rounded-full hover:bg-purple-600/90 transition-all duration-200 shadow-lg",title:"🤖 AI Modify Recipe - Make it vegetarian, gluten-free, keto, etc.",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsxs("span",{children:[s.readyInMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white/10 backdrop-blur-sm rounded-lg px-2 py-1",children:[e.jsx(ie,{className:"w-5 h-5"}),c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$("decrease"),disabled:d<=1,className:"w-6 h-6 bg-white/20 hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:e.jsx(qe,{className:"w-3 h-3"})}),e.jsxs("span",{className:"min-w-[60px] text-center font-semibold",children:[d," serving",d!==1?"s":""]}),e.jsx("button",{onClick:()=>$("increase"),disabled:d>=20,className:"w-6 h-6 bg-white/20 hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:e.jsx(ke,{className:"w-3 h-3"})}),e.jsx("button",{onClick:P,className:"ml-1 p-1 bg-green-500/80 hover:bg-green-600/80 rounded transition-colors",title:"Done editing",children:e.jsx(H,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[d," serving",d!==1?"s":""]}),e.jsx("button",{onClick:P,className:"p-1 bg-white/20 hover:bg-white/30 rounded transition-colors",title:"Edit serving size",children:e.jsx(He,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{children:(s.spoonacularScore/20).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"w-5 h-5"}),e.jsx("span",{children:A(s.pricePerServing*d/s.servings)})]})]})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-16rem)]",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.diets.map((h,S)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:h},S)),s.cuisines.map((h,S)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:h},S))]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 gradient-text",children:"About This Recipe"}),e.jsx("div",{className:"text-gray-600 leading-relaxed",dangerouslySetInnerHTML:{__html:s.summary}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-primary"}),"Ingredients"]}),e.jsx("div",{className:"space-y-3",children:s.extendedIngredients.map((h,S)=>{const M=d/s.servings;let L=h.original;if(h.amount){const N=Math.round(h.amount*M*100)/100,O=h.unit?` ${h.unit}`:"";L=`${N}${O} ${h.name}`}return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-gray-700",children:L}),d!==s.servings&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Scaled for ",d," serving",d!==1?"s":"",h.amount&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(original: ",h.amount," ",h.unit,")"]})]})]})]},S)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Instructions"}),e.jsx("div",{className:"space-y-4",children:s.analyzedInstructions[0]?.steps.map((h,S)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:h.number}),e.jsx("p",{className:"text-gray-700 pt-1",children:h.step})]},S))||e.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:s.instructions}})})]})]}),s.nutrition&&e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 gradient-text",children:["Nutrition Information",d!==s.servings&&e.jsxs("span",{className:"text-sm font-normal text-blue-600 ml-2",children:["(for ",d," serving",d!==1?"s":"",")"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.nutrition.nutrients.slice(0,8).map((h,S)=>{const M=d/s.servings,L=Math.round(h.amount*M);return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-lg text-gray-800",children:[L,e.jsx("span",{className:"text-sm text-gray-600",children:h.unit})]}),e.jsx("div",{className:"text-sm text-gray-600",children:h.name}),d!==s.servings&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(was ",Math.round(h.amount),h.unit,")"]})]},S)})})]})]})]})})}),e.jsx(_,{children:t&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:h=>{h.stopPropagation(),console.log("🔙 AI Modal backdrop clicked"),i(!1)},children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-lg w-full max-h-[80vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI Recipe Modifications"})]}),e.jsx("button",{onClick:h=>{h.stopPropagation(),console.log("❌ AI Modal close button clicked"),i(!1)},className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(H,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6 space-y-6",children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"✨ Your Modified Recipe:"}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 max-h-80 overflow-y-auto border border-purple-100",children:e.jsx("div",{className:"space-y-4",children:l.modifiedRecipe.split(`

`).filter(h=>h.trim()).map((h,S)=>{const M=h.split(`
`).filter(C=>C.trim()),L=M[0],N=M.slice(1);return L.endsWith(":")||L===L.toUpperCase()?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h5",{className:"font-bold text-purple-800 text-lg flex items-center gap-2",children:[L.includes("Ingredients")&&"🥘",L.includes("Instructions")&&"👨‍🍳",L.includes("Servings")&&"🍽️",L.includes("Time")&&"⏱️",L]}),e.jsx("div",{className:"ml-4 space-y-1",children:N.map((C,p)=>e.jsx("div",{className:"flex items-start gap-2 text-gray-700",children:C.match(/^\d+\./)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:C.match(/^\d+/)?.[0]}),e.jsx("span",{children:C.replace(/^\d+\.\s*/,"")})]}):C.startsWith("-")||C.startsWith("•")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),e.jsx("span",{children:C.replace(/^[-•]\s*/,"")})]}):e.jsx("span",{className:"ml-2",children:C})},p))})]},S):e.jsx("div",{className:"text-gray-700 leading-relaxed bg-white/50 rounded-lg p-3",children:M.map((C,p)=>e.jsx("p",{className:"mb-1",children:C},p))},S)})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"📝 What Changed:"}),e.jsx("div",{className:"bg-blue-50 rounded-xl p-4",children:e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:l.changes})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{o(null),f([])},className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-medium",children:"Try Different Modifications"}),e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Done"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"How would you like to modify this recipe?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Select the dietary preferences or restrictions you'd like AI to adapt this recipe for:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:B.map(h=>e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-200 rounded-xl hover:border-purple-300 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:g.includes(h),onChange:S=>{S.target.checked?f([...g,h]):f(g.filter(M=>M!==h))},className:"text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:h})]},h))})]}),e.jsx("button",{onClick:j,disabled:g.length===0||E,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium disabled:opacity-50",children:E?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"AI is modifying your recipe..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"Modify Recipe with AI"})]})})]})})]})})})]})},xt=()=>e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"})]}),ht=()=>{const[s,a]=x.useState(!1),[r,n]=x.useState([]),t=()=>{n(re()),a(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-white/20 sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold gradient-text",children:"Recipe Finder"})]}),e.jsx("nav",{className:"flex items-center gap-6",children:e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 rounded-2xl bg-white/50 hover:bg-white/70 transition-colors border border-white/20",children:[e.jsx(ce,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Favorites"}),e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:re().length})]})})]})})}),e.jsx(_,{children:s&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>a(!1),children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Your Favorite Recipes"}),e.jsx("button",{onClick:()=>a(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(H,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No favorite recipes yet"}),e.jsx("p",{className:"text-gray-400",children:"Start exploring and add some recipes to your favorites!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(i=>e.jsx(ts,{recipe:i,onSelect:()=>{a(!1)}},i.id))})})]})})})]})},is=()=>{const[s,a]=x.useState([]),[r,n]=x.useState(!0),t=x.useCallback(()=>{n(!0);try{const m=ne();a(m)}catch(m){console.error("Error loading meal plans:",m)}finally{n(!1)}},[]);x.useEffect(()=>{t()},[t]);const i=x.useCallback((m,c,u,k=4,E)=>{const A=Qs({date:c,mealType:u,recipe:m,servings:k,notes:E});return A?(t(),A):null},[t]),l=x.useCallback((m,c)=>{Be(m,c),t()},[t]),o=x.useCallback(m=>{Xs(m),t()},[t]),g=x.useCallback(m=>s.filter(c=>c.date===m),[s]),f=x.useCallback(m=>{const c=new Date(m);c.setDate(m.getDate()+6);const u=m.toISOString().split("T")[0],k=c.toISOString().split("T")[0];return Zs(u,k)},[]),d=x.useCallback((m,c,u)=>{Be(m,{date:c,mealType:u}),t()},[t]);return{mealPlans:s,isLoading:r,addRecipeToMealPlan:i,updateMealPlanById:l,removeMealPlanById:o,getMealPlansForDate:g,getMealPlansForWeek:f,moveMealPlan:d,refreshMealPlans:t}},gt=({id:s,mealPlans:a,date:r,mealType:n,onRemoveMeal:t,onRecipeSelect:i,onEditServingSize:l})=>{const{isOver:o,setNodeRef:g,active:f}=Ps({id:s,data:{type:"meal-slot",date:r,mealType:n}});return we.useEffect(()=>{console.log("🎯 MealSlot mounted:",s,"for",n),o&&f&&console.log("🟢 Recipe is hovering over meal slot:",s,"Active ID:",f.id)},[o,f,s,n]),e.jsxs("div",{ref:g,className:`min-h-[120px] p-3 rounded-2xl border-2 border-dashed transition-all duration-200 ${o?"border-primary bg-primary/10 scale-[1.02] shadow-lg":"border-gray-200 hover:border-gray-300"} ${a.length===0?"bg-gray-50/50":"bg-white"}`,children:[o&&e.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-2xl flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"text-primary font-medium text-sm",children:"📌 Drop recipe here"})}),e.jsx(_,{children:a.length===0?e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex flex-col items-center justify-center h-full min-h-[96px] ${o?"text-primary":"text-gray-400"}`,children:[e.jsx(ke,{className:`w-6 h-6 mb-2 ${o?"animate-bounce":""}`}),e.jsx("span",{className:"text-sm text-center",children:o?"Drop here!":"Drop recipe here"})]}):e.jsx("div",{className:"space-y-2",children:a.map((d,m)=>e.jsxs(y.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{delay:m*.1},className:"group relative bg-white border border-gray-200 rounded-xl p-3 shadow-sm hover:shadow-lg hover:border-blue-200 transition-all cursor-pointer",onClick:()=>i?.(d.recipe),children:[e.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Editable"}),e.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),l?.(d)},className:"w-7 h-7 bg-blue-500 text-white rounded-full flex items-center justify-center hover:bg-blue-600 z-10 shadow-md hover:shadow-lg transition-all",title:"Edit serving size",children:e.jsx(He,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),t(d.id)},className:"w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 z-10 shadow-md hover:shadow-lg transition-all",title:"Remove from meal plan",children:e.jsx(H,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:d.recipe.image,alt:d.recipe.title,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-800 line-clamp-2 leading-tight",children:d.recipe.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[d.recipe.readyInMinutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[e.jsx(ie,{className:"w-3 h-3"}),e.jsxs("span",{children:[d.servings," serving",d.servings!==1?"s":""]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 text-blue-500 text-xs",children:"(click to edit)"})]}),d.notes&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:d.notes})]})]})]},d.id))})}),!1]})},Ye=({recipe:s,isDragging:a=!1})=>{const{attributes:r,listeners:n,setNodeRef:t,transform:i,isDragging:l}=Ds({id:`recipe-${s.id}`,data:{type:"recipe",recipe:s}}),o=i?{transform:`translate3d(${i.x}px, ${i.y}px, 0)`,zIndex:9999}:void 0;x.useEffect(()=>{console.log("🔧 Recipe card mounted:",s.title,"ID: recipe-"+s.id),l&&console.log("🐛 Recipe card is being dragged:",s.title)},[l,s.title,s.id]);const g=()=>{console.log("👆 Recipe card clicked:",s.title,"ID: recipe-"+s.id)},f=()=>{console.log("🖱️ Mouse down on recipe card:",s.title)},d=()=>{console.log("🖱️ Mouse up on recipe card:",s.title)};return e.jsxs(y.div,{ref:t,style:o,...n,...r,onClick:g,onMouseDown:f,onMouseUp:d,initial:{opacity:0,scale:.9},animate:{opacity:l?.8:1,scale:l?1.05:1},whileHover:{scale:1.02},className:`group relative bg-white rounded-2xl overflow-hidden shadow-md border-2 cursor-grab active:cursor-grabbing transition-all ${a||l?"border-primary shadow-lg rotate-3 z-50":"border-transparent hover:border-primary/20 hover:shadow-lg"}`,children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-1",children:e.jsx(js,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"relative h-24 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover pointer-events-none",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 pointer-events-none",children:e.jsxs("div",{className:"flex items-center justify-between text-white text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-sm rounded px-2 py-1",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.readyInMinutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-sm rounded px-2 py-1",children:[e.jsx(ie,{className:"w-3 h-3"}),e.jsx("span",{children:s.servings})]})]})})]}),e.jsxs("div",{className:"p-3 pointer-events-none",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 line-clamp-2 leading-tight",children:s.title}),s.diets.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.diets.slice(0,2).map((m,c)=>e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:m},c))})]}),(a||l)&&e.jsx("div",{className:"absolute inset-0 bg-primary/10 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center text-primary font-medium",children:[e.jsx("div",{className:"text-lg",children:"📅"}),e.jsx("div",{className:"text-xs",children:"Drop on calendar"})]})}),!1]})},pt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ve=["breakfast","lunch","dinner","snack"],ut=({recipes:s=[],onAddRecipe:a,onGenerateShoppingList:r,onViewNutrition:n,onNavigateToSearch:t,onSearchRecipes:i,onRecipeSelect:l,isSearching:o})=>{const[g,f]=x.useState(new Date),[d,m]=x.useState(null),[c,u]=x.useState(null),[k,E]=x.useState(""),[F,A]=x.useState(!1),[j,$]=x.useState(null),[P,B]=x.useState(null),[h,S]=x.useState(4),[M,L]=x.useState("add"),{mealPlans:N,addRecipeToMealPlan:O,removeMealPlanById:C,moveMealPlan:p,updateMealPlanById:w}=is(),b=s.length>0?s:[],D=Ls(De(zs,{activationConstraint:{distance:8}}),De(Bs,{coordinateGetter:Os})),R=x.useMemo(()=>Xe(g,{weekStartsOn:1}),[g]),V=x.useMemo(()=>Array.from({length:7},(v,I)=>oe(R,I)),[R]),W=x.useMemo(()=>{const v=Y(R,"yyyy-MM-dd"),I=Y(oe(R,6),"yyyy-MM-dd");return N.filter(T=>T.date>=v&&T.date<=I)},[N,R]),J=(v,I)=>{const T=Y(v,"yyyy-MM-dd");return W.filter(z=>z.date===T&&z.mealType===I)},ye=v=>{const{active:I}=v,T=I.id.toString();if(m(T),console.log("🚀 DRAG START - ID:",T),console.log("🔍 Available recipes:",b.map(K=>({id:K.id,title:K.title}))),console.log("📊 Active data:",I.data.current),T.startsWith("recipe-")){const K=T.replace("recipe-",""),G=b.find(q=>q.id.toString()===K);if(G){console.log("✅ Found recipe for drag:",G.title),u(G);return}else console.log("❌ Recipe not found for ID:",K),console.log("🔍 Available recipe IDs:",b.map(q=>q.id))}const z=N.find(K=>K.id===T);z?(console.log("✅ Found existing meal plan for move:",z.recipe.title),u(z.recipe)):console.log("❌ No recipe or meal plan found for ID:",T)},ns=v=>{const{active:I,over:T}=v;if(console.log("🏁 DRAG END - Active:",I?.id,"Over:",T?.id),console.log("📍 Over data:",T?.data?.current),!T){console.log("❌ No drop target found"),m(null),u(null);return}const z=I.id.toString(),K=T.id.toString();console.log("🎯 Drop target ID:",K);const G=K.split("-");let q="",Z="";if(G.length>=4?(q=`${G[0]}-${G[1]}-${G[2]}`,Z=G[3]):G.length===2&&(q=G[0],Z=G[1]),console.log("📅 Parsed drop target - Date:",q,"MealType:",Z),console.log("🍽️ Valid meal types:",ve),!q||!ve.includes(Z)){console.log("❌ Invalid drop target format or meal type"),m(null),u(null);return}if(c)if(z.startsWith("recipe-"))console.log("🍽️ Opening serving size selection for:",c.title),$({recipe:c,date:q,mealType:Z}),S(c.servings||4),L("add"),A(!0);else{const Re=N.find(xs=>xs.id===z);Re&&(console.log("🔄 Moving existing meal plan:",Re.recipe.title),p(z,q,Z),console.log("✅ Meal plan moved successfully"))}else console.log("❌ No dragged recipe found");m(null),u(null)},Ce=v=>{f(I=>v==="next"?Us(I,1):_s(I))},ls=()=>{f(new Date)},os=()=>{console.log("🛒 Generate shopping list clicked"),console.log("📊 All meal plans:",N.length),console.log("📊 Week meal plans:",W.length),console.log("📋 Meal plans details:",N),r&&r(N)},cs=()=>{console.log("📊 View nutrition clicked"),console.log("📊 All meal plans:",N.length),console.log("📊 Week meal plans:",W.length),n&&n(N)},Me=async v=>{if(v.preventDefault(),!(!k.trim()||!i))try{await i(k.trim()),E("")}catch(I){console.error("Search failed:",I)}},ds=()=>{M==="add"&&j?(console.log("➕ Adding recipe with serving size:",j.recipe.title,h,"servings"),O(j.recipe,j.date,j.mealType,h),a?.(j.recipe,j.date,j.mealType),console.log("✅ Recipe added successfully with",h,"servings")):M==="edit"&&P&&(console.log("✏️ Updating serving size for:",P.recipe.title,"from",P.servings,"to",h),w(P.id,{servings:h}),console.log("✅ Serving size updated successfully")),A(!1),$(null),B(null),S(4),L("add")},Ie=()=>{console.log("❌ Serving size modal canceled"),A(!1),$(null),B(null),S(4),L("add")},Ae=v=>{S(I=>v==="increase"?Math.min(I+1,20):Math.max(I-1,1))},ms=v=>{console.log("✏️ Editing serving size for:",v.recipe.title,"current:",v.servings),B(v),S(v.servings),L("edit"),A(!0)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-white rounded-3xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"w-8 h-8 text-primary"}),e.jsx("h2",{className:"text-3xl font-bold gradient-text",children:"Meal Planning"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-2xl p-1",children:[e.jsx("button",{onClick:()=>Ce("prev"),className:"p-2 rounded-xl hover:bg-white transition-colors",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold min-w-[200px] text-center",children:[Y(R,"MMM d")," - ",Y(oe(R,6),"MMM d, yyyy")]}),e.jsx("button",{onClick:()=>Ce("next"),className:"p-2 rounded-xl hover:bg-white transition-colors",children:e.jsx(Ns,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:ls,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors font-medium",children:"Today"}),e.jsxs("button",{onClick:os,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-colors font-medium",children:[e.jsx(de,{className:"w-5 h-5"}),"Shopping List"]}),e.jsxs("button",{onClick:cs,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors font-medium",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Nutrition"]})]})]}),e.jsxs(Es,{sensors:D,collisionDetection:Fs,onDragStart:ye,onDragEnd:ns,modifiers:[Ts],children:[e.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[e.jsx("div",{className:""}),pt.map((v,I)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-600 mb-1",children:v}),e.jsx("div",{className:`text-2xl font-bold ${Gs(V[I],new Date)?"text-primary":"text-gray-800"}`,children:Y(V[I],"d")})]},v)),ve.map(v=>e.jsxs(we.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-2xl",children:e.jsx("span",{className:"font-semibold text-gray-700 capitalize",children:v})}),V.map(I=>{const T=Y(I,"yyyy-MM-dd"),z=J(I,v);return e.jsx(gt,{id:`${T}-${v}`,mealPlans:z,date:I,mealType:v,onRemoveMeal:C,onRecipeSelect:l,onEditServingSize:ms},`${T}-${v}`)})]},v))]}),e.jsxs("div",{className:"mt-8 border-t pt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["📋 Drag Recipes to Calendar",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",b.length," recipes available)"]}),d&&e.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"🎯 Dragging..."})]}),e.jsxs("form",{onSubmit:Me,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:k,onChange:v=>E(v.target.value),placeholder:"Search for more recipes... (Press Enter)",className:"w-64 px-4 py-2 pr-10 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",disabled:o,onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),Me(v))}}),e.jsx("button",{type:"submit",disabled:o||!k.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(We,{className:"w-4 h-4"})})]}),o&&e.jsx("div",{className:"text-sm text-gray-500",children:"Searching..."})]})]}),b.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:b.slice(0,12).map(v=>e.jsx(Ye,{recipe:v},`recipe-${v.id}`))}),b.length>12&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 12 of ",b.length," recipes"]}),e.jsx("button",{onClick:()=>{console.log("Show more recipes functionality")},className:"mt-2 text-primary hover:text-primary/80 text-sm font-medium",children:"View all recipes →"})]})]}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Recipes Available"}),e.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"You need to search for recipes first before you can add them to your meal plan."}),e.jsx("button",{onClick:()=>{t?t():console.log("Navigate to search view")},className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors font-medium",children:"🔍 Search for Recipes"})]})]}),e.jsx($s,{dropAnimation:null,children:d&&c?e.jsx("div",{className:"transform rotate-6 scale-105 opacity-90 pointer-events-none",children:e.jsx(Ye,{recipe:c,isDragging:!0})}):d?e.jsxs("div",{className:"bg-primary text-white px-4 py-2 rounded-lg font-medium pointer-events-none",children:["Dragging: ",d]}):null})]}),e.jsx(_,{children:F&&(j||P)&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:Ie,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-md w-full p-6",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center",children:e.jsx(ie,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:M==="add"?"Choose Serving Size":"Edit Serving Size"}),e.jsx("p",{className:"text-gray-600 text-sm",children:M==="add"?e.jsxs(e.Fragment,{children:["How many servings of ",e.jsx("span",{className:"font-semibold text-primary",children:j?.recipe.title})," would you like to add?"]}):e.jsxs(e.Fragment,{children:["How many servings of ",e.jsx("span",{className:"font-semibold text-primary",children:P?.recipe.title})," would you like?"]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>Ae("decrease"),disabled:h<=1,className:"w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center transition-colors",children:e.jsx(qe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:h}),e.jsx("div",{className:"text-sm text-gray-500",children:h===1?"serving":"servings"})]}),e.jsx("button",{onClick:()=>Ae("increase"),disabled:h>=20,className:"w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center transition-colors",children:e.jsx(ke,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3 mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Original recipe:"}),e.jsxs("span",{className:"font-medium",children:[M==="add"?j?.recipe.servings:P?.recipe.servings," servings"]})]}),M==="edit"&&P&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current meal plan:"}),e.jsxs("span",{className:"font-medium",children:[P.servings," servings"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:M==="add"?"Your selection:":"New amount:"}),e.jsxs("span",{className:"font-medium text-primary",children:[h," servings"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Meal type:"}),e.jsx("span",{className:"font-medium capitalize",children:M==="add"?j?.mealType:P?.mealType})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium",children:M==="add"?Y(new Date(j?.date||""),"MMM d, yyyy"):Y(new Date(P?.date||""),"MMM d, yyyy")})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Ie,className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ds,className:"flex-1 px-4 py-3 bg-gradient-to-r from-primary to-purple-600 hover:shadow-lg text-white rounded-xl font-medium transition-all",children:M==="add"?"Add to Meal Plan":"Update Serving Size"})]})]})})})]})},yt=()=>{const[s,a]=x.useState([]),[r,n]=x.useState(!0),t=x.useCallback(()=>{n(!0);try{const d=ee();a(d)}catch(d){console.error("Error loading shopping lists:",d)}finally{n(!1)}},[]);x.useEffect(()=>{t()},[t]);const i=x.useCallback((d,m)=>{const c=et(d,m);return c?(t(),c):null},[t]),l=x.useCallback((d,m)=>{st(d,m),t()},[t]),o=x.useCallback((d,m)=>{tt(d,m),t()},[t]),g=x.useCallback(d=>{try{const c=ee().filter(u=>u.id!==d);localStorage.setItem("recipe-finder-shopping-lists",JSON.stringify(c)),t()}catch(m){console.error("Error deleting shopping list:",m)}},[t]),f=x.useCallback(d=>ee().find(c=>c.id===d),[]);return{shoppingLists:s,isLoading:r,generateShoppingListFromMealPlans:i,updateShoppingListById:l,toggleItemById:o,deleteShoppingList:g,getShoppingListById:f,refreshShoppingLists:t}},ft=({isOpen:s,onClose:a,mealPlans:r,initialName:n="Weekly Meal Plan"})=>{const[t,i]=x.useState(n),[l,o]=x.useState(null),[g,f]=x.useState("aisle"),[d,m]=x.useState("all"),[c,u]=x.useState(!1),[k,E]=x.useState(null),[F,A]=x.useState(!1),{generateShoppingListFromMealPlans:j,toggleItemById:$,getShoppingListById:P}=yt(),{optimizeShoppingList:B,isLoading:h}=le(),S=async()=>{u(!0),console.log("🛒 Generating shopping list from meal plans:",r.length,"meal plans");try{const p=j(t,r);console.log("📋 Shopping list created with ID:",p),p&&setTimeout(()=>{const w=P(p);console.log("🔍 Retrieved shopping list:",w),w?(o(w),console.log("✅ Shopping list set successfully:",w.items.length,"items")):console.error("❌ Created shopping list not found:",p)},100)}catch(p){console.error("Error generating shopping list:",p)}u(!1)},M=x.useMemo(()=>{if(!l)return{};let p=l.items;d==="checked"?p=p.filter(b=>b.checked):d==="unchecked"&&(p=p.filter(b=>!b.checked));const w={};return p.forEach(b=>{let D="";switch(g){case"aisle":D=b.aisle||"Other";break;case"recipe":D=b.recipes[0]||"Other";break;case"alphabetical":D=b.ingredient.charAt(0).toUpperCase();break}w[D]||(w[D]=[]),w[D].push(b)}),Object.keys(w).forEach(b=>{w[b].sort((D,R)=>D.ingredient.localeCompare(R.ingredient))}),w},[l,g,d]),L=p=>{l&&($(l.id,p),o(w=>{if(!w)return w;const b=w.items.map(R=>R.id===p?{...R,checked:!R.checked}:R),D=b.filter(R=>R.checked).length;return{...w,items:b,checkedItems:D}}))},N=()=>{if(!l)return;const p=Object.entries(M).map(([R,V])=>{const W=V.map(J=>`${J.checked?"✓":"○"} ${J.amount} ${J.unit} ${J.ingredient}`).join(`
`);return`${R.toUpperCase()}
${W}`}).join(`

`),w=new Blob([p],{type:"text/plain"}),b=URL.createObjectURL(w),D=document.createElement("a");D.href=b,D.download=`${l.name}.txt`,D.click(),URL.revokeObjectURL(b)},O=async()=>{if(!l)return;const p=Object.entries(M).map(([w,b])=>{const D=b.map(R=>`• ${R.amount} ${R.unit} ${R.ingredient}`).join(`
`);return`${w}
${D}`}).join(`

`);if(navigator.share)try{await navigator.share({title:l.name,text:p})}catch(w){console.error("Error sharing:",w)}else navigator.clipboard.writeText(p)},C=async()=>{if(!l)return;const p=l.items.map(b=>`${b.amount} ${b.unit} ${b.ingredient}`),w=await B(p,{budget:"medium",storeType:"grocery store"});E(w),A(!0)};return s?e.jsxs(_,{children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-8 h-8 text-primary"}),e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Shopping List"})]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(H,{className:"w-6 h-6"})})]}),l?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:l.name}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[l.checkedItems," of ",l.totalItems," items completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:C,disabled:h,className:"p-2 rounded-xl bg-purple-100 text-purple-600 hover:bg-purple-200 transition-colors disabled:opacity-50",title:"AI Optimize List",children:h?e.jsx(se,{className:"w-5 h-5 animate-spin"}):e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:N,className:"p-2 rounded-xl bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:"Export List",children:e.jsx(Qe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:O,className:"p-2 rounded-xl bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:"Share List",children:e.jsx(ws,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:t,onChange:p=>i(p.target.value),placeholder:"Enter list name...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none"}),e.jsx("button",{onClick:S,disabled:c,className:"w-full py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium disabled:opacity-50",children:c?"Generating...":"Generate Shopping List"})]})]}),l&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("select",{value:g,onChange:p=>f(p.target.value),className:"px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"aisle",children:"Aisle"}),e.jsx("option",{value:"recipe",children:"Recipe"}),e.jsx("option",{value:"alphabetical",children:"A-Z"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:d,onChange:p=>m(p.target.value),className:"px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"unchecked",children:"To Buy"}),e.jsx("option",{value:"checked",children:"Completed"})]})]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:l?e.jsx("div",{className:"space-y-6",children:Object.entries(M).map(([p,w])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-200",children:p}),e.jsx("div",{className:"space-y-2",children:w.map(b=>e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${b.checked?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-gray-300"}`,children:[e.jsx("button",{onClick:()=>L(b.id),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 transition-all ${b.checked?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-primary"}`,children:b.checked?e.jsx(ks,{className:"w-4 h-4"}):null}),e.jsxs("div",{className:`flex-1 ${b.checked?"line-through text-gray-500":""}`,children:[e.jsxs("div",{className:"font-medium",children:[b.amount," ",b.unit," ",b.ingredient]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Used in: ",b.recipes.join(", ")]})]})]},b.id))})]},p))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(de,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Generate your shopping list to get started"}),e.jsx("p",{className:"text-gray-400",children:"We'll organize ingredients from your meal plans"})]})})]})}),e.jsx(_,{children:F&&k&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-60 flex items-center justify-center p-4",onClick:()=>A(!1),children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-lg w-full max-h-[80vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI Optimized Shopping List"})]}),e.jsx("button",{onClick:()=>A(!1),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(H,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"Optimized Shopping Route:"}),e.jsx("div",{className:"space-y-3",children:k.optimizedList.split(`

`).filter(p=>p.trim()).map((p,w)=>{const b=p.split(`
`).filter(J=>J.trim()),D=b[0],R=b.slice(1),V={PRODUCE:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"🥬"},DAIRY:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"🥛"},MEAT:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"🥩"},PANTRY:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"🥫"},FROZEN:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-800",icon:"🧊"},BAKERY:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",icon:"🍞"},DEFAULT:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon:"🛒"}},W=V[D.toUpperCase()]||V.DEFAULT;return e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.1},className:`${W.bg} ${W.border} border rounded-xl p-4`,children:[e.jsxs("h5",{className:`font-semibold ${W.text} mb-3 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:W.icon}),D]}),e.jsx("div",{className:"space-y-2",children:R.map((J,ye)=>e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-current rounded-full opacity-60"}),e.jsx("span",{className:"text-sm",children:J.replace(/^[-•]\s*/,"")})]},ye))})]},w)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"💡 AI Shopping Tips:"}),e.jsx("div",{className:"space-y-2",children:k.tips.map((p,w)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-purple-50 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-sm",children:p})]},w))})]})]})]})})})]}):null},bt=s=>{if(console.log("🥗 Calculating nutrition for meal plans:",s.length),s.length===0)return{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,dailyAverages:{calories:0,protein:0,carbs:0,fat:0},weeklyCalories:[],macroData:[{name:"Protein",value:33,color:"#8B5CF6"},{name:"Carbs",value:34,color:"#06B6D4"},{name:"Fat",value:33,color:"#F59E0B"}]};let a=0,r=0,n=0,t=0;s.forEach(m=>{const c=m.recipe,u=m.servings,k=c.nutrition?.nutrients?.find(j=>j.name==="Calories")?.amount||c.readyInMinutes*20,E=c.nutrition?.nutrients?.find(j=>j.name==="Protein")?.amount||k*.15/4,F=c.nutrition?.nutrients?.find(j=>j.name==="Carbohydrates")?.amount||k*.5/4,A=c.nutrition?.nutrients?.find(j=>j.name==="Fat")?.amount||k*.35/9;a+=k*u,r+=E*u,n+=F*u,t+=A*u});const i=new Set(s.map(m=>m.date)).size,l={calories:i>0?Math.round(a/i):0,protein:i>0?Math.round(r/i):0,carbs:i>0?Math.round(n/i):0,fat:i>0?Math.round(t/i):0},o=r*4+n*4+t*9,g=o>0?[{name:"Protein",value:Math.round(r*4/o*100),color:"#8B5CF6"},{name:"Carbs",value:Math.round(n*4/o*100),color:"#06B6D4"},{name:"Fat",value:Math.round(t*9/o*100),color:"#F59E0B"}]:[{name:"Protein",value:33,color:"#8B5CF6"},{name:"Carbs",value:34,color:"#06B6D4"},{name:"Fat",value:33,color:"#F59E0B"}],f=Xe(new Date,{weekStartsOn:1}),d=Array.from({length:7},(m,c)=>{const u=oe(f,c),k=Y(u,"yyyy-MM-dd"),F=s.filter(A=>A.date===k).reduce((A,j)=>{const $=j.recipe.nutrition?.nutrients?.find(P=>P.name==="Calories")?.amount||j.recipe.readyInMinutes*20;return A+$*j.servings},0);return{day:Y(u,"EEE"),calories:Math.round(F),target:2e3}});return console.log("📊 Nutrition calculated:",{totalCalories:a,dailyAverages:l,macroData:g,weeklyCalories:d}),{totalCalories:a,totalProtein:r,totalCarbs:n,totalFat:t,dailyAverages:l,weeklyCalories:d,macroData:g}},jt=({isOpen:s,onClose:a,mealPlans:r})=>{const n=x.useMemo(()=>bt(r),[r]),t=[{name:"Vitamin C",current:85,target:100,unit:"mg"},{name:"Iron",current:12,target:15,unit:"mg"},{name:"Calcium",current:950,target:1e3,unit:"mg"},{name:"Fiber",current:28,target:35,unit:"g"}];return s?e.jsx(_,{children:e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-6xl w-full max-h-[90vh] overflow-hidden",onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Nutrition Dashboard"}),e.jsx("p",{className:"text-white/80",children:"Track your nutritional goals and progress"})]})]}),e.jsx("button",{onClick:a,className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(H,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-8rem)]",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Meal Plans Yet"}),e.jsx("p",{className:"text-gray-600",children:"Create some meal plans to see your nutrition analytics"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Q,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Daily Average"})]}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.dailyAverages.calories.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"calories"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ss,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Goal Progress"})]}),e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[n.dailyAverages.calories>0?Math.round(n.dailyAverages.calories/2e3*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"of 2000 cal target"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Cs,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Protein Goal"})]}),e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[n.dailyAverages.protein,"g"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"daily average"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-6 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(fe,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Total Meals"})]}),e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:r.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"planned"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Macronutrient Breakdown"}),e.jsx("div",{className:"h-64",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(Ys,{children:[e.jsx(Ws,{data:n.macroData,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:i,value:l})=>`${i}: ${l}%`,children:n.macroData.map((i,l)=>e.jsx(Js,{fill:i.color},`cell-${l}`))}),e.jsx(je,{})]})})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Weekly Calorie Intake"}),e.jsx("div",{className:"h-64",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(Ks,{data:n.weeklyCalories,children:[e.jsx(Le,{strokeDasharray:"3 3"}),e.jsx(Ee,{dataKey:"day"}),e.jsx(Te,{}),e.jsx(je,{}),e.jsx(Fe,{dataKey:"calories",fill:"#8B5CF6"}),e.jsx(Fe,{dataKey:"target",fill:"#E5E7EB"})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"Nutrient Goals Progress"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((i,l)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-800",children:i.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[i.current,i.unit," / ",i.target,i.unit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(y.div,{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full",initial:{width:0},animate:{width:`${i.current/i.target*100}%`},transition:{duration:1,delay:l*.1}})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Math.round(i.current/i.target*100),"% of daily goal"]})]},l))})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Calorie Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(qs,{data:n.weeklyCalories,children:[e.jsx(Le,{strokeDasharray:"3 3"}),e.jsx(Ee,{dataKey:"day"}),e.jsx(Te,{}),e.jsx(je,{}),e.jsx($e,{type:"monotone",dataKey:"calories",stroke:"#8B5CF6",strokeWidth:3,dot:{fill:"#8B5CF6",strokeWidth:2,r:4}}),e.jsx($e,{type:"monotone",dataKey:"target",stroke:"#E5E7EB",strokeDasharray:"5 5",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"💡 Nutrition Tips"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Try to include a variety of colorful vegetables in your meals for diverse nutrients."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Aim for 25-30g of fiber daily to support digestive health."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Include lean protein sources in each meal to maintain muscle mass."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Stay hydrated with 8-10 glasses of water daily."})]})]})]})]})})]})})}):null},vt=({onRecipeSelect:s})=>{const{aiRecommendations:a,isLoading:r,getRecommendations:n,preferences:t}=le(),[i,l]=x.useState(!1),[o,g]=x.useState(!1),f=async()=>{await n(3),g(!0)},d=m=>{switch(m){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Recipe Recommendations"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Personalized just for you"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(!0),className:"p-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors",title:"Customize Preferences",children:e.jsx(Ms,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:f,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors disabled:opacity-50",children:[r?e.jsx(se,{className:"w-4 h-4 animate-spin"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:o?"Refresh":"Get Recommendations"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[!o&&!r&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-purple-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Ready for AI Magic?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get personalized recipe recommendations based on your preferences and dietary needs."}),e.jsxs("button",{onClick:f,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(U,{className:"w-5 h-5 inline mr-2"}),"Generate AI Recommendations"]})]}),r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-12 h-12 text-purple-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"AI is analyzing your preferences..."})]}),o&&!r&&a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No recommendations available. Try adjusting your preferences."})]}),e.jsx(_,{children:a.length>0&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((m,c)=>e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},className:"border border-gray-200 rounded-2xl p-4 hover:shadow-md transition-all cursor-pointer hover:border-purple-300",onClick:()=>s?.(m),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 flex-1 pr-2",children:m.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d(m.difficulty)}`,children:m.difficulty})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:[m.cookingTime,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{children:m.cuisine})]})]}),m.dietaryTags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:m.dietaryTags.slice(0,3).map((u,k)=>e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:u},k))}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ingredients needed:"}),e.jsxs("p",{className:"text-sm text-gray-700 line-clamp-2",children:[m.ingredients.slice(0,4).join(", "),m.ingredients.length>4&&"..."]})]})]},c))})}),o&&e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 p-4 bg-gray-50 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Your Current Preferences:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[t.dietaryRestrictions.length>0&&e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["🥗 ",t.dietaryRestrictions.join(", ")]}),t.preferredCuisines.length>0&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["🌍 ",t.preferredCuisines.slice(0,2).join(", ")]}),e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["⏱️ ",t.timeAvailable,"min max"]}),e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:["👨‍🍳 ",t.cookingSkillLevel]})]})]})]}),e.jsx(Nt,{isOpen:i,onClose:()=>l(!1)})]})},Nt=({isOpen:s,onClose:a})=>{const{preferences:r,updatePreferences:n}=le();return s?e.jsx(_,{children:e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-md w-full max-h-[80vh] overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold gradient-text",children:"AI Preferences"}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cooking Skill Level"}),e.jsxs("select",{value:r.cookingSkillLevel,onChange:t=>n({cookingSkillLevel:t.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Cooking Time (minutes)"}),e.jsx("input",{type:"number",min:"10",max:"180",value:r.timeAvailable,onChange:t=>n({timeAvailable:parseInt(t.target.value)}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Restrictions (comma-separated)"}),e.jsx("input",{type:"text",value:r.dietaryRestrictions.join(", "),onChange:t=>n({dietaryRestrictions:t.target.value.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., vegetarian, gluten-free, keto",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Cuisines (comma-separated)"}),e.jsx("input",{type:"text",value:r.preferredCuisines.join(", "),onChange:t=>n({preferredCuisines:t.target.value.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., Italian, Mexican, Asian",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favorite Ingredients (comma-separated)"}),e.jsx("input",{type:"text",value:r.favoriteIngredients.join(", "),onChange:t=>n({favoriteIngredients:t.target.value.split(",").map(i=>i.trim()).filter(Boolean)}),placeholder:"e.g., chicken, tomatoes, garlic",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-100",children:e.jsx("button",{onClick:a,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Save Preferences"})})]})})}):null},wt=()=>{const{getMealPlan:s,preferences:a,isLoading:r}=le(),[n,t]=x.useState(null),[i,l]=x.useState(7),o=async()=>{const f=await s(i);t(f)},g=()=>{if(!n)return;const f=`${i}-Day AI Meal Plan

${n.mealPlan}

Why This Plan Works:
${n.explanation}`,d=new Blob([f],{type:"text/plain"}),m=URL.createObjectURL(d),c=document.createElement("a");c.href=m,c.download=`ai-meal-plan-${i}-days.txt`,c.click(),URL.revokeObjectURL(m)};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(Q,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Meal Planner"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Smart nutrition planning made easy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:i,onChange:f=>l(parseInt(f.target.value)),className:"px-3 py-2 bg-white/20 text-white rounded-xl border border-white/30 focus:outline-none",children:[e.jsx("option",{value:3,className:"text-gray-800",children:"3 Days"}),e.jsx("option",{value:7,className:"text-gray-800",children:"7 Days"}),e.jsx("option",{value:14,className:"text-gray-800",children:"14 Days"})]}),e.jsxs("button",{onClick:o,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors disabled:opacity-50",children:[r?e.jsx(se,{className:"w-4 h-4 animate-spin"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate Plan"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[!n&&!r&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(Q,{className:"w-16 h-16 text-green-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Ready to Plan Your Meals?"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Let AI create a personalized ",i,"-day meal plan based on your preferences and nutritional needs."]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Planning with your preferences:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm justify-center",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["👨‍🍳 ",a.cookingSkillLevel]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["⏱️ ",a.timeAvailable,"min max"]}),a.dietaryRestrictions.length>0&&e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["🥗 ",a.dietaryRestrictions[0],a.dietaryRestrictions.length>1&&" +more"]})]})]}),e.jsxs("button",{onClick:o,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(U,{className:"w-5 h-5 inline mr-2"}),"Generate ",i,"-Day AI Meal Plan"]})]}),r&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-12 h-12 text-green-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"AI is crafting your personalized meal plan..."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This may take a moment"})]}),e.jsx(_,{children:n&&!r&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-green-500"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["Your ",i,"-Day Meal Plan is Ready!"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[e.jsx(Qe,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[e.jsx(me,{className:"w-4 h-4"}),"Regenerate"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-green-500"}),"Your Meal Plan"]}),e.jsx("div",{className:"space-y-4",children:(()=>{console.log("🔍 Meal plan content to parse:",n.mealPlan);let f=n.mealPlan;f=f.replace(/^[{}\s]*"?mealplan"?\s*:?\s*"?/i,""),f=f.replace(/["{}]*$/,""),f=f.replace(/\\n/g,`
`),f=f.replace(/\\"/g,'"'),console.log("🧹 Cleaned meal plan:",f);const d=f.split(/\n\s*\n|\n(?=Day\s+\d+)/i).filter(m=>m.trim());return d.length===0||d.every(m=>m.length<10)?e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Your Meal Plan"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:f||"AI is generating your meal plan..."})]}):d.map((m,c)=>{const u=m.split(`
`).filter(j=>j.trim());let k=`Day ${c+1}`,E=u;const F=u.find(j=>/day\s+\d+/i.test(j));F&&(k=F.trim(),E=u.filter(j=>j!==F));const A=E.filter(j=>j.includes(":")&&(j.toLowerCase().includes("breakfast")||j.toLowerCase().includes("lunch")||j.toLowerCase().includes("dinner")||j.toLowerCase().includes("snack")));return A.length===0?e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:c*.1},className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:c+1}),k]}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 text-sm",children:E.join(`
`)})})]},c):e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:c*.1},className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:c+1}),k]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map((j,$)=>{const[P,B]=j.split(":").map(S=>S.trim()),h={Breakfast:"🌅",Lunch:"☀️",Dinner:"🌙",Snack:"🍎"};return e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:h[P]||"🍽️"}),e.jsx("span",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:P})]}),e.jsx("p",{className:"text-gray-800 font-medium",children:B||j})]},$)})})]},c)})})()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5 text-blue-500"}),"Why This Plan Works"]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 space-y-4",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.explanation}),e.jsxs("div",{className:"border-t border-blue-200 pt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Quick Tips:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Prep ingredients on Sunday for the week"}),e.jsx("li",{children:"• Cook grains and proteins in batches"}),e.jsx("li",{children:"• Keep healthy snacks readily available"}),e.jsx("li",{children:"• Stay hydrated throughout the day"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center",children:[e.jsx(ae,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Time Efficient"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Meals designed for ",a.timeAvailable,"min cooking time"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-center",children:[e.jsx(Pe,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Nutritionally Balanced"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Optimized for your dietary preferences"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 text-center",children:[e.jsx(U,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"AI Personalized"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tailored to your cooking skill level"})]})]})]})})]})]})},kt=()=>{const[s,a]=x.useState({query:""}),[r,n]=x.useState(null),[t,i]=x.useState(!1),[l,o]=x.useState("search"),[g,f]=x.useState([]),[d,m]=x.useState(!1),[c,u]=x.useState(!1),[k,E]=x.useState(!1),{mealPlans:F}=is(),A=N=>{a(N)},j=N=>{n(N)},$=()=>{n(null)},P=(N,O,C)=>{console.log("Added recipe to meal plan:",{recipe:N.title,date:O,mealType:C})},B=N=>{m(!0)},h=N=>{u(!0)},S=N=>{f(N)},M=async N=>{try{E(!0);const p=(await rs({query:N})).results,w=[...g];p.forEach(b=>{w.find(D=>D.id===b.id)||w.push(b)}),f(w),console.log(`🔍 Added ${p.length} new recipes from search: "${N}"`)}catch(O){console.error("Error searching for recipes:",O)}finally{E(!1)}},L=N=>{const O={id:Date.now(),title:N.title,image:"https://via.placeholder.com/312x231/8B5CF6/FFFFFF?text=AI+Recipe",imageType:"jpg",readyInMinutes:N.cookingTime,servings:4,spoonacularScore:85,healthScore:75,pricePerServing:250,cuisines:[N.cuisine],dishTypes:[],diets:N.dietaryTags,occasions:[],analyzedInstructions:[{name:"",steps:N.instructions.map((C,p)=>({number:p+1,step:C,ingredients:[],equipment:[]}))}],extendedIngredients:N.ingredients.map((C,p)=>({id:p+1,aisle:"",image:"",consistency:"",name:C,nameClean:C,original:C,originalName:C,amount:1,unit:"",meta:[],measures:{us:{amount:1,unitShort:"",unitLong:""},metric:{amount:1,unitShort:"",unitLong:""}}})),summary:N.description,instructions:N.instructions.map((C,p)=>`${p+1}. ${C}`).join(`
`)};n(O)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[e.jsx(xt,{}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(ht,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold gradient-text mb-4",children:"AI Recipe Finder & Meal Planner"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Discover delicious recipes, plan your meals, and track your nutrition all in one place"})]}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-white/80 backdrop-blur-md rounded-2xl border border-white/20 shadow-lg flex-wrap",children:[e.jsx("button",{onClick:()=>o("search"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${l==="search"?"bg-primary text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:"🔍 Search Recipes"}),e.jsxs("button",{onClick:()=>o("ai-recommendations"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${l==="ai-recommendations"?"bg-purple-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(U,{className:"w-4 h-4"}),"AI Recommendations"]}),e.jsxs("button",{onClick:()=>o("ai-meal-planner"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${l==="ai-meal-planner"?"bg-green-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(Q,{className:"w-4 h-4"}),"AI Meal Planner"]}),e.jsxs("button",{onClick:()=>o("planning"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${l==="planning"?"bg-primary text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(Q,{className:"w-4 h-4"}),"Meal Planning"]})]})}),e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:[l==="search"&&e.jsxs(e.Fragment,{children:[e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-4xl mx-auto mb-8",children:[e.jsx(Hs,{onSearch:A,onToggleFilters:()=>i(!t),showFilters:t}),e.jsx(Vs,{isOpen:t,filters:s,onFiltersChange:a})]}),e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},children:e.jsx(nt,{filters:s,onRecipeSelect:j,onRecipeResults:S})})]}),l==="planning"&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(ut,{recipes:g,onAddRecipe:P,onGenerateShoppingList:B,onViewNutrition:h,onNavigateToSearch:()=>o("search"),onSearchRecipes:M,onRecipeSelect:j,isSearching:k})}),l==="ai-recommendations"&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(vt,{onRecipeSelect:L})}),l==="ai-meal-planner"&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(wt,{})})]},l),l==="search"&&g.length>0&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"fixed bottom-8 right-8 flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>o("planning"),className:"flex items-center gap-2 px-4 py-3 bg-primary text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"Go to Meal Planning",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Plan Meals"})]}),F.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>B(),className:"flex items-center gap-2 px-4 py-3 bg-green-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"Generate Shopping List",children:[e.jsx(de,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Shopping"})]}),e.jsxs("button",{onClick:()=>h(),className:"flex items-center gap-2 px-4 py-3 bg-blue-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"View Nutrition Dashboard",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Nutrition"})]})]})]})]}),r&&e.jsx(mt,{recipe:r,onClose:$}),e.jsx(ft,{isOpen:d,onClose:()=>m(!1),mealPlans:F}),e.jsx(jt,{isOpen:c,onClose:()=>u(!1),mealPlans:F})]})]})};class St extends x.Component{state={hasError:!1};static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,r){console.error("Uncaught error:",a,r)}handleReset=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Rs,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(me,{className:"w-5 h-5"}),"Try Again"]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-medium",children:"Reload Page"})]})]})}):this.props.children}}const Ct=new ps({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1}}});Ne.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(St,{children:e.jsx(us,{client:Ct,children:e.jsx(kt,{})})})}));
