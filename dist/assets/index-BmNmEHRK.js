import{j as e,u as ea,O as ta,Q as sa,a as aa}from"./api-C8vC9EAg.js";import{a as ra,r as p,R as Pt}from"./react-DnQQq7lD.js";import{S as ks,X as ge,F as na,A as ie,m as w,H as ct,C as Re,U as Ye,D as As,a as Ts,b as ia,c as ut,d as ne,M as Es,P as Ot,e as Cs,L as Me,G as la,f as je,g as oa,h as ca,i as dt,B as Is,j as Ms,k as da,l as ma,T as St,n as ua,o as pa,p as ha,R as mt,q as ga,r as ts,I as xa,s as fa}from"./ui-BrE_19v1.js";import{u as ya,a as ba,b as ja,c as ss,D as va,r as Na,d as wa,e as Sa,s as ka,K as Aa,P as Ta}from"./dnd-DVjvMNbv.js";import{s as Rs,a as lt,f as me,i as Ea,b as Ca,d as Ia}from"./utils-DbeeY_R7.js";import{R as kt,P as Ma,a as Ra,C as La,T as At,B as _a,b as as,X as rs,Y as ns,c as is,L as Da,d as ls}from"./charts-CyjR7tow.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();var Lt={},os=ra;Lt.createRoot=os.createRoot,Lt.hydrateRoot=os.hydrateRoot;const Pa=({onSearch:t,onToggleFilters:s,showFilters:n})=>{const[i,r]=p.useState(""),l=c=>{c.preventDefault(),t({query:i})},o=()=>{r(""),t({query:""})};return e.jsx("div",{className:"w-full",children:e.jsx("form",{onSubmit:l,className:"relative",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"absolute left-4 z-10",children:e.jsx(ks,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",value:i,onChange:c=>r(c.target.value),placeholder:"Search for recipes by ingredients or name...",className:"w-full pl-12 pr-24 py-4 rounded-2xl bg-white/80 backdrop-blur-md border border-white/20 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none text-lg transition-all shadow-lg"}),e.jsxs("div",{className:"absolute right-2 flex items-center gap-2",children:[i&&e.jsx("button",{type:"button",onClick:o,className:"p-2 rounded-xl hover:bg-gray-100 transition-colors",children:e.jsx(ge,{className:"w-5 h-5 text-gray-400"})}),e.jsx("button",{type:"button",onClick:s,className:`p-2 rounded-xl transition-colors ${n?"bg-primary text-white":"hover:bg-gray-100 text-gray-400"}`,children:e.jsx(na,{className:"w-5 h-5"})}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Search"})]})]})})})},Oa=({isOpen:t,filters:s,onFiltersChange:n})=>{const i=(r,l)=>{n({...s,[r]:l===""?void 0:l})};return e.jsx(ie,{children:t&&e.jsx(w.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl border border-white/20 p-6 shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 gradient-text",children:"Advanced Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diet"}),e.jsxs("select",{value:s.diet||"",onChange:r=>i("diet",r.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Diet"}),e.jsx("option",{value:"vegetarian",children:"Vegetarian"}),e.jsx("option",{value:"vegan",children:"Vegan"}),e.jsx("option",{value:"gluten free",children:"Gluten Free"}),e.jsx("option",{value:"ketogenic",children:"Keto"}),e.jsx("option",{value:"paleo",children:"Paleo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cuisine"}),e.jsxs("select",{value:s.cuisine||"",onChange:r=>i("cuisine",r.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Cuisine"}),e.jsx("option",{value:"american",children:"American"}),e.jsx("option",{value:"italian",children:"Italian"}),e.jsx("option",{value:"mexican",children:"Mexican"}),e.jsx("option",{value:"chinese",children:"Chinese"}),e.jsx("option",{value:"indian",children:"Indian"}),e.jsx("option",{value:"mediterranean",children:"Mediterranean"}),e.jsx("option",{value:"thai",children:"Thai"}),e.jsx("option",{value:"french",children:"French"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meal Type"}),e.jsxs("select",{value:s.type||"",onChange:r=>i("type",r.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Any Type"}),e.jsx("option",{value:"breakfast",children:"Breakfast"}),e.jsx("option",{value:"lunch",children:"Lunch"}),e.jsx("option",{value:"dinner",children:"Dinner"}),e.jsx("option",{value:"dessert",children:"Dessert"}),e.jsx("option",{value:"snack",children:"Snack"}),e.jsx("option",{value:"appetizer",children:"Appetizer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Cooking Time (min)"}),e.jsx("input",{type:"number",value:s.maxReadyTime||"",onChange:r=>i("maxReadyTime",r.target.value?parseInt(r.target.value):void 0),placeholder:"e.g. 30",className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intolerances"}),e.jsxs("select",{value:s.intolerances||"",onChange:r=>i("intolerances",r.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"No Restrictions"}),e.jsx("option",{value:"dairy",children:"Dairy Free"}),e.jsx("option",{value:"egg",children:"Egg Free"}),e.jsx("option",{value:"gluten",children:"Gluten Free"}),e.jsx("option",{value:"peanut",children:"Peanut Free"}),e.jsx("option",{value:"sesame",children:"Sesame Free"}),e.jsx("option",{value:"seafood",children:"Seafood Free"}),e.jsx("option",{value:"shellfish",children:"Shellfish Free"}),e.jsx("option",{value:"soy",children:"Soy Free"}),e.jsx("option",{value:"tree nut",children:"Tree Nut Free"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:s.sort||"",onChange:r=>i("sort",r.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Relevance"}),e.jsx("option",{value:"popularity",children:"Popularity"}),e.jsx("option",{value:"healthiness",children:"Healthiness"}),e.jsx("option",{value:"price",children:"Price"}),e.jsx("option",{value:"time",children:"Cooking Time"}),e.jsx("option",{value:"random",children:"Random"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>n({query:s.query}),className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Clear Filters"})})]})})})},Ft="recipe-finder-favorites",pt="recipe-finder-meal-plans",ht="recipe-finder-shopping-lists",We=()=>{try{const t=localStorage.getItem(Ft);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading favorites:",t),[]}},Ls=t=>{try{const s=We();if(!s.some(i=>i.id===t.id)){const i=[...s,t];localStorage.setItem(Ft,JSON.stringify(i))}}catch(s){console.error("Error adding to favorites:",s)}},_s=t=>{try{const n=We().filter(i=>i.id!==t);localStorage.setItem(Ft,JSON.stringify(n))}catch(s){console.error("Error removing from favorites:",s)}},Ds=t=>{try{return We().some(n=>n.id===t)}catch(s){return console.error("Error checking favorite status:",s),!1}},Ke=()=>{try{const t=localStorage.getItem(pt);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading meal plans:",t),[]}},Fa=t=>{try{const s=Ke(),n={...t,id:Date.now().toString()+Math.random().toString(36).substr(2,9)},i=[...s,n];return localStorage.setItem(pt,JSON.stringify(i)),n.id}catch(s){return console.error("Error adding meal plan:",s),""}},cs=(t,s)=>{try{const i=Ke().map(r=>r.id===t?{...r,...s}:r);localStorage.setItem(pt,JSON.stringify(i))}catch(n){console.error("Error updating meal plan:",n)}},za=t=>{try{const n=Ke().filter(i=>i.id!==t);localStorage.setItem(pt,JSON.stringify(n))}catch(s){console.error("Error removing meal plan:",s)}},$a=(t,s)=>{try{return Ke().filter(i=>i.date>=t&&i.date<=s)}catch(n){return console.error("Error filtering meal plans:",n),[]}},Ie=()=>{try{const t=localStorage.getItem(ht);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading shopping lists:",t),[]}},Ba=(t,s)=>{try{const n=new Map;s.forEach(c=>{c.recipe.extendedIngredients.forEach(g=>{const v=g.nameClean||g.name,f=n.get(v);f?(f.amount+=g.amount*c.servings,f.recipes.includes(c.recipe.title)||f.recipes.push(c.recipe.title)):n.set(v,{amount:g.amount*c.servings,unit:g.unit,recipes:[c.recipe.title],aisle:g.aisle})})});const i=Array.from(n.entries()).map(([c,g])=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),ingredient:c,amount:Math.round(g.amount*100)/100,unit:g.unit,checked:!1,recipes:g.recipes,aisle:g.aisle})),r={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:t,dateCreated:new Date().toISOString(),items:i,totalItems:i.length,checkedItems:0},o=[...Ie(),r];return localStorage.setItem(ht,JSON.stringify(o)),r.id}catch(n){return console.error("Error creating shopping list:",n),""}},Ua=(t,s)=>{try{const i=Ie().map(r=>r.id===t?{...r,...s}:r);localStorage.setItem(ht,JSON.stringify(i))}catch(n){console.error("Error updating shopping list:",n)}},Ha=(t,s)=>{try{const i=Ie().map(r=>{if(r.id===t){const l=r.items.map(c=>c.id===s?{...c,checked:!c.checked}:c),o=l.filter(c=>c.checked).length;return{...r,items:l,checkedItems:o}}return r});localStorage.setItem(ht,JSON.stringify(i))}catch(n){console.error("Error toggling shopping list item:",n)}};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Ps,setPrototypeOf:ds,isFrozen:Wa,getPrototypeOf:Ga,getOwnPropertyDescriptor:Ya}=Object;let{freeze:se,seal:le,create:Os}=Object,{apply:_t,construct:Dt}=typeof Reflect<"u"&&Reflect;se||(se=function(s){return s});le||(le=function(s){return s});_t||(_t=function(s,n,i){return s.apply(n,i)});Dt||(Dt=function(s,n){return new s(...n)});const nt=ae(Array.prototype.forEach),Ka=ae(Array.prototype.lastIndexOf),ms=ae(Array.prototype.pop),ze=ae(Array.prototype.push),Ja=ae(Array.prototype.splice),ot=ae(String.prototype.toLowerCase),Tt=ae(String.prototype.toString),us=ae(String.prototype.match),$e=ae(String.prototype.replace),qa=ae(String.prototype.indexOf),Va=ae(String.prototype.trim),ue=ae(Object.prototype.hasOwnProperty),te=ae(RegExp.prototype.test),Be=Xa(TypeError);function ae(t){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return _t(t,s,i)}}function Xa(t){return function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return Dt(t,n)}}function I(t,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ot;ds&&ds(t,null);let i=s.length;for(;i--;){let r=s[i];if(typeof r=="string"){const l=n(r);l!==r&&(Wa(s)||(s[i]=l),r=l)}t[r]=!0}return t}function Qa(t){for(let s=0;s<t.length;s++)ue(t,s)||(t[s]=null);return t}function be(t){const s=Os(null);for(const[n,i]of Ps(t))ue(t,n)&&(Array.isArray(i)?s[n]=Qa(i):i&&typeof i=="object"&&i.constructor===Object?s[n]=be(i):s[n]=i);return s}function Ue(t,s){for(;t!==null;){const i=Ya(t,s);if(i){if(i.get)return ae(i.get);if(typeof i.value=="function")return ae(i.value)}t=Ga(t)}function n(){return null}return n}const ps=se(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Et=se(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ct=se(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Za=se(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),It=se(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),er=se(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hs=se(["#text"]),gs=se(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mt=se(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xs=se(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),it=se(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tr=le(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sr=le(/<%[\w\W]*|[\w\W]*%>/gm),ar=le(/\$\{[\w\W]*/gm),rr=le(/^data-[\-\w.\u00B7-\uFFFF]+$/),nr=le(/^aria-[\-\w]+$/),Fs=le(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ir=le(/^(?:\w+script|data):/i),lr=le(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zs=le(/^html$/i),or=le(/^[a-z][.\w]*(-[.\w]+)+$/i);var fs=Object.freeze({__proto__:null,ARIA_ATTR:nr,ATTR_WHITESPACE:lr,CUSTOM_ELEMENT:or,DATA_ATTR:rr,DOCTYPE_NAME:zs,ERB_EXPR:sr,IS_ALLOWED_URI:Fs,IS_SCRIPT_OR_DATA:ir,MUSTACHE_EXPR:tr,TMPLIT_EXPR:ar});const He={element:1,text:3,progressingInstruction:7,comment:8,document:9},cr=function(){return typeof window>"u"?null:window},dr=function(s,n){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(i=n.getAttribute(r));const l="dompurify"+(i?"#"+i:"");try{return s.createPolicy(l,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},ys=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function $s(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cr();const s=N=>$s(N);if(s.version="3.2.6",s.removed=[],!t||!t.document||t.document.nodeType!==He.document||!t.Element)return s.isSupported=!1,s;let{document:n}=t;const i=n,r=i.currentScript,{DocumentFragment:l,HTMLTemplateElement:o,Node:c,Element:g,NodeFilter:v,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:u,trustedTypes:j}=t,E=g.prototype,B=Ue(E,"cloneNode"),$=Ue(E,"remove"),P=Ue(E,"nextSibling"),S=Ue(E,"childNodes"),K=Ue(E,"parentNode");if(typeof o=="function"){const N=n.createElement("template");N.content&&N.content.ownerDocument&&(n=N.content.ownerDocument)}let C,G="";const{implementation:D,createNodeIterator:y,createDocumentFragment:M,getElementsByTagName:U}=n,{importNode:A}=i;let h=ys();s.isSupported=typeof Ps=="function"&&typeof K=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:k,ERB_EXPR:x,TMPLIT_EXPR:R,DATA_ATTR:_,ARIA_ATTR:pe,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:ee,CUSTOM_ELEMENT:ve}=fs;let{IS_ALLOWED_URI:qe}=fs,H=null;const Ve=I({},[...ps,...Et,...Ct,...It,...hs]);let W=null;const Xe=I({},[...gs,...Mt,...xs,...it]);let z=Object.seal(Os(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ne=null,we=null,Qe=!0,Se=!0,_e=!1,Ze=!0,T=!1,L=!0,O=!1,q=!1,oe=!1,V=!1,ce=!1,de=!1,De=!0,et=!1;const Ys="user-content-";let ft=!0,Pe=!1,ke={},Ae=null;const zt=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $t=null;const Bt=I({},["audio","video","img","source","image","track"]);let yt=null;const Ut=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",st="http://www.w3.org/2000/svg",xe="http://www.w3.org/1999/xhtml";let Te=xe,bt=!1,jt=null;const Ks=I({},[tt,st,xe],Tt);let at=I({},["mi","mo","mn","ms","mtext"]),rt=I({},["annotation-xml"]);const Js=I({},["title","style","font","a","script"]);let Oe=null;const qs=["application/xhtml+xml","text/html"],Vs="text/html";let J=null,Ee=null;const Xs=n.createElement("form"),Ht=function(a){return a instanceof RegExp||a instanceof Function},vt=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ee&&Ee===a)){if((!a||typeof a!="object")&&(a={}),a=be(a),Oe=qs.indexOf(a.PARSER_MEDIA_TYPE)===-1?Vs:a.PARSER_MEDIA_TYPE,J=Oe==="application/xhtml+xml"?Tt:ot,H=ue(a,"ALLOWED_TAGS")?I({},a.ALLOWED_TAGS,J):Ve,W=ue(a,"ALLOWED_ATTR")?I({},a.ALLOWED_ATTR,J):Xe,jt=ue(a,"ALLOWED_NAMESPACES")?I({},a.ALLOWED_NAMESPACES,Tt):Ks,yt=ue(a,"ADD_URI_SAFE_ATTR")?I(be(Ut),a.ADD_URI_SAFE_ATTR,J):Ut,$t=ue(a,"ADD_DATA_URI_TAGS")?I(be(Bt),a.ADD_DATA_URI_TAGS,J):Bt,Ae=ue(a,"FORBID_CONTENTS")?I({},a.FORBID_CONTENTS,J):zt,Ne=ue(a,"FORBID_TAGS")?I({},a.FORBID_TAGS,J):be({}),we=ue(a,"FORBID_ATTR")?I({},a.FORBID_ATTR,J):be({}),ke=ue(a,"USE_PROFILES")?a.USE_PROFILES:!1,Qe=a.ALLOW_ARIA_ATTR!==!1,Se=a.ALLOW_DATA_ATTR!==!1,_e=a.ALLOW_UNKNOWN_PROTOCOLS||!1,Ze=a.ALLOW_SELF_CLOSE_IN_ATTR!==!1,T=a.SAFE_FOR_TEMPLATES||!1,L=a.SAFE_FOR_XML!==!1,O=a.WHOLE_DOCUMENT||!1,V=a.RETURN_DOM||!1,ce=a.RETURN_DOM_FRAGMENT||!1,de=a.RETURN_TRUSTED_TYPE||!1,oe=a.FORCE_BODY||!1,De=a.SANITIZE_DOM!==!1,et=a.SANITIZE_NAMED_PROPS||!1,ft=a.KEEP_CONTENT!==!1,Pe=a.IN_PLACE||!1,qe=a.ALLOWED_URI_REGEXP||Fs,Te=a.NAMESPACE||xe,at=a.MATHML_TEXT_INTEGRATION_POINTS||at,rt=a.HTML_INTEGRATION_POINTS||rt,z=a.CUSTOM_ELEMENT_HANDLING||{},a.CUSTOM_ELEMENT_HANDLING&&Ht(a.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=a.CUSTOM_ELEMENT_HANDLING.tagNameCheck),a.CUSTOM_ELEMENT_HANDLING&&Ht(a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),a.CUSTOM_ELEMENT_HANDLING&&typeof a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),T&&(Se=!1),ce&&(V=!0),ke&&(H=I({},hs),W=[],ke.html===!0&&(I(H,ps),I(W,gs)),ke.svg===!0&&(I(H,Et),I(W,Mt),I(W,it)),ke.svgFilters===!0&&(I(H,Ct),I(W,Mt),I(W,it)),ke.mathMl===!0&&(I(H,It),I(W,xs),I(W,it))),a.ADD_TAGS&&(H===Ve&&(H=be(H)),I(H,a.ADD_TAGS,J)),a.ADD_ATTR&&(W===Xe&&(W=be(W)),I(W,a.ADD_ATTR,J)),a.ADD_URI_SAFE_ATTR&&I(yt,a.ADD_URI_SAFE_ATTR,J),a.FORBID_CONTENTS&&(Ae===zt&&(Ae=be(Ae)),I(Ae,a.FORBID_CONTENTS,J)),ft&&(H["#text"]=!0),O&&I(H,["html","head","body"]),H.table&&(I(H,["tbody"]),delete Ne.tbody),a.TRUSTED_TYPES_POLICY){if(typeof a.TRUSTED_TYPES_POLICY.createHTML!="function")throw Be('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof a.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Be('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=a.TRUSTED_TYPES_POLICY,G=C.createHTML("")}else C===void 0&&(C=dr(j,r)),C!==null&&typeof G=="string"&&(G=C.createHTML(""));se&&se(a),Ee=a}},Wt=I({},[...Et,...Ct,...Za]),Gt=I({},[...It,...er]),Qs=function(a){let d=K(a);(!d||!d.tagName)&&(d={namespaceURI:Te,tagName:"template"});const b=ot(a.tagName),F=ot(d.tagName);return jt[a.namespaceURI]?a.namespaceURI===st?d.namespaceURI===xe?b==="svg":d.namespaceURI===tt?b==="svg"&&(F==="annotation-xml"||at[F]):!!Wt[b]:a.namespaceURI===tt?d.namespaceURI===xe?b==="math":d.namespaceURI===st?b==="math"&&rt[F]:!!Gt[b]:a.namespaceURI===xe?d.namespaceURI===st&&!rt[F]||d.namespaceURI===tt&&!at[F]?!1:!Gt[b]&&(Js[b]||!Wt[b]):!!(Oe==="application/xhtml+xml"&&jt[a.namespaceURI]):!1},he=function(a){ze(s.removed,{element:a});try{K(a).removeChild(a)}catch{$(a)}},Ce=function(a,d){try{ze(s.removed,{attribute:d.getAttributeNode(a),from:d})}catch{ze(s.removed,{attribute:null,from:d})}if(d.removeAttribute(a),a==="is")if(V||ce)try{he(d)}catch{}else try{d.setAttribute(a,"")}catch{}},Yt=function(a){let d=null,b=null;if(oe)a="<remove></remove>"+a;else{const Y=us(a,/^[\r\n\t ]+/);b=Y&&Y[0]}Oe==="application/xhtml+xml"&&Te===xe&&(a='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+a+"</body></html>");const F=C?C.createHTML(a):a;if(Te===xe)try{d=new u().parseFromString(F,Oe)}catch{}if(!d||!d.documentElement){d=D.createDocument(Te,"template",null);try{d.documentElement.innerHTML=bt?G:F}catch{}}const Q=d.body||d.documentElement;return a&&b&&Q.insertBefore(n.createTextNode(b),Q.childNodes[0]||null),Te===xe?U.call(d,O?"html":"body")[0]:O?d.documentElement:Q},Kt=function(a){return y.call(a.ownerDocument||a,a,v.SHOW_ELEMENT|v.SHOW_COMMENT|v.SHOW_TEXT|v.SHOW_PROCESSING_INSTRUCTION|v.SHOW_CDATA_SECTION,null)},Nt=function(a){return a instanceof m&&(typeof a.nodeName!="string"||typeof a.textContent!="string"||typeof a.removeChild!="function"||!(a.attributes instanceof f)||typeof a.removeAttribute!="function"||typeof a.setAttribute!="function"||typeof a.namespaceURI!="string"||typeof a.insertBefore!="function"||typeof a.hasChildNodes!="function")},Jt=function(a){return typeof c=="function"&&a instanceof c};function fe(N,a,d){nt(N,b=>{b.call(s,a,d,Ee)})}const qt=function(a){let d=null;if(fe(h.beforeSanitizeElements,a,null),Nt(a))return he(a),!0;const b=J(a.nodeName);if(fe(h.uponSanitizeElement,a,{tagName:b,allowedTags:H}),L&&a.hasChildNodes()&&!Jt(a.firstElementChild)&&te(/<[/\w!]/g,a.innerHTML)&&te(/<[/\w!]/g,a.textContent)||a.nodeType===He.progressingInstruction||L&&a.nodeType===He.comment&&te(/<[/\w]/g,a.data))return he(a),!0;if(!H[b]||Ne[b]){if(!Ne[b]&&Xt(b)&&(z.tagNameCheck instanceof RegExp&&te(z.tagNameCheck,b)||z.tagNameCheck instanceof Function&&z.tagNameCheck(b)))return!1;if(ft&&!Ae[b]){const F=K(a)||a.parentNode,Q=S(a)||a.childNodes;if(Q&&F){const Y=Q.length;for(let re=Y-1;re>=0;--re){const ye=B(Q[re],!0);ye.__removalCount=(a.__removalCount||0)+1,F.insertBefore(ye,P(a))}}}return he(a),!0}return a instanceof g&&!Qs(a)||(b==="noscript"||b==="noembed"||b==="noframes")&&te(/<\/no(script|embed|frames)/i,a.innerHTML)?(he(a),!0):(T&&a.nodeType===He.text&&(d=a.textContent,nt([k,x,R],F=>{d=$e(d,F," ")}),a.textContent!==d&&(ze(s.removed,{element:a.cloneNode()}),a.textContent=d)),fe(h.afterSanitizeElements,a,null),!1)},Vt=function(a,d,b){if(De&&(d==="id"||d==="name")&&(b in n||b in Xs))return!1;if(!(Se&&!we[d]&&te(_,d))){if(!(Qe&&te(pe,d))){if(!W[d]||we[d]){if(!(Xt(a)&&(z.tagNameCheck instanceof RegExp&&te(z.tagNameCheck,a)||z.tagNameCheck instanceof Function&&z.tagNameCheck(a))&&(z.attributeNameCheck instanceof RegExp&&te(z.attributeNameCheck,d)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(d))||d==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&te(z.tagNameCheck,b)||z.tagNameCheck instanceof Function&&z.tagNameCheck(b))))return!1}else if(!yt[d]){if(!te(qe,$e(b,ee,""))){if(!((d==="src"||d==="xlink:href"||d==="href")&&a!=="script"&&qa(b,"data:")===0&&$t[a])){if(!(_e&&!te(X,$e(b,ee,"")))){if(b)return!1}}}}}}return!0},Xt=function(a){return a!=="annotation-xml"&&us(a,ve)},Qt=function(a){fe(h.beforeSanitizeAttributes,a,null);const{attributes:d}=a;if(!d||Nt(a))return;const b={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let F=d.length;for(;F--;){const Q=d[F],{name:Y,namespaceURI:re,value:ye}=Q,Fe=J(Y),wt=ye;let Z=Y==="value"?wt:Va(wt);if(b.attrName=Fe,b.attrValue=Z,b.keepAttr=!0,b.forceKeepAttr=void 0,fe(h.uponSanitizeAttribute,a,b),Z=b.attrValue,et&&(Fe==="id"||Fe==="name")&&(Ce(Y,a),Z=Ys+Z),L&&te(/((--!?|])>)|<\/(style|title)/i,Z)){Ce(Y,a);continue}if(b.forceKeepAttr)continue;if(!b.keepAttr){Ce(Y,a);continue}if(!Ze&&te(/\/>/i,Z)){Ce(Y,a);continue}T&&nt([k,x,R],es=>{Z=$e(Z,es," ")});const Zt=J(a.nodeName);if(!Vt(Zt,Fe,Z)){Ce(Y,a);continue}if(C&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!re)switch(j.getAttributeType(Zt,Fe)){case"TrustedHTML":{Z=C.createHTML(Z);break}case"TrustedScriptURL":{Z=C.createScriptURL(Z);break}}if(Z!==wt)try{re?a.setAttributeNS(re,Y,Z):a.setAttribute(Y,Z),Nt(a)?he(a):ms(s.removed)}catch{Ce(Y,a)}}fe(h.afterSanitizeAttributes,a,null)},Zs=function N(a){let d=null;const b=Kt(a);for(fe(h.beforeSanitizeShadowDOM,a,null);d=b.nextNode();)fe(h.uponSanitizeShadowNode,d,null),qt(d),Qt(d),d.content instanceof l&&N(d.content);fe(h.afterSanitizeShadowDOM,a,null)};return s.sanitize=function(N){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=null,b=null,F=null,Q=null;if(bt=!N,bt&&(N="<!-->"),typeof N!="string"&&!Jt(N))if(typeof N.toString=="function"){if(N=N.toString(),typeof N!="string")throw Be("dirty is not a string, aborting")}else throw Be("toString is not a function");if(!s.isSupported)return N;if(q||vt(a),s.removed=[],typeof N=="string"&&(Pe=!1),Pe){if(N.nodeName){const ye=J(N.nodeName);if(!H[ye]||Ne[ye])throw Be("root node is forbidden and cannot be sanitized in-place")}}else if(N instanceof c)d=Yt("<!---->"),b=d.ownerDocument.importNode(N,!0),b.nodeType===He.element&&b.nodeName==="BODY"||b.nodeName==="HTML"?d=b:d.appendChild(b);else{if(!V&&!T&&!O&&N.indexOf("<")===-1)return C&&de?C.createHTML(N):N;if(d=Yt(N),!d)return V?null:de?G:""}d&&oe&&he(d.firstChild);const Y=Kt(Pe?N:d);for(;F=Y.nextNode();)qt(F),Qt(F),F.content instanceof l&&Zs(F.content);if(Pe)return N;if(V){if(ce)for(Q=M.call(d.ownerDocument);d.firstChild;)Q.appendChild(d.firstChild);else Q=d;return(W.shadowroot||W.shadowrootmode)&&(Q=A.call(i,Q,!0)),Q}let re=O?d.outerHTML:d.innerHTML;return O&&H["!doctype"]&&d.ownerDocument&&d.ownerDocument.doctype&&d.ownerDocument.doctype.name&&te(zs,d.ownerDocument.doctype.name)&&(re="<!DOCTYPE "+d.ownerDocument.doctype.name+`>
`+re),T&&nt([k,x,R],ye=>{re=$e(re,ye," ")}),C&&de?C.createHTML(re):re},s.setConfig=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vt(N),q=!0},s.clearConfig=function(){Ee=null,q=!1},s.isValidAttribute=function(N,a,d){Ee||vt({});const b=J(N),F=J(a);return Vt(b,F,d)},s.addHook=function(N,a){typeof a=="function"&&ze(h[N],a)},s.removeHook=function(N,a){if(a!==void 0){const d=Ka(h[N],a);return d===-1?void 0:Ja(h[N],d,1)[0]}return ms(h[N])},s.removeHooks=function(N){h[N]=[]},s.removeAllHooks=function(){h=ys()},s}var Bs=$s();const mr=(t,s)=>{const n={ALLOWED_TAGS:["p","br","strong","em","u","i","b","ul","ol","li","a"],ALLOWED_ATTR:["href","target"],ALLOW_DATA_ATTR:!1,FORCE_BODY:!0},i=s?{...n,...s}:n;return Bs.sanitize(t,i)},ur=t=>Bs.sanitize(t,{ALLOWED_TAGS:[]}),bs=t=>mr(t,{ALLOWED_TAGS:["p","br","strong","em","ol","ul","li"],ALLOWED_ATTR:[]}),Us=({recipe:t,onSelect:s})=>{const[n,i]=p.useState(Ds(t.id)),r=o=>{o.stopPropagation(),n?_s(t.id):Ls(t),i(!n)},l=o=>`$${(o/100).toFixed(2)}`;return e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-8},transition:{duration:.3},className:"bg-white rounded-3xl overflow-hidden shadow-lg hover:shadow-xl transition-all cursor-pointer card-hover",onClick:()=>s(t),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-48 object-cover"}),e.jsx("button",{onClick:r,className:`absolute top-4 right-4 p-2 rounded-full backdrop-blur-md transition-all ${n?"bg-red-500 text-white shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,children:e.jsx(ct,{className:`w-5 h-5 ${n?"fill-current":""}`})}),t.diets.length>0&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:t.diets[0]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.readyInMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.servings," servings"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(As,{className:"w-4 h-4"}),e.jsx("span",{children:l(t.pricePerServing)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ts,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm font-medium",children:(t.spoonacularScore/20).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Health Score: ",t.healthScore]})]})]}),t.cuisines.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:t.cuisines.slice(0,2).map((o,c)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:o},c))}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3",children:ur(t.summary)})]})]})},pr=({type:t="card",count:s=12})=>{const n=()=>e.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-lg",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-lg animate-pulse w-3/4"}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-16"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-20"})]}),e.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-lg animate-pulse mt-4"})]})]}),i=()=>e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsx("div",{className:"space-y-4",children:Array.from({length:6}).map((c,g)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-2/3"})]}),e.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-full animate-pulse"})]},g))})}),r=()=>e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"h-8 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse w-64"})}),e.jsx("div",{className:"grid grid-cols-8 gap-4",children:Array.from({length:32}).map((c,g)=>e.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-2xl animate-pulse"},g))})]}),l=()=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse w-48"})}),e.jsx("div",{className:"h-64 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded-xl animate-pulse"})]}),o=()=>{switch(t){case"card":return e.jsx(w.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:Array.from({length:s}).map((c,g)=>e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:g*.05},children:n()},g))});case"list":return e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:i()});case"calendar":return e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:r()});case"chart":return e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:4}).map((c,g)=>e.jsx(w.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:g*.1},children:l()},g))});default:return null}};return e.jsx(e.Fragment,{children:o()})},Ge="37432ff1ba2b4014bbff9473ac02e389",Hs="https://api.spoonacular.com/recipes";console.log("🔑 API Configuration:",{hasSpoonacularKey:!0,keyLength:Ge?.length||0,keyPreview:"***masked***"});const hr="https://www.themealdb.com/api/json/v1/1",Ws=async t=>{try{console.log("🚀 Using Spoonacular API with key");const s=new URLSearchParams({apiKey:Ge,query:t.query,number:"12",addRecipeInformation:"true",fillIngredients:"true"});t.diet&&s.append("diet",t.diet),t.intolerances&&s.append("intolerances",t.intolerances),t.cuisine&&s.append("cuisine",t.cuisine),t.type&&s.append("type",t.type),t.maxReadyTime&&s.append("maxReadyTime",t.maxReadyTime.toString()),t.sort&&s.append("sort",t.sort);const n=await fetch(`${Hs}/complexSearch?${s}`);if(!n.ok){if(console.error("❌ Spoonacular API error:",n.status,n.statusText),n.status===401)return console.error("🔑 401 Unauthorized - Check your Spoonacular API key"),console.log("🔄 Falling back to TheMealDB API"),await js(t);throw new Error(`API Error: ${n.status}`)}return await n.json()}catch(s){return console.error("Error searching recipes:",s),console.log("🔄 Attempting TheMealDB fallback"),await js(t)}},js=async t=>{try{let s=`${hr}/search.php?s=${t.query}`;const n=await fetch(s);if(!n.ok)throw new Error(`MealDB API Error: ${n.status}`);const i=await n.json();if(!i.meals)return{results:[],offset:0,number:0,totalResults:0};const r=i.meals.map(l=>({id:parseInt(l.idMeal),title:l.strMeal,image:l.strMealThumb,imageType:"jpg",readyInMinutes:30,servings:4,spoonacularScore:85,healthScore:75,pricePerServing:250,cuisines:l.strArea?[l.strArea]:[],dishTypes:l.strCategory?[l.strCategory]:[],diets:[],occasions:[],analyzedInstructions:[{name:"",steps:l.strInstructions?l.strInstructions.split(".").filter(o=>o.trim()).map((o,c)=>({number:c+1,step:o.trim(),ingredients:[],equipment:[]})):[]}],extendedIngredients:Array.from({length:20},(o,c)=>c+1).map(o=>({ingredient:l[`strIngredient${o}`],measure:l[`strMeasure${o}`]})).filter(o=>o.ingredient&&o.ingredient.trim()).map((o,c)=>({id:c+1,aisle:"",image:"",consistency:"",name:o.ingredient,nameClean:o.ingredient,original:`${o.measure} ${o.ingredient}`.trim(),originalName:o.ingredient,amount:1,unit:o.measure||"",meta:[],measures:{us:{amount:1,unitShort:"",unitLong:""},metric:{amount:1,unitShort:"",unitLong:""}}})),summary:l.strInstructions?l.strInstructions.substring(0,200)+"...":"",instructions:l.strInstructions||""}));return{results:r,offset:0,number:r.length,totalResults:r.length}}catch(s){throw console.error("Error with MealDB API:",s),s}},gr=async(t=12)=>{try{const s=await fetch(`${Hs}/random?apiKey=${Ge}&number=${t}&addRecipeInformation=true`);if(!s.ok)throw new Error(`API Error: ${s.status}`);return(await s.json()).recipes||[]}catch(s){throw console.error("Error fetching random recipes:",s),s}},xr=({filters:t,onRecipeSelect:s,onRecipeResults:n})=>{const{data:i,isLoading:r,error:l}=ea({queryKey:["recipes",t],queryFn:async()=>{if(!t.query.trim()&&!t.diet&&!t.cuisine){const c=await gr(12),g={results:c,offset:0,number:c.length,totalResults:c.length};return n?.(c),g}const o=await Ws(t);return n?.(o.results),o},enabled:!0});return r?e.jsx(pr,{type:"card",count:12}):l?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(ia,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-500",children:"Please try again later"})]}):!i||i.results.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(ut,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No recipes found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or filters"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:!t.query.trim()&&!t.diet&&!t.cuisine?"Featured Recipes":"Search Results"}),e.jsxs("span",{className:"text-gray-500",children:[i.totalResults," recipe",i.totalResults!==1?"s":""," found"]})]}),e.jsx(w.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:i.results.map((o,c)=>e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:c*.1},children:e.jsx(Us,{recipe:o,onSelect:s})},o.id))}),i.results.length<i.totalResults&&e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-2xl hover:shadow-lg transition-all font-medium",children:"Load More Recipes"})})]})},Le="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";console.log("🤖 AI Configuration:",{hasOpenRouterKey:!0,keyLength:Le?.length||0,keyPreview:"***masked***"});const gt=new ta({baseURL:"https://openrouter.ai/api/v1",apiKey:Le,dangerouslyAllowBrowser:!0,defaultHeaders:{"HTTP-Referer":"https://ai-recipe-finder.vercel.app","X-Title":"AI Recipe Finder & Meal Planner"}}),xt="meta-llama/llama-3.2-3b-instruct:free",fr=async(t,s=3)=>{try{const n=`You are a professional chef AI assistant. Based on the user's preferences, suggest ${s} personalized recipes.

User Preferences:
- Favorite ingredients: ${t.favoriteIngredients.join(", ")||"None specified"}
- Dietary restrictions: ${t.dietaryRestrictions.join(", ")||"None"}
- Disliked ingredients: ${t.dislikedIngredients.join(", ")||"None"}
- Preferred cuisines: ${t.preferredCuisines.join(", ")||"Any"}
- Cooking skill: ${t.cookingSkillLevel}
- Time available: ${t.timeAvailable} minutes
- Recent meals (avoid similar): ${t.recentMeals.join(", ")||"None"}

IMPORTANT: Respond with ONLY a valid JSON array of ${s} recipe objects. No additional text.

[
  {
    "title": "Recipe Name",
    "description": "Brief appealing description",
    "ingredients": ["ingredient 1", "ingredient 2"],
    "instructions": ["step 1", "step 2"],
    "cookingTime": 30,
    "difficulty": "easy",
    "cuisine": "cuisine_type",
    "dietaryTags": ["tag1", "tag2"]
  }
]

Start with [ and end with ]. Each recipe must have all fields.`,r=(await gt.chat.completions.create({model:xt,messages:[{role:"user",content:n}],temperature:.8,max_tokens:2e3})).choices[0]?.message?.content;if(!r)throw new Error("No response from AI");console.log("🔍 Raw AI recipe response:",r);try{const l=r.indexOf("["),o=r.lastIndexOf("]");if(l!==-1&&o!==-1&&o>l){const c=r.substring(l,o+1),g=JSON.parse(c);return Array.isArray(g)?g:[g]}else{const c=JSON.parse(r);return Array.isArray(c)?c:[c]}}catch{return console.warn("⚠️ AI recipe response was not valid JSON, using fallback..."),vs(t,s)}}catch(n){return console.error("Error getting AI recommendations:",n),vs(t,s)}},yr=async(t,s=7)=>{try{console.log("🚀 Making OpenRouter API call for meal plan...");const n=`You are a nutrition and meal planning expert. Create a ${s}-day meal plan for someone with these preferences:

- Dietary restrictions: ${t.dietaryRestrictions.join(", ")||"None"}
- Preferred cuisines: ${t.preferredCuisines.join(", ")||"Varied"}
- Cooking skill: ${t.cookingSkillLevel}
- Time per meal: ${t.timeAvailable} minutes max
- Favorite ingredients to include: ${t.favoriteIngredients.join(", ")||"Flexible"}
- Ingredients to avoid: ${t.dislikedIngredients.join(", ")||"None"}

IMPORTANT: You must respond with ONLY valid JSON in this exact format. No extra text before or after:

{
  "mealPlan": "Day 1
Breakfast: [specific meal name]
Lunch: [specific meal name]
Dinner: [specific meal name]

Day 2
Breakfast: [specific meal name]
Lunch: [specific meal name]
Dinner: [specific meal name]

[continue for all ${s} days]",
  "explanation": "[Brief explanation of why this plan works for their needs and preferences]"
}

Example format for mealPlan content:
Day 1
Breakfast: Greek yogurt with honey and berries
Lunch: Quinoa salad with grilled vegetables
Dinner: Baked salmon with roasted sweet potatoes

Day 2
Breakfast: Oatmeal with banana and nuts
Lunch: Turkey and avocado wrap
Dinner: Stir-fried tofu with brown rice

Make sure each meal is specific and realistic for a ${t.cookingSkillLevel} cook with ${t.timeAvailable} minutes per meal.`,i=await gt.chat.completions.create({model:xt,messages:[{role:"user",content:n}],temperature:.7,max_tokens:1500});console.log("✅ OpenRouter API call successful");const r=i.choices[0]?.message?.content;if(!r)throw new Error("No response from AI");console.log("🔍 Raw AI response:",r);try{const l=r.indexOf("{"),o=r.lastIndexOf("}");if(l!==-1&&o!==-1&&o>l){const c=r.substring(l,o+1);return JSON.parse(c)}else return JSON.parse(r)}catch{console.warn("⚠️ AI response was not valid JSON, attempting to extract JSON...");const o=r.match(/\{[\s\S]*?\}/);if(o)try{const c=JSON.parse(o[0]);return console.log("✅ Successfully extracted JSON from response"),c}catch{console.error("❌ Could not extract valid JSON")}return console.log("🔄 Creating fallback JSON structure from text response"),{mealPlan:`Day 1
Breakfast: Greek yogurt with honey and mixed berries
Lunch: Mediterranean quinoa salad with feta
Dinner: Grilled chicken with roasted vegetables

Day 2
Breakfast: Oatmeal with banana and almonds
Lunch: Turkey and avocado wrap with side salad
Dinner: Baked salmon with sweet potato fries

Day 3
Breakfast: Scrambled eggs with whole grain toast
Lunch: Lentil soup with crusty bread
Dinner: Vegetable stir-fry with brown rice

Day 4
Breakfast: Smoothie bowl with granola and fruit
Lunch: Caprese salad with baguette
Dinner: Lean beef with steamed broccoli

Day 5
Breakfast: Avocado toast with poached egg
Lunch: Chicken Caesar salad
Dinner: Pasta with marinara and side vegetables

Day 6
Breakfast: Chia pudding with coconut and berries
Lunch: Veggie burger with sweet potato wedges
Dinner: Grilled fish with quinoa pilaf

Day 7
Breakfast: Pancakes with fresh fruit
Lunch: Asian-style soup with dumplings
Dinner: Roasted vegetables with herb-crusted tofu`,explanation:"This balanced 7-day meal plan provides variety while considering your dietary preferences and cooking skill level. Each meal is designed to be prepared within your time constraints and includes a good balance of proteins, healthy carbohydrates, and vegetables."}}}catch(n){return console.error("❌ Error getting AI meal plan:",n),n instanceof Error&&n.message.includes("401")&&console.error("🔑 OpenRouter Authentication Error - Check your API key at https://openrouter.ai/keys"),{mealPlan:`Day 1
Breakfast: Greek yogurt with honey and mixed berries
Lunch: Mediterranean quinoa salad with feta
Dinner: Grilled chicken with roasted vegetables

Day 2
Breakfast: Oatmeal with banana and almonds
Lunch: Turkey and avocado wrap with side salad
Dinner: Baked salmon with sweet potato fries

Day 3
Breakfast: Scrambled eggs with whole grain toast
Lunch: Lentil soup with crusty bread
Dinner: Vegetable stir-fry with brown rice

Day 4
Breakfast: Smoothie bowl with granola and fruit
Lunch: Caprese salad with baguette
Dinner: Lean beef with steamed broccoli

Day 5
Breakfast: Avocado toast with poached egg
Lunch: Chicken Caesar salad
Dinner: Pasta with marinara and side vegetables

Day 6
Breakfast: Chia pudding with coconut and berries
Lunch: Veggie burger with sweet potato wedges
Dinner: Grilled fish with quinoa pilaf

Day 7
Breakfast: Pancakes with fresh fruit
Lunch: Asian-style soup with dumplings
Dinner: Roasted vegetables with herb-crusted tofu`,explanation:"This balanced 7-day meal plan provides variety while considering your dietary preferences and cooking skill level. Each meal is designed to be prepared within your time constraints and includes a good balance of proteins, healthy carbohydrates, and vegetables."}}},br=async(t,s)=>{try{const n=`You are a chef AI assistant. Modify this recipe to be ${s.join(", ")}:

Original Recipe:
Title: ${t.title}
Ingredients: ${t.extendedIngredients.map(l=>l.original).join(", ")}
Instructions: ${t.instructions||"See analyzedInstructions"}
Servings: ${t.servings}
Cooking Time: ${t.readyInMinutes} minutes

Please provide the modified recipe and explain what changes were made.

Format as JSON:
{
  "modifiedRecipe": "Modified Title

Ingredients:
- ingredient 1
- ingredient 2

Instructions:
1. Step 1
2. Step 2

Servings: X
Time: Y minutes",
  "changes": "Explanation of what was changed and why"
}`,r=(await gt.chat.completions.create({model:xt,messages:[{role:"user",content:n}],temperature:.6,max_tokens:1200})).choices[0]?.message?.content;if(!r)throw new Error("No response from AI");try{const l=r.indexOf("{"),o=r.lastIndexOf("}");if(l!==-1&&o!==-1&&o>l){const c=r.substring(l,o+1);return JSON.parse(c)}else return JSON.parse(r)}catch{return console.warn("⚠️ Could not parse AI modification response as JSON"),{modifiedRecipe:`Modified ${t.title}

${r}`,changes:"AI provided modifications but in an unexpected format."}}}catch(n){return console.error("Error modifying recipe with AI:",n),{modifiedRecipe:`Modified ${t.title}

This is a placeholder for the modified recipe.`,changes:"AI modification service is currently unavailable."}}},jr=async(t,s)=>{try{const n=`You are a smart shopping assistant. Optimize this shopping list for efficiency and ${s.budget||"medium"} budget:

Ingredients needed: ${t.join(", ")}
Budget preference: ${s.budget||"medium"}
Store type: ${s.storeType||"regular grocery store"}

Please provide:
1. An organized shopping list grouped by store sections
2. Money-saving tips and substitutions
3. Quantity recommendations for best value

Format as JSON:
{
  "optimizedList": "PRODUCE:
- item 1
- item 2

DAIRY:
- item 3

MEAT:
- item 4",
  "tips": ["tip 1", "tip 2", "tip 3"]
}`,r=(await gt.chat.completions.create({model:xt,messages:[{role:"user",content:n}],temperature:.5,max_tokens:800})).choices[0]?.message?.content;if(!r)throw new Error("No response from AI");try{const l=r.indexOf("{"),o=r.lastIndexOf("}");if(l!==-1&&o!==-1&&o>l){const c=r.substring(l,o+1);return JSON.parse(c)}else return JSON.parse(r)}catch{return console.warn("⚠️ Could not parse AI shopping optimization response as JSON"),{optimizedList:`Shopping List:

${t.map(o=>`• ${o}`).join(`
`)}`,tips:["AI optimization is currently unavailable","Buy seasonal produce for better prices","Check for sales and coupons"]}}}catch(n){return console.error("Error optimizing shopping list:",n),{optimizedList:t.join(`
- `),tips:["Buy seasonal produce for better prices","Check for sales and coupons","Consider generic brands"]}}},vs=(t,s)=>[{title:"Quick Vegetable Stir Fry",description:"A healthy and colorful vegetable stir fry perfect for any skill level",ingredients:["mixed vegetables","soy sauce","garlic","ginger","oil"],instructions:["Heat oil in pan","Add garlic and ginger","Add vegetables","Stir fry for 5-7 minutes","Add soy sauce"],cookingTime:15,difficulty:"easy",cuisine:"Asian",dietaryTags:["vegetarian","vegan","quick"]},{title:"Classic Pasta with Marinara",description:"Simple and delicious pasta dish that never goes out of style",ingredients:["pasta","marinara sauce","garlic","basil","parmesan cheese"],instructions:["Boil pasta","Heat sauce with garlic","Combine pasta and sauce","Garnish with basil and cheese"],cookingTime:20,difficulty:"easy",cuisine:"Italian",dietaryTags:["vegetarian"]},{title:"Grilled Chicken Salad",description:"Light and nutritious salad with perfectly grilled chicken",ingredients:["chicken breast","mixed greens","tomatoes","cucumber","olive oil","lemon"],instructions:["Season and grill chicken","Prepare salad ingredients","Make dressing","Combine and serve"],cookingTime:25,difficulty:"medium",cuisine:"Mediterranean",dietaryTags:["high-protein","low-carb"]}].slice(0,s),Ns="ai-recipe-finder-preferences",ws={favoriteIngredients:[],dietaryRestrictions:[],dislikedIngredients:[],preferredCuisines:[],cookingSkillLevel:"beginner",timeAvailable:30,recentMeals:[]},Je=()=>{const[t,s]=p.useState(ws),[n,i]=p.useState([]),[r,l]=p.useState(!1);p.useEffect(()=>{try{const u=localStorage.getItem(Ns);u&&s({...ws,...JSON.parse(u)})}catch(u){console.error("Error loading preferences:",u)}},[]);const o=p.useCallback(u=>{const j={...t,...u};s(j);try{localStorage.setItem(Ns,JSON.stringify(j))}catch(E){console.error("Error saving preferences:",E)}},[t]),c=p.useCallback(async(u=3)=>{l(!0);try{const j=await fr(t,u);return i(j),j}catch(j){return console.error("Error getting AI recommendations:",j),[]}finally{l(!1)}},[t]),g=p.useCallback(async(u=7)=>{l(!0);try{return await yr(t,u)}catch(j){return console.error("Error getting AI meal plan:",j),{mealPlan:"Unable to generate meal plan at this time.",explanation:"Please try again later."}}finally{l(!1)}},[t]),v=p.useCallback(async(u,j)=>{l(!0);try{return await br(u,j)}catch(E){return console.error("Error modifying recipe:",E),{modifiedRecipe:"Unable to modify recipe at this time.",changes:"Please try again later."}}finally{l(!1)}},[]),f=p.useCallback(async(u,j={})=>{l(!0);try{return await jr(u,j)}catch(E){return console.error("Error optimizing shopping list:",E),{optimizedList:u.join(`
- `),tips:["Unable to optimize at this time."]}}finally{l(!1)}},[]),m=p.useCallback(u=>{const j=[...t.recentMeals];j.unshift(u),j.length>10&&j.pop(),o({recentMeals:j})},[t.recentMeals,o]);return{preferences:t,updatePreferences:o,aiRecommendations:n,isLoading:r,getRecommendations:c,getMealPlan:g,modifyRecipe:v,optimizeShoppingList:f,addToRecentMeals:m}},vr=({recipe:t,onClose:s})=>{const[n,i]=p.useState(()=>Ds(t.id)),[r,l]=p.useState(!1),[o,c]=p.useState(null),[g,v]=p.useState([]),f=Math.max(1,t.servings??1),[m,u]=p.useState(f),[j,E]=p.useState(!1),{modifyRecipe:B,isLoading:$}=Je(),P=()=>{n?(_s(t.id),i(!1)):(Ls(t),i(!0))},S=y=>`$${(y/100).toFixed(2)}`,K=async()=>{if(g.length===0)return;const y=await B(t,g);c(y)},C=y=>{u(M=>y==="increase"?Math.min(M+1,20):Math.max(M-1,1))},G=()=>{E(!j)},D=["vegetarian","vegan","gluten-free","low-carb","high-protein","dairy-free","keto-friendly","low-sodium","heart-healthy","quick (30 min or less)"];return e.jsxs(e.Fragment,{children:[e.jsx(ie,{children:e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-white/80 backdrop-blur-md rounded-full hover:bg-white transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})}),e.jsx(w.button,{onClick:P,whileHover:{scale:1.1},whileTap:{scale:.9},className:`absolute top-4 left-4 p-2 backdrop-blur-md rounded-full transition-all duration-200 ${n?"bg-red-500 text-white shadow-lg":"bg-white/80 text-gray-600 hover:bg-white hover:text-red-500"}`,title:n?"Remove from favorites":"Add to favorites",children:e.jsx(ct,{className:`w-6 h-6 transition-all duration-200 ${n?"fill-current scale-110":""}`})}),e.jsx(w.button,{onClick:y=>{y.stopPropagation(),console.log("🤖 AI Modify button clicked"),l(!0)},whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute top-4 left-16 p-2 bg-purple-500/90 text-white backdrop-blur-md rounded-full hover:bg-purple-600/90 transition-all duration-200 shadow-lg",title:"🤖 AI Modify Recipe - Make it vegetarian, gluten-free, keto, etc.",children:e.jsx(ne,{className:"w-6 h-6"})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsxs("span",{children:[t.readyInMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white/10 backdrop-blur-sm rounded-lg px-2 py-1",children:[e.jsx(Ye,{className:"w-5 h-5"}),j?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C("decrease"),disabled:m<=1,className:"w-6 h-6 bg-white/20 hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:e.jsx(Es,{className:"w-3 h-3"})}),e.jsxs("span",{className:"min-w-[60px] text-center font-semibold",children:[m," serving",m!==1?"s":""]}),e.jsx("button",{onClick:()=>C("increase"),disabled:m>=20,className:"w-6 h-6 bg-white/20 hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-full flex items-center justify-center transition-colors",children:e.jsx(Ot,{className:"w-3 h-3"})}),e.jsx("button",{onClick:G,className:"ml-1 p-1 bg-green-500/80 hover:bg-green-600/80 rounded transition-colors",title:"Done editing",children:e.jsx(ge,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[m," serving",m!==1?"s":""]}),e.jsx("button",{onClick:G,className:"p-1 bg-white/20 hover:bg-white/30 rounded transition-colors",title:"Edit serving size",children:e.jsx(Cs,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ts,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{children:(t.spoonacularScore/20).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(As,{className:"w-5 h-5"}),e.jsxs("span",{children:[S(t.pricePerServing),"/serving"]}),m>1&&e.jsxs("span",{className:"text-white/70 text-sm ml-1",children:["(Total: ",S(t.pricePerServing*m),")"]})]})]})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-16rem)]",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[t.diets.map((y,M)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:y},M)),t.cuisines.map((y,M)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:y},M))]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 gradient-text",children:"About This Recipe"}),e.jsx("div",{className:"text-gray-600 leading-relaxed",dangerouslySetInnerHTML:{__html:bs(t.summary)}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5 text-primary"}),"Ingredients"]}),e.jsx("div",{className:"space-y-3",children:t.extendedIngredients.map((y,M)=>{const U=t.servings&&t.servings>0?t.servings:f,A=m/U;let h=y.original;if(y.amount){const k=Math.round(y.amount*A*100)/100,x=y.unit?` ${y.unit}`:"";h=`${k}${x} ${y.name}`}return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-gray-700",children:h}),m!==t.servings&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Scaled for ",m," serving",m!==1?"s":"",y.amount&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(original: ",y.amount," ",y.unit,")"]})]})]})]},M)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Instructions"}),e.jsx("div",{className:"space-y-4",children:t.analyzedInstructions[0]?.steps?.length?t.analyzedInstructions[0].steps.map((y,M)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:y.number}),e.jsx("p",{className:"text-gray-700 pt-1",children:y.step})]},M)):e.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:bs(t.instructions)}})})]})]}),t.nutrition&&e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 gradient-text",children:["Nutrition Information",m!==t.servings&&e.jsxs("span",{className:"text-sm font-normal text-blue-600 ml-2",children:["(for ",m," serving",m!==1?"s":"",")"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.nutrition.nutrients.slice(0,8).map((y,M)=>{const U=t.servings&&t.servings>0?t.servings:f,A=m/U,h=Math.round(y.amount*A);return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-lg text-gray-800",children:[h,e.jsx("span",{className:"text-sm text-gray-600",children:y.unit})]}),e.jsx("div",{className:"text-sm text-gray-600",children:y.name}),m!==t.servings&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(was ",Math.round(y.amount),y.unit,")"]})]},M)})})]})]})]})})}),e.jsx(ie,{children:r&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:y=>{y.stopPropagation(),console.log("🔙 AI Modal backdrop clicked"),l(!1)},children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-lg w-full max-h-[80vh] overflow-hidden",onClick:y=>y.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI Recipe Modifications"})]}),e.jsx("button",{onClick:y=>{y.stopPropagation(),console.log("❌ AI Modal close button clicked"),l(!1)},className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6 space-y-6",children:o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"✨ Your Modified Recipe:"}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 max-h-80 overflow-y-auto border border-purple-100",children:e.jsx("div",{className:"space-y-4",children:o.modifiedRecipe.split(`

`).filter(y=>y.trim()).map((y,M)=>{const U=y.split(`
`).filter(x=>x.trim()),A=U[0],h=U.slice(1);return A.endsWith(":")||A===A.toUpperCase()?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h5",{className:"font-bold text-purple-800 text-lg flex items-center gap-2",children:[A.includes("Ingredients")&&"🥘",A.includes("Instructions")&&"👨‍🍳",A.includes("Servings")&&"🍽️",A.includes("Time")&&"⏱️",A]}),e.jsx("div",{className:"ml-4 space-y-1",children:h.map((x,R)=>e.jsx("div",{className:"flex items-start gap-2 text-gray-700",children:x.match(/^\d+\./)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:x.match(/^\d+/)?.[0]}),e.jsx("span",{children:x.replace(/^\d+\.\s*/,"")})]}):x.startsWith("-")||x.startsWith("•")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2"}),e.jsx("span",{children:x.replace(/^[-•]\s*/,"")})]}):e.jsx("span",{className:"ml-2",children:x})},R))})]},M):e.jsx("div",{className:"text-gray-700 leading-relaxed bg-white/50 rounded-lg p-3",children:U.map((x,R)=>e.jsx("p",{className:"mb-1",children:x},R))},M)})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"📝 What Changed:"}),e.jsx("div",{className:"bg-blue-50 rounded-xl p-4",children:e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:o.changes})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{c(null),v([])},className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-medium",children:"Try Different Modifications"}),e.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Done"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"How would you like to modify this recipe?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Select the dietary preferences or restrictions you'd like AI to adapt this recipe for:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.map(y=>e.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-200 rounded-xl hover:border-purple-300 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:g.includes(y),onChange:M=>{M.target.checked?v([...g,y]):v(g.filter(U=>U!==y))},className:"text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:y})]},y))})]}),e.jsx("button",{onClick:K,disabled:g.length===0||$,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium disabled:opacity-50",children:$?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"AI is modifying your recipe..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Modify Recipe with AI"})]})})]})})]})})})]})},Nr=()=>e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"})]}),wr=()=>{const[t,s]=p.useState(!1),[n,i]=p.useState([]),r=()=>{i(We()),s(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-white/20 sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(ut,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold gradient-text",children:"Recipe Finder"})]}),e.jsx("nav",{className:"flex items-center gap-6",children:e.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-2xl bg-white/50 hover:bg-white/70 transition-colors border border-white/20",children:[e.jsx(ct,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Favorites"}),e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:We().length})]})})]})})}),e.jsx(ie,{children:t&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>s(!1),children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Your Favorite Recipes"}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No favorite recipes yet"}),e.jsx("p",{className:"text-gray-400",children:"Start exploring and add some recipes to your favorites!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(l=>e.jsx(Us,{recipe:l,onSelect:()=>{s(!1)}},l.id))})})]})})})]})},Gs=()=>{const[t,s]=p.useState([]),[n,i]=p.useState(!0),r=p.useCallback(()=>{i(!0);try{const m=Ke();s(m)}catch(m){console.error("Error loading meal plans:",m)}finally{i(!1)}},[]);p.useEffect(()=>{r()},[r]);const l=p.useCallback((m,u,j,E=4,B)=>{const P=Fa({date:u,mealType:j,recipe:m,servings:E,notes:B});return P?(r(),P):null},[r]),o=p.useCallback((m,u)=>{cs(m,u),r()},[r]),c=p.useCallback(m=>{za(m),r()},[r]),g=p.useCallback(m=>t.filter(u=>u.date===m),[t]),v=p.useCallback(m=>{const u=new Date(m);u.setDate(m.getDate()+6);const j=m.toISOString().split("T")[0],E=u.toISOString().split("T")[0];return $a(j,E)},[]),f=p.useCallback((m,u,j)=>{cs(m,{date:u,mealType:j}),r()},[r]);return{mealPlans:t,isLoading:n,addRecipeToMealPlan:l,updateMealPlanById:o,removeMealPlanById:c,getMealPlansForDate:g,getMealPlansForWeek:v,moveMealPlan:f,refreshMealPlans:r}},Sr=({id:t,mealPlans:s,date:n,mealType:i,onRemoveMeal:r,onRecipeSelect:l,onEditServingSize:o})=>{const{isOver:c,setNodeRef:g,active:v}=ya({id:t,data:{type:"meal-slot",date:n,mealType:i}});return Pt.useEffect(()=>{console.log("🎯 MealSlot mounted:",t,"for",i),c&&v&&console.log("🟢 Recipe is hovering over meal slot:",t,"Active ID:",v.id)},[c,v,t,i]),e.jsxs("div",{ref:g,className:`min-h-[120px] p-3 rounded-2xl border-2 border-dashed transition-all duration-200 ${c?"border-primary bg-primary/10 scale-[1.02] shadow-lg":"border-gray-200 hover:border-gray-300"} ${s.length===0?"bg-gray-50/50":"bg-white"}`,children:[c&&e.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-2xl flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"text-primary font-medium text-sm",children:"📌 Drop recipe here"})}),e.jsx(ie,{children:s.length===0?e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex flex-col items-center justify-center h-full min-h-[96px] ${c?"text-primary":"text-gray-400"}`,children:[e.jsx(Ot,{className:`w-6 h-6 mb-2 ${c?"animate-bounce":""}`}),e.jsx("span",{className:"text-sm text-center",children:c?"Drop here!":"Drop recipe here"})]}):e.jsx("div",{className:"space-y-2",children:s.map((f,m)=>e.jsxs(w.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{delay:m*.1},className:"group relative bg-white border border-gray-200 rounded-xl p-3 shadow-sm hover:shadow-lg hover:border-blue-200 transition-all cursor-pointer",onClick:()=>l?.(f.recipe),children:[e.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Editable"}),e.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),o?.(f)},className:"w-7 h-7 bg-blue-500 text-white rounded-full flex items-center justify-center hover:bg-blue-600 z-10 shadow-md hover:shadow-lg transition-all",title:"Edit serving size",children:e.jsx(Cs,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),r(f.id)},className:"w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 z-10 shadow-md hover:shadow-lg transition-all",title:"Remove from meal plan",children:e.jsx(ge,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:f.recipe.image,alt:f.recipe.title,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-800 line-clamp-2 leading-tight",children:f.recipe.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsxs("span",{children:[f.recipe.readyInMinutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsxs("span",{children:[f.servings," serving",f.servings!==1?"s":""]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 text-blue-500 text-xs",children:"(click to edit)"})]}),f.notes&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:f.notes})]})]})]},f.id))})}),!1]})},Ss=({recipe:t,isDragging:s=!1})=>{const{attributes:n,listeners:i,setNodeRef:r,transform:l,isDragging:o}=ba({id:`recipe-${t.id}`,data:{type:"recipe",recipe:t}}),c=l?{transform:`translate3d(${l.x}px, ${l.y}px, 0)`,zIndex:9999,userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none"}:{userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none"};return p.useEffect(()=>{console.log("🔧 Recipe card mounted:",t.title,"ID: recipe-"+t.id),o&&console.log("🐛 Recipe card is being dragged:",t.title)},[o,t.title,t.id]),e.jsxs(w.div,{ref:r,style:c,...i,...n,initial:{opacity:0,scale:.9},animate:{opacity:o?.8:1,scale:o?1.05:1},whileHover:{scale:1.02},className:`group relative bg-white rounded-2xl overflow-hidden shadow-md border-2 cursor-grab active:cursor-grabbing transition-all touch-manipulation select-none ${s||o?"border-primary shadow-lg rotate-3 z-50":"border-transparent hover:border-primary/20 hover:shadow-lg"}`,children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-1",children:e.jsx(la,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"relative h-24 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover pointer-events-none",draggable:!1}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 pointer-events-none",children:e.jsxs("div",{className:"flex items-center justify-between text-white text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-sm rounded px-2 py-1",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsxs("span",{children:[t.readyInMinutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-black/40 backdrop-blur-sm rounded px-2 py-1",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:t.servings})]})]})})]}),e.jsxs("div",{className:"p-3 pointer-events-none",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 line-clamp-2 leading-tight",children:t.title}),t.diets.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.diets.slice(0,2).map((g,v)=>e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:g},v))})]}),(s||o)&&e.jsx("div",{className:"absolute inset-0 bg-primary/10 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center text-primary font-medium",children:[e.jsx("div",{className:"text-lg",children:"📅"}),e.jsx("div",{className:"text-xs",children:"Drop on calendar"})]})}),!1]})},kr=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Rt=["breakfast","lunch","dinner","snack"],Ar=({recipes:t=[],onAddRecipe:s,onGenerateShoppingList:n,onViewNutrition:i,onNavigateToSearch:r,onSearchRecipes:l,onRecipeSelect:o,isSearching:c})=>{const[g,v]=p.useState(new Date),[f,m]=p.useState(null),[u,j]=p.useState(null),[E,B]=p.useState(""),[$,P]=p.useState(!1),[S,K]=p.useState(null),[C,G]=p.useState(null),[D,y]=p.useState(4),[M,U]=p.useState("add"),{mealPlans:A,addRecipeToMealPlan:h,removeMealPlanById:k,moveMealPlan:x,updateMealPlanById:R}=Gs(),_=t.length>0?t:[],pe=ja(ss(Ta,{activationConstraint:{distance:8}}),ss(Aa,{coordinateGetter:ka})),X=p.useMemo(()=>Rs(g,{weekStartsOn:1}),[g]),ee=p.useMemo(()=>Array.from({length:7},(T,L)=>lt(X,L)),[X]),ve=p.useMemo(()=>{const T=me(X,"yyyy-MM-dd"),L=me(lt(X,6),"yyyy-MM-dd");return A.filter(O=>O.date>=T&&O.date<=L)},[A,X]),qe=(T,L)=>{const O=me(T,"yyyy-MM-dd");return ve.filter(q=>q.date===O&&q.mealType===L)},H=T=>{const{active:L}=T,O=String(L.id);if(m(O),O.startsWith("recipe-")){const q=parseInt(O.replace("recipe-","")),oe=_.find(V=>V.id===q);oe&&j(oe)}if(O.startsWith("meal-")){const q=A.find(oe=>`meal-${oe.id}`===O);q&&j(q.recipe)}},Ve=T=>{const{active:L,over:O}=T;if(m(null),j(null),!O)return;const q=L.id.toString(),oe=O.id.toString();console.log("🎯 Drop target ID:",oe);const V=oe.split("-");let ce="",de="";if(V.length>=4?(ce=`${V[0]}-${V[1]}-${V[2]}`,de=V[3]):V.length===2&&(ce=V[0],de=V[1]),console.log("📅 Parsed drop target - Date:",ce,"MealType:",de),console.log("🍽️ Valid meal types:",Rt),!ce||!Rt.includes(de)){console.log("❌ Invalid drop target format or meal type");return}if(u)if(q.startsWith("recipe-"))console.log("🍽️ Opening serving size selection for:",u.title),K({recipe:u,date:ce,mealType:de}),y(u.servings||4),U("add"),P(!0);else{const De=A.find(et=>et.id===q);De&&(console.log("🔄 Moving existing meal plan:",De.recipe.title),x(q,ce,de),console.log("✅ Meal plan moved successfully"))}else console.log("❌ No dragged recipe found")},W=T=>{v(L=>T==="next"?Ca(L,1):Ia(L))},Xe=()=>{v(new Date)},z=()=>{console.log("🛒 Generate shopping list clicked"),console.log("📊 All meal plans:",A.length),console.log("📊 Week meal plans:",ve.length),console.log("📋 Meal plans details:",A),n&&n(A)},Ne=()=>{console.log("📊 View nutrition clicked"),console.log("📊 All meal plans:",A.length),console.log("📊 Week meal plans:",ve.length),i&&i(A)},we=async T=>{if(T.preventDefault(),!(!E.trim()||!l))try{await l(E.trim()),B("")}catch(L){console.error("Search failed:",L)}},Qe=()=>{M==="add"&&S?(console.log("➕ Adding recipe with serving size:",S.recipe.title,D,"servings"),h(S.recipe,S.date,S.mealType,D),s?.(S.recipe,S.date,S.mealType),console.log("✅ Recipe added successfully with",D,"servings")):M==="edit"&&C&&(console.log("✏️ Updating serving size for:",C.recipe.title,"from",C.servings,"to",D),R(C.id,{servings:D}),console.log("✅ Serving size updated successfully")),P(!1),K(null),G(null),y(4),U("add")},Se=()=>{console.log("❌ Serving size modal canceled"),P(!1),K(null),G(null),y(4),U("add")},_e=T=>{y(L=>T==="increase"?Math.min(L+1,20):Math.max(L-1,1))},Ze=T=>{console.log("✏️ Editing serving size for:",T.recipe.title,"current:",T.servings),G(T),y(T.servings),U("edit"),P(!0)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-white rounded-3xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"w-8 h-8 text-primary"}),e.jsx("h2",{className:"text-3xl font-bold gradient-text",children:"Meal Planning"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-2xl p-1",children:[e.jsx("button",{onClick:()=>W("prev"),className:"p-2 rounded-xl hover:bg-white transition-colors",children:e.jsx(oa,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold min-w-[200px] text-center",children:[me(X,"MMM d")," - ",me(lt(X,6),"MMM d, yyyy")]}),e.jsx("button",{onClick:()=>W("next"),className:"p-2 rounded-xl hover:bg-white transition-colors",children:e.jsx(ca,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:Xe,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors font-medium",children:"Today"}),e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-colors font-medium",children:[e.jsx(dt,{className:"w-5 h-5"}),"Shopping List"]}),e.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors font-medium",children:[e.jsx(Is,{className:"w-5 h-5"}),"Nutrition"]})]})]}),e.jsxs(va,{sensors:pe,collisionDetection:wa,onDragStart:H,onDragEnd:Ve,modifiers:[Na],children:[e.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[e.jsx("div",{className:""}),kr.map((T,L)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-600 mb-1",children:T}),e.jsx("div",{className:`text-2xl font-bold ${Ea(ee[L],new Date)?"text-primary":"text-gray-800"}`,children:me(ee[L],"d")})]},T)),Rt.map(T=>e.jsxs(Pt.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-2xl",children:e.jsx("span",{className:"font-semibold text-gray-700 capitalize",children:T})}),ee.map(L=>{const O=me(L,"yyyy-MM-dd"),q=qe(L,T);return e.jsx(Sr,{id:`${O}-${T}`,mealPlans:q,date:L,mealType:T,onRemoveMeal:k,onRecipeSelect:o,onEditServingSize:Ze},`${O}-${T}`)})]},T))]}),e.jsxs("div",{className:"mt-8 border-t pt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["📋 Drag Recipes to Calendar",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",_.length," recipes available)"]}),f&&e.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"🎯 Dragging..."})]}),e.jsxs("form",{onSubmit:we,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:E,onChange:T=>B(T.target.value),placeholder:"Search for more recipes... (Press Enter)",className:"w-64 px-4 py-2 pr-10 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary text-sm",disabled:c,onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),we(T))}}),e.jsx("button",{type:"submit",disabled:c||!E.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ks,{className:"w-4 h-4"})})]}),c&&e.jsx("div",{className:"text-sm text-gray-500",children:"Searching..."})]})]}),_.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:_.slice(0,12).map(T=>e.jsx(Ss,{recipe:T},`recipe-${T.id}`))}),_.length>12&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing 12 of ",_.length," recipes"]}),e.jsx("button",{onClick:()=>{console.log("Show more recipes functionality")},className:"mt-2 text-primary hover:text-primary/80 text-sm font-medium",children:"View all recipes →"})]})]}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Recipes Available"}),e.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"You need to search for recipes first before you can add them to your meal plan."}),e.jsx("button",{onClick:()=>{r?r():console.log("Navigate to search view")},className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors font-medium",children:"🔍 Search for Recipes"})]})]}),e.jsx(Sa,{dropAnimation:null,children:f&&u?e.jsx("div",{className:"transform rotate-6 scale-105 opacity-90 pointer-events-none",children:e.jsx(Ss,{recipe:u,isDragging:!0})}):f?e.jsxs("div",{className:"bg-primary text-white px-4 py-2 rounded-lg font-medium pointer-events-none",children:["Dragging: ",f]}):null})]}),e.jsx(ie,{children:$&&(S||C)&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:Se,children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-md w-full p-6",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ye,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:M==="add"?"Choose Serving Size":"Edit Serving Size"}),e.jsx("p",{className:"text-gray-600 text-sm",children:M==="add"?e.jsxs(e.Fragment,{children:["How many servings of ",e.jsx("span",{className:"font-semibold text-primary",children:S?.recipe.title})," would you like to add?"]}):e.jsxs(e.Fragment,{children:["How many servings of ",e.jsx("span",{className:"font-semibold text-primary",children:C?.recipe.title})," would you like?"]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>_e("decrease"),disabled:D<=1,className:"w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center transition-colors",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:D}),e.jsx("div",{className:"text-sm text-gray-500",children:D===1?"serving":"servings"})]}),e.jsx("button",{onClick:()=>_e("increase"),disabled:D>=20,className:"w-12 h-12 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center transition-colors",children:e.jsx(Ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3 mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Original recipe:"}),e.jsxs("span",{className:"font-medium",children:[M==="add"?S?.recipe.servings:C?.recipe.servings," servings"]})]}),M==="edit"&&C&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current meal plan:"}),e.jsxs("span",{className:"font-medium",children:[C.servings," servings"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:M==="add"?"Your selection:":"New amount:"}),e.jsxs("span",{className:"font-medium text-primary",children:[D," servings"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Meal type:"}),e.jsx("span",{className:"font-medium capitalize",children:M==="add"?S?.mealType:C?.mealType})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium",children:M==="add"?me(new Date(S?.date||""),"MMM d, yyyy"):me(new Date(C?.date||""),"MMM d, yyyy")})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Se,className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Qe,className:"flex-1 px-4 py-3 bg-gradient-to-r from-primary to-purple-600 hover:shadow-lg text-white rounded-xl font-medium transition-all",children:M==="add"?"Add to Meal Plan":"Update Serving Size"})]})]})})})]})},Tr=()=>{const[t,s]=p.useState([]),[n,i]=p.useState(!0),r=p.useCallback(()=>{i(!0);try{const f=Ie();s(f)}catch(f){console.error("Error loading shopping lists:",f)}finally{i(!1)}},[]);p.useEffect(()=>{r()},[r]);const l=p.useCallback((f,m)=>{const u=Ba(f,m);return u?(r(),u):null},[r]),o=p.useCallback((f,m)=>{Ua(f,m),r()},[r]),c=p.useCallback((f,m)=>{Ha(f,m),r()},[r]),g=p.useCallback(f=>{try{const u=Ie().filter(j=>j.id!==f);localStorage.setItem("recipe-finder-shopping-lists",JSON.stringify(u)),r()}catch(m){console.error("Error deleting shopping list:",m)}},[r]),v=p.useCallback(f=>Ie().find(u=>u.id===f),[]);return{shoppingLists:t,isLoading:n,generateShoppingListFromMealPlans:l,updateShoppingListById:o,toggleItemById:c,deleteShoppingList:g,getShoppingListById:v,refreshShoppingLists:r}},Er=({isOpen:t,onClose:s,mealPlans:n,initialName:i="Weekly Meal Plan"})=>{const[r,l]=p.useState(i),[o,c]=p.useState(null),[g,v]=p.useState("aisle"),[f,m]=p.useState("all"),[u,j]=p.useState(!1),[E,B]=p.useState(null),{generateShoppingListFromMealPlans:$,toggleItemById:P,getShoppingListById:S}=Tr(),{optimizeShoppingList:K,isLoading:C}=Je(),G=()=>{const h=$(r,n);if(h){const k=S(h);k&&c(k)}},D=p.useMemo(()=>{if(!o)return{};let h=o.items;f==="checked"?h=h.filter(x=>x.checked):f==="unchecked"&&(h=h.filter(x=>!x.checked));const k={};return h.forEach(x=>{let R="";switch(g){case"aisle":R=x.aisle||"Other";break;case"recipe":R=x.recipes[0]||"Other";break;case"alphabetical":R=x.ingredient.charAt(0).toUpperCase();break}k[R]||(k[R]=[]),k[R].push(x)}),Object.keys(k).forEach(x=>{k[x].sort((R,_)=>R.ingredient.localeCompare(_.ingredient))}),k},[o,g,f]),y=h=>{o&&(P(o.id,h),c(k=>{if(!k)return k;const x=k.items.map(_=>_.id===h?{..._,checked:!_.checked}:_),R=x.filter(_=>_.checked).length;return{...k,items:x,checkedItems:R}}))},M=()=>{if(!o)return;const h=Object.entries(D).map(([_,pe])=>{const X=pe.map(ee=>`${ee.checked?"✓":"○"} ${ee.amount} ${ee.unit} ${ee.ingredient}`).join(`
`);return`${_.toUpperCase()}
${X}`}).join(`

`),k=new Blob([h],{type:"text/plain"}),x=URL.createObjectURL(k),R=document.createElement("a");R.href=x,R.download=`${o.name}.txt`,R.click(),URL.revokeObjectURL(x)},U=async()=>{if(!o)return;const h=Object.entries(D).map(([k,x])=>{const R=x.map(_=>`• ${_.amount} ${_.unit} ${_.ingredient}`).join(`
`);return`${k}
${R}`}).join(`

`);if(navigator.share)try{await navigator.share({title:o.name,text:h})}catch(k){console.error("Error sharing:",k)}else navigator.clipboard.writeText(h)},A=async()=>{if(!o)return;const h=o.items.map(x=>`${x.amount} ${x.unit} ${x.ingredient}`),k=await K(h,{budget:"medium",storeType:"grocery store"});B(k),j(!0)};return t?e.jsxs(ie,{children:[e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-8 h-8 text-primary"}),e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Shopping List"})]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]}),o?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:o.name}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[o.checkedItems," of ",o.totalItems," items completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:A,disabled:C,className:"p-2 rounded-xl bg-purple-100 text-purple-600 hover:bg-purple-200 transition-colors disabled:opacity-50",title:"AI Optimize List",children:C?e.jsx(Me,{className:"w-5 h-5 animate-spin"}):e.jsx(ne,{className:"w-5 h-5"})}),e.jsx("button",{onClick:M,className:"p-2 rounded-xl bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:"Export List",children:e.jsx(Ms,{className:"w-5 h-5"})}),e.jsx("button",{onClick:U,className:"p-2 rounded-xl bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:"Share List",children:e.jsx(da,{className:"w-5 h-5"})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:r,onChange:h=>l(h.target.value),placeholder:"Enter list name...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none"}),e.jsx("button",{onClick:G,className:"w-full py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium disabled:opacity-50",children:"Generate Shopping List"})]})]}),o&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsxs("select",{value:g,onChange:h=>v(h.target.value),className:"px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"aisle",children:"Aisle"}),e.jsx("option",{value:"recipe",children:"Recipe"}),e.jsx("option",{value:"alphabetical",children:"A-Z"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:f,onChange:h=>m(h.target.value),className:"px-3 py-1 text-sm border border-gray-200 rounded-lg focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Items"}),e.jsx("option",{value:"unchecked",children:"To Buy"}),e.jsx("option",{value:"checked",children:"Completed"})]})]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:o?e.jsx("div",{className:"space-y-6",children:Object.entries(D).map(([h,k])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3 pb-2 border-b border-gray-200",children:h}),e.jsx("div",{className:"space-y-2",children:k.map(x=>e.jsxs(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${x.checked?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-gray-300"}`,children:[e.jsx("button",{onClick:()=>y(x.id),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 transition-all ${x.checked?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-primary"}`,children:x.checked?e.jsx(ma,{className:"w-4 h-4"}):null}),e.jsxs("div",{className:`flex-1 ${x.checked?"line-through text-gray-500":""}`,children:[e.jsxs("div",{className:"font-medium",children:[x.amount," ",x.unit," ",x.ingredient]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Used in: ",x.recipes.join(", ")]})]})]},x.id))})]},h))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Generate your shopping list to get started"}),e.jsx("p",{className:"text-gray-400",children:"We'll organize ingredients from your meal plans"})]})})]})}),e.jsx(ie,{children:u&&E&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-60 flex items-center justify-center p-4",onClick:()=>j(!1),children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-lg w-full max-h-[80vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI Optimized Shopping List"})]}),e.jsx("button",{onClick:()=>j(!1),className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"Optimized Shopping Route:"}),e.jsx("div",{className:"space-y-3",children:E.optimizedList.split(`

`).filter(h=>h.trim()).map((h,k)=>{const x=h.split(`
`).filter(ee=>ee.trim()),R=x[0],_=x.slice(1),pe={PRODUCE:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"🥬"},DAIRY:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"🥛"},MEAT:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"🥩"},PANTRY:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"🥫"},FROZEN:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-800",icon:"🧊"},BAKERY:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",icon:"🍞"},DEFAULT:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon:"🛒"}},X=pe[R.toUpperCase()]||pe.DEFAULT;return e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:k*.1},className:`${X.bg} ${X.border} border rounded-xl p-4`,children:[e.jsxs("h5",{className:`font-semibold ${X.text} mb-3 flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:X.icon}),R]}),e.jsx("div",{className:"space-y-2",children:_.map((ee,ve)=>e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-current rounded-full opacity-60"}),e.jsx("span",{className:"text-sm",children:ee.replace(/^[-•]\s*/,"")})]},ve))})]},k)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"💡 AI Shopping Tips:"}),e.jsx("div",{className:"space-y-2",children:E.tips.map((h,k)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-purple-50 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-sm",children:h})]},k))})]})]})]})})})]}):null},Cr=t=>{if(t.length===0)return{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,dailyAverages:{calories:0,protein:0,carbs:0,fat:0},weeklyCalories:[],macroData:[{name:"Protein",value:33,color:"#8B5CF6"},{name:"Carbs",value:34,color:"#06B6D4"},{name:"Fat",value:33,color:"#F59E0B"}]};let s=0,n=0,i=0,r=0;t.forEach(m=>{const u=m.recipe,j=m.servings,E=u.nutrition?.nutrients?.find(S=>S.name==="Calories")?.amount||u.readyInMinutes*20,B=u.nutrition?.nutrients?.find(S=>S.name==="Protein")?.amount||E*.15/4,$=u.nutrition?.nutrients?.find(S=>S.name==="Carbohydrates")?.amount||E*.5/4,P=u.nutrition?.nutrients?.find(S=>S.name==="Fat")?.amount||E*.35/9;s+=E*j,n+=B*j,i+=$*j,r+=P*j});const l=new Set(t.map(m=>m.date)).size,o={calories:l>0?Math.round(s/l):0,protein:l>0?Math.round(n/l):0,carbs:l>0?Math.round(i/l):0,fat:l>0?Math.round(r/l):0},c=n*4+i*4+r*9,g=c>0?[{name:"Protein",value:Math.round(n*4/c*100),color:"#8B5CF6"},{name:"Carbs",value:Math.round(i*4/c*100),color:"#06B6D4"},{name:"Fat",value:Math.round(r*9/c*100),color:"#F59E0B"}]:[{name:"Protein",value:33,color:"#8B5CF6"},{name:"Carbs",value:34,color:"#06B6D4"},{name:"Fat",value:33,color:"#F59E0B"}],v=Rs(new Date,{weekStartsOn:1}),f=Array.from({length:7},(m,u)=>{const j=lt(v,u),E=me(j,"yyyy-MM-dd"),$=t.filter(P=>P.date===E).reduce((P,S)=>{const K=S.recipe.nutrition?.nutrients?.find(C=>C.name==="Calories")?.amount||S.recipe.readyInMinutes*20;return P+K*S.servings},0);return{day:me(j,"EEE"),calories:Math.round($),target:2e3}});return{totalCalories:s,totalProtein:n,totalCarbs:i,totalFat:r,dailyAverages:o,weeklyCalories:f,macroData:g}},Ir=({isOpen:t,onClose:s,mealPlans:n})=>{const i=p.useMemo(()=>Cr(n),[n]),r=[{name:"Vitamin C",current:85,target:100,unit:"mg"},{name:"Iron",current:12,target:15,unit:"mg"},{name:"Calcium",current:950,target:1e3,unit:"mg"},{name:"Fiber",current:28,target:35,unit:"g"}];return t?e.jsx(ie,{children:e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-6xl w-full max-h-[90vh] overflow-hidden",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(St,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Nutrition Dashboard"}),e.jsx("p",{className:"text-white/80",children:"Track your nutritional goals and progress"})]})]}),e.jsx("button",{onClick:s,className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-8rem)]",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(St,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Meal Plans Yet"}),e.jsx("p",{className:"text-gray-600",children:"Create some meal plans to see your nutrition analytics"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(je,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Daily Average"})]}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:i.dailyAverages.calories.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"calories"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ua,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Goal Progress"})]}),e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[i.dailyAverages.calories>0?Math.round(i.dailyAverages.calories/2e3*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"of 2000 cal target"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(pa,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Protein Goal"})]}),e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[i.dailyAverages.protein,"g"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"daily average"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-6 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(St,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Total Meals"})]}),e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:n.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"planned"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Macronutrient Breakdown"}),e.jsx("div",{className:"h-64",children:e.jsx(kt,{width:"100%",height:"100%",children:e.jsxs(Ma,{children:[e.jsx(Ra,{data:i.macroData,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:l,value:o})=>`${l}: ${o}%`,children:i.macroData.map((l,o)=>e.jsx(La,{fill:l.color},`cell-${o}`))}),e.jsx(At,{})]})})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Weekly Calorie Intake"}),e.jsx("div",{className:"h-64",children:e.jsx(kt,{width:"100%",height:"100%",children:e.jsxs(_a,{data:i.weeklyCalories,children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"day"}),e.jsx(ns,{}),e.jsx(At,{}),e.jsx(is,{dataKey:"calories",fill:"#8B5CF6"}),e.jsx(is,{dataKey:"target",fill:"#E5E7EB"})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"Nutrient Goals Progress"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((l,o)=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-800",children:l.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[l.current,l.unit," / ",l.target,l.unit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(w.div,{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full",initial:{width:0},animate:{width:`${l.current/l.target*100}%`},transition:{duration:1,delay:o*.1}})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Math.round(l.current/l.target*100),"% of daily goal"]})]},o))})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Calorie Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(kt,{width:"100%",height:"100%",children:e.jsxs(Da,{data:i.weeklyCalories,children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"day"}),e.jsx(ns,{}),e.jsx(At,{}),e.jsx(ls,{type:"monotone",dataKey:"calories",stroke:"#8B5CF6",strokeWidth:3,dot:{fill:"#8B5CF6",strokeWidth:2,r:4}}),e.jsx(ls,{type:"monotone",dataKey:"target",stroke:"#E5E7EB",strokeDasharray:"5 5",dot:!1})]})})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"💡 Nutrition Tips"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Try to include a variety of colorful vegetables in your meals for diverse nutrients."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Aim for 25-30g of fiber daily to support digestive health."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Include lean protein sources in each meal to maintain muscle mass."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Stay hydrated with 8-10 glasses of water daily."})]})]})]})]})})]})})}):null},Mr=({onRecipeSelect:t})=>{const{aiRecommendations:s,isLoading:n,getRecommendations:i,preferences:r}=Je(),[l,o]=p.useState(!1),[c,g]=p.useState(!1),v=async()=>{await i(3),g(!0)},f=m=>{switch(m){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(ne,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Recipe Recommendations"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Personalized just for you"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(!0),className:"p-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors",title:"Customize Preferences",children:e.jsx(ha,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:v,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors disabled:opacity-50",children:[n?e.jsx(Me,{className:"w-4 h-4 animate-spin"}):e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:c?"Refresh":"Get Recommendations"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[!c&&!n&&e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(ne,{className:"w-16 h-16 text-purple-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Ready for AI Magic?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Get personalized recipe recommendations based on your preferences and dietary needs."}),e.jsxs("button",{onClick:v,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(ne,{className:"w-5 h-5 inline mr-2"}),"Generate AI Recommendations"]})]}),n&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"w-12 h-12 text-purple-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"AI is analyzing your preferences..."})]}),c&&!n&&s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No recommendations available. Try adjusting your preferences."})]}),e.jsx(ie,{children:s.length>0&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((m,u)=>e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"border border-gray-200 rounded-2xl p-4 hover:shadow-md transition-all cursor-pointer hover:border-purple-300",onClick:()=>t?.(m),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 flex-1 pr-2",children:m.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f(m.difficulty)}`,children:m.difficulty})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsxs("span",{children:[m.cookingTime,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ga,{className:"w-4 h-4"}),e.jsx("span",{children:m.cuisine})]})]}),m.dietaryTags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:m.dietaryTags.slice(0,3).map((j,E)=>e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:j},E))}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ingredients needed:"}),e.jsxs("p",{className:"text-sm text-gray-700 line-clamp-2",children:[m.ingredients.slice(0,4).join(", "),m.ingredients.length>4&&"..."]})]})]},u))})}),c&&e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 p-4 bg-gray-50 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Your Current Preferences:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[r.dietaryRestrictions.length>0&&e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["🥗 ",r.dietaryRestrictions.join(", ")]}),r.preferredCuisines.length>0&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["🌍 ",r.preferredCuisines.slice(0,2).join(", ")]}),e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["⏱️ ",r.timeAvailable,"min max"]}),e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:["👨‍🍳 ",r.cookingSkillLevel]})]})]})]}),e.jsx(Rr,{isOpen:l,onClose:()=>o(!1)})]})},Rr=({isOpen:t,onClose:s})=>{const{preferences:n,updatePreferences:i}=Je();return t?e.jsx(ie,{children:e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl max-w-md w-full max-h-[80vh] overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold gradient-text",children:"AI Preferences"}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cooking Skill Level"}),e.jsxs("select",{value:n.cookingSkillLevel,onChange:r=>i({cookingSkillLevel:r.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Cooking Time (minutes)"}),e.jsx("input",{type:"number",min:"10",max:"180",value:n.timeAvailable,onChange:r=>i({timeAvailable:parseInt(r.target.value)}),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Restrictions (comma-separated)"}),e.jsx("input",{type:"text",value:n.dietaryRestrictions.join(", "),onChange:r=>i({dietaryRestrictions:r.target.value.split(",").map(l=>l.trim()).filter(Boolean)}),placeholder:"e.g., vegetarian, gluten-free, keto",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Cuisines (comma-separated)"}),e.jsx("input",{type:"text",value:n.preferredCuisines.join(", "),onChange:r=>i({preferredCuisines:r.target.value.split(",").map(l=>l.trim()).filter(Boolean)}),placeholder:"e.g., Italian, Mexican, Asian",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favorite Ingredients (comma-separated)"}),e.jsx("input",{type:"text",value:n.favoriteIngredients.join(", "),onChange:r=>i({favoriteIngredients:r.target.value.split(",").map(l=>l.trim()).filter(Boolean)}),placeholder:"e.g., chicken, tomatoes, garlic",className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none"})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-100",children:e.jsx("button",{onClick:s,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"Save Preferences"})})]})})}):null},Lr=()=>{const{getMealPlan:t,preferences:s,isLoading:n}=Je(),[i,r]=p.useState(null),[l,o]=p.useState(7),c=async()=>{const v=await t(l);r(v)},g=()=>{if(!i)return;const v=`${l}-Day AI Meal Plan

${i.mealPlan}

Why This Plan Works:
${i.explanation}`,f=new Blob([v],{type:"text/plain"}),m=URL.createObjectURL(f),u=document.createElement("a");u.href=m,u.download=`ai-meal-plan-${l}-days.txt`,u.click(),URL.revokeObjectURL(m)};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsx(je,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Meal Planner"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Smart nutrition planning made easy"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:l,onChange:v=>o(parseInt(v.target.value)),className:"px-3 py-2 bg-white/20 text-white rounded-xl border border-white/30 focus:outline-none",children:[e.jsx("option",{value:3,className:"text-gray-800",children:"3 Days"}),e.jsx("option",{value:7,className:"text-gray-800",children:"7 Days"}),e.jsx("option",{value:14,className:"text-gray-800",children:"14 Days"})]}),e.jsxs("button",{onClick:c,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors disabled:opacity-50",children:[n?e.jsx(Me,{className:"w-4 h-4 animate-spin"}):e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate Plan"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[!i&&!n&&e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(je,{className:"w-16 h-16 text-green-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Ready to Plan Your Meals?"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Let AI create a personalized ",l,"-day meal plan based on your preferences and nutritional needs."]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 max-w-md mx-auto",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Planning with your preferences:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm justify-center",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["👨‍🍳 ",s.cookingSkillLevel]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["⏱️ ",s.timeAvailable,"min max"]}),s.dietaryRestrictions.length>0&&e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["🥗 ",s.dietaryRestrictions[0],s.dietaryRestrictions.length>1&&" +more"]})]})]}),e.jsxs("button",{onClick:c,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(ne,{className:"w-5 h-5 inline mr-2"}),"Generate ",l,"-Day AI Meal Plan"]})]}),n&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"w-12 h-12 text-green-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"AI is crafting your personalized meal plan..."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This may take a moment"})]}),e.jsx(ie,{children:i&&!n&&e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-green-500"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["Your ",l,"-Day Meal Plan is Ready!"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Export"]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[e.jsx(mt,{className:"w-4 h-4"}),"Regenerate"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-green-500"}),"Your Meal Plan"]}),e.jsx("div",{className:"space-y-4",children:(()=>{console.log("🔍 Meal plan content to parse:",i.mealPlan);let v=i.mealPlan;v=v.replace(/^[{}\s]*"?mealplan"?\s*:?\s*"?/i,""),v=v.replace(/["{}]*$/,""),v=v.replace(/\\n/g,`
`),v=v.replace(/\\"/g,'"'),console.log("🧹 Cleaned meal plan:",v);const f=v.split(/\n\s*\n|\n(?=Day\s+\d+)/i).filter(m=>m.trim());return f.length===0||f.every(m=>m.length<10)?e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-3",children:"Your Meal Plan"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:v||"AI is generating your meal plan..."})]}):f.map((m,u)=>{const j=m.split(`
`).filter(S=>S.trim());let E=`Day ${u+1}`,B=j;const $=j.find(S=>/day\s+\d+/i.test(S));$&&(E=$.trim(),B=j.filter(S=>S!==$));const P=B.filter(S=>S.includes(":")&&(S.toLowerCase().includes("breakfast")||S.toLowerCase().includes("lunch")||S.toLowerCase().includes("dinner")||S.toLowerCase().includes("snack")));return P.length===0?e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:u+1}),E]}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 text-sm",children:B.join(`
`)})})]},u):e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-5",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:u+1}),E]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map((S,K)=>{const[C,G]=S.split(":").map(y=>y.trim()),D={Breakfast:"🌅",Lunch:"☀️",Dinner:"🌙",Snack:"🍎"};return e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:D[C]||"🍽️"}),e.jsx("span",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:C})]}),e.jsx("p",{className:"text-gray-800 font-medium",children:G||S})]},K)})})]},u)})})()})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(xa,{className:"w-5 h-5 text-blue-500"}),"Why This Plan Works"]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 space-y-4",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:i.explanation}),e.jsxs("div",{className:"border-t border-blue-200 pt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Quick Tips:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Prep ingredients on Sunday for the week"}),e.jsx("li",{children:"• Cook grains and proteins in batches"}),e.jsx("li",{children:"• Keep healthy snacks readily available"}),e.jsx("li",{children:"• Stay hydrated throughout the day"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-center",children:[e.jsx(Re,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Time Efficient"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Meals designed for ",s.timeAvailable,"min cooking time"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-center",children:[e.jsx(ts,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Nutritionally Balanced"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Optimized for your dietary preferences"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 text-center",children:[e.jsx(ne,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"AI Personalized"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tailored to your cooking skill level"})]})]})]})})]})]})},_r=()=>{const[t,s]=p.useState({query:""}),[n,i]=p.useState(null),[r,l]=p.useState(!1),[o,c]=p.useState("search"),[g,v]=p.useState([]),[f,m]=p.useState(!1),[u,j]=p.useState(!1),[E,B]=p.useState(!1),{mealPlans:$}=Gs(),P=A=>{s(A)},S=A=>{i(A)},K=()=>{i(null)},C=(A,h,k)=>{console.log("Added recipe to meal plan:",{recipe:A.title,date:h,mealType:k})},G=A=>{m(!0)},D=A=>{j(!0)},y=A=>{v(A)},M=async A=>{try{B(!0);const x=(await Ws({query:A})).results,R=[...g];x.forEach(_=>{R.find(pe=>pe.id===_.id)||R.push(_)}),v(R),console.log(`🔍 Added ${x.length} new recipes from search: "${A}"`)}catch(h){console.error("Error searching for recipes:",h)}finally{B(!1)}},U=A=>{const h={id:Date.now(),title:A.title,image:"https://via.placeholder.com/312x231/8B5CF6/FFFFFF?text=AI+Recipe",imageType:"jpg",readyInMinutes:A.cookingTime,servings:4,spoonacularScore:85,healthScore:75,pricePerServing:250,cuisines:[A.cuisine],dishTypes:[],diets:A.dietaryTags,occasions:[],analyzedInstructions:[{name:"",steps:A.instructions.map((k,x)=>({number:x+1,step:k,ingredients:[],equipment:[]}))}],extendedIngredients:A.ingredients.map((k,x)=>({id:x+1,aisle:"",image:"",consistency:"",name:k,nameClean:k,original:k,originalName:k,amount:1,unit:"",meta:[],measures:{us:{amount:1,unitShort:"",unitLong:""},metric:{amount:1,unitShort:"",unitLong:""}}})),summary:A.description,instructions:A.instructions.map((k,x)=>`${x+1}. ${k}`).join(`
`)};i(h)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative overflow-hidden",children:[e.jsx(Nr,{}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(wr,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold gradient-text mb-4",children:"AI Recipe Finder & Meal Planner"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Discover delicious recipes, plan your meals, and track your nutrition all in one place"})]}),e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-white/80 backdrop-blur-md rounded-2xl border border-white/20 shadow-lg flex-wrap",children:[e.jsx("button",{onClick:()=>c("search"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${o==="search"?"bg-primary text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:"🔍 Search Recipes"}),e.jsxs("button",{onClick:()=>c("ai-recommendations"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${o==="ai-recommendations"?"bg-purple-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(ne,{className:"w-4 h-4"}),"AI Recommendations"]}),e.jsxs("button",{onClick:()=>c("ai-meal-planner"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${o==="ai-meal-planner"?"bg-green-500 text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(je,{className:"w-4 h-4"}),"AI Meal Planner"]}),e.jsxs("button",{onClick:()=>c("planning"),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${o==="planning"?"bg-primary text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(je,{className:"w-4 h-4"}),"Meal Planning"]})]})}),e.jsxs(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:[o==="search"&&e.jsxs(e.Fragment,{children:[e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-4xl mx-auto mb-8",children:[e.jsx(Pa,{onSearch:P,onToggleFilters:()=>l(!r),showFilters:r}),e.jsx(Oa,{isOpen:r,filters:t,onFiltersChange:s})]}),e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},children:e.jsx(xr,{filters:t,onRecipeSelect:S,onRecipeResults:y})})]}),o==="planning"&&e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Ar,{recipes:g,onAddRecipe:C,onGenerateShoppingList:G,onViewNutrition:D,onNavigateToSearch:()=>c("search"),onSearchRecipes:M,onRecipeSelect:S,isSearching:E})}),o==="ai-recommendations"&&e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Mr,{onRecipeSelect:U})}),o==="ai-meal-planner"&&e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Lr,{})})]},o),o==="search"&&g.length>0&&e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"fixed bottom-8 right-8 flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>c("planning"),className:"flex items-center gap-2 px-4 py-3 bg-primary text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"Go to Meal Planning",children:[e.jsx(je,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Plan Meals"})]}),$.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>G(),className:"flex items-center gap-2 px-4 py-3 bg-green-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"Generate Shopping List",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Shopping"})]}),e.jsxs("button",{onClick:()=>D(),className:"flex items-center gap-2 px-4 py-3 bg-blue-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-105",title:"View Nutrition Dashboard",children:[e.jsx(Is,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Nutrition"})]})]})]})]}),n&&e.jsx(vr,{recipe:n,onClose:K}),e.jsx(Er,{isOpen:f,onClose:()=>m(!1),mealPlans:$}),e.jsx(Ir,{isOpen:u,onClose:()=>j(!1),mealPlans:$})]})]})};class Dr extends p.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("Uncaught error:",s,n)}handleReset=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fa,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:[e.jsx(mt,{className:"w-5 h-5"}),"Try Again"]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-medium",children:"Reload Page"})]})]})}):this.props.children}}const Pr=new sa({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1}}});Lt.createRoot(document.getElementById("root")).render(e.jsx(Pt.StrictMode,{children:e.jsx(Dr,{children:e.jsx(aa,{client:Pr,children:e.jsx(_r,{})})})}));
